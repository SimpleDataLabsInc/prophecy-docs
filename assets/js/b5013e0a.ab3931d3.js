"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[56092],{18753:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/okta_dl_cert-0f492bd46f0627d7206c135c6c8ef2e9.png"},22762:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/azure_enterpriseapp_sso-3d4936d29f9ecbe90eb9228ca6bfa896.png"},28453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>l});var s=n(96540);const t={},r=s.createContext(t);function o(e){const i=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:i},e.children)}},37215:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/okta_idp_metadata_xml-2c9061db8a27d4d1f3621d3c6d8a045f.png"},46559:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"administration/authentication/saml-scim","title":"SAML authentication (SCIM optional)","description":"Leverage SAML for authentication for Prophecy users","source":"@site/docs/administration/authentication/saml.md","sourceDirName":"administration/authentication","slug":"/administration/authentication/saml-scim","permalink":"/administration/authentication/saml-scim","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"saml","permalink":"/tags/saml"},{"inline":true,"label":"scim","permalink":"/tags/scim"}],"version":"current","frontMatter":{"title":"SAML authentication (SCIM optional)","id":"saml-scim","description":"Leverage SAML for authentication for Prophecy users","tags":["saml","scim"]},"sidebar":"gettingStartedSidebar","previous":{"title":"LDAP authentication","permalink":"/administration/authentication/ldap"},"next":{"title":"Microsoft Entra ID SSO","permalink":"/administration/authentication/azure-ad"}}');var t=n(74848),r=n(28453);const o={title:"SAML authentication (SCIM optional)",id:"saml-scim",description:"Leverage SAML for authentication for Prophecy users",tags:["saml","scim"]},l=void 0,c={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Supported identity providers",id:"supported-identity-providers",level:2},{value:"SAML configuration",id:"saml-configuration",level:2},{value:"SCIM provisioning",id:"scim-provisioning",level:2},{value:"IDP-specific steps",id:"idp-specific-steps",level:2},{value:"Azure Active Directory",id:"azure-active-directory",level:3},{value:"Basic SAML Configuration",id:"basic-saml-configuration",level:4},{value:"Attributes &amp; Claims",id:"attributes--claims",level:4},{value:"SAML certificates",id:"saml-certificates",level:4},{value:"Set up ProphecyAzureADApp",id:"set-up-prophecyazureadapp",level:4},{value:"Okta",id:"okta",level:3},{value:"Information required from Okta",id:"information-required-from-okta",level:4},{value:"Download SAML Signing Certificate",id:"download-saml-signing-certificate",level:5},{value:"SSO URL",id:"sso-url",level:5},{value:"Entity and SSO Issuer",id:"entity-and-sso-issuer",level:5}];function d(e){const i={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.admonition,{title:"Express and Enterprise",type:"edition",children:(0,t.jsxs)(i.p,{children:["Available for ",(0,t.jsx)(i.a,{href:"/getting-started/editions/",children:"Express and Enterprise Editions"})," only."]})}),"\n",(0,t.jsx)(i.p,{children:"Prophecy supports SAML for authentication."}),"\n",(0,t.jsx)(i.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(i.p,{children:"Review the following prerequisites."}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"To access SSO settings, you must be a cluster admin for your deployment."}),"\n",(0,t.jsx)(i.li,{children:"SAML is available for Express and Enterprise Editions."}),"\n",(0,t.jsxs)(i.li,{children:["SCIM is only available for the Enterprise Edition. To enable SCIM in your environment, update the ",(0,t.jsx)(i.code,{children:"config"})," in your Prophecy deployment."]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"supported-identity-providers",children:"Supported identity providers"}),"\n",(0,t.jsx)(i.p,{children:"Prophecy supports the following identity providers (IdP):"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Google"}),"\n",(0,t.jsx)(i.li,{children:"Okta"}),"\n",(0,t.jsx)(i.li,{children:"Azure Active Directory (Microsoft Entra ID)"}),"\n",(0,t.jsx)(i.li,{children:"Others (custom)"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"saml-configuration",children:"SAML configuration"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Log in to Prophecy as a cluster admin user."}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:["Navigate to the ",(0,t.jsx)(i.strong,{children:"SSO"})," tab of the Prophecy ",(0,t.jsx)(i.strong,{children:"Settings"})," page."]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:["Under ",(0,t.jsx)(i.strong,{children:"Authentication Provider"}),", select SAML."]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Under IDP, select the appropriate identity provider."}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsx)(i.p,{children:"Fill out the remaining parameters:"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Parameter"}),(0,t.jsx)(i.th,{children:"Description"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Generate SCIM Token"}),(0,t.jsx)(i.td,{children:"If SCIM is enabled in your environment, click to create/rotate the SCIM bearer token used by your IdP/SCIM client to provision users and groups."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"SSO URL"}),(0,t.jsx)(i.td,{children:"The Identity Provider Single Sign-On endpoint. Paste the SSO URL (Location) from your IdP metadata. Prophecy redirects users here to authenticate."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Certificate"}),(0,t.jsx)(i.td,{children:"The IdP SAML signing certificate. Prophecy uses this to verify SAML response signatures."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Skip certificate verification"}),(0,t.jsx)(i.td,{children:"Disable TLS certificate/host verification when calling the IdP SSO endpoint."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Entity issuer"}),(0,t.jsx)(i.td,{children:"The entity issuer you configured in the IdP. Usually, this is the label for your SAML configuration."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"SSO issuer"}),(0,t.jsx)(i.td,{children:"The SSO issuer. For Azure AD this is the Azure AD Identifier; for Okta, it is the issuer link in the XML."})]})]})]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["\n",(0,t.jsxs)(i.p,{children:["Click ",(0,t.jsx)(i.strong,{children:"Save"})," at the bottom of the page to save your changes."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"SSO settings for SAML and SCIM configurations",src:n(53920).A+"",width:"2620",height:"1511"})}),"\n",(0,t.jsx)(i.h2,{id:"scim-provisioning",children:"SCIM provisioning"}),"\n",(0,t.jsx)(i.p,{children:"Enable SCIM if you want Prophecy to automatically provision and deprovision users and teams."}),"\n",(0,t.jsxs)(i.p,{children:["See ",(0,t.jsx)(i.a,{href:"/administration/authentication/group-team-mapping",children:"Group-to-team mapping"})," for handling groups."]}),"\n",(0,t.jsx)(i.h2,{id:"idp-specific-steps",children:"IDP-specific steps"}),"\n",(0,t.jsx)(i.h3,{id:"azure-active-directory",children:"Azure Active Directory"}),"\n",(0,t.jsx)(i.p,{children:"Configure SAML for Azure Active Directory (Microsoft Entra ID) and enable SCIM provisioning"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Log into AzureAD as an administrator and create a new Enterprise Application like ",(0,t.jsx)(i.code,{children:"ProphecyAzureADApp"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["In the home page search bar, search for ",(0,t.jsx)(i.strong,{children:"Enterprise Applications"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Click ",(0,t.jsx)(i.strong,{children:"New Application > Create your own application"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Give name for the application like ",(0,t.jsx)(i.code,{children:"ProphecyAzureADApp"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Choose the radio button ",(0,t.jsx)(i.strong,{children:"Integrate any other application you don't find in the gallery (Non-gallery)"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Click ",(0,t.jsx)(i.strong,{children:"Create"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["In Manage section on the left, click ",(0,t.jsx)(i.strong,{children:"Single sign-on"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Choose ",(0,t.jsx)(i.strong,{children:"SAML"})," as the Single sign-on method."]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["Now the form for ",(0,t.jsx)(i.strong,{children:"Set up Single Sign-On with SAML"})," will open. You'll have to fill out different sections of the form."]}),"\n",(0,t.jsx)(i.h4,{id:"basic-saml-configuration",children:"Basic SAML Configuration"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"Provide an Identifier (Entity ID) which is a unique ID to identify this application to Microsoft Entra ID. This will be added to the Entity issuer field in Prophecy."}),"\n",(0,t.jsxs)(i.li,{children:["In the same section, configure ",(0,t.jsx)(i.strong,{children:"Reply URL"})," and ",(0,t.jsx)(i.strong,{children:"Sign on URL"})," as:",(0,t.jsx)(i.br,{}),"\n",(0,t.jsx)(i.code,{children:"https://your-prophecy-ide-url.domain/api/oauth/samlCallback"})]}),"\n",(0,t.jsxs)(i.li,{children:["Click ",(0,t.jsx)(i.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"attributes--claims",children:"Attributes & Claims"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Click ",(0,t.jsx)(i.strong,{children:"Edit"})," button and then ",(0,t.jsx)(i.strong,{children:"Add new claim"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Give ",(0,t.jsx)(i.strong,{children:"Name"})," as ",(0,t.jsx)(i.code,{children:"email"})," and ",(0,t.jsx)(i.strong,{children:"Source Attribute"})," as ",(0,t.jsx)(i.code,{children:"user.userprincipalname"}),", and click ",(0,t.jsx)(i.strong,{children:"Save"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Add one more claim by clicking on ",(0,t.jsx)(i.strong,{children:"Add new claim"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Give ",(0,t.jsx)(i.strong,{children:"Name"})," as ",(0,t.jsx)(i.code,{children:"name"})," and ",(0,t.jsx)(i.strong,{children:"Source Attribute"})," as ",(0,t.jsx)(i.code,{children:"user.givenname"}),", and click ",(0,t.jsx)(i.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"saml-certificates",children:"SAML certificates"}),"\n",(0,t.jsxs)(i.p,{children:["In the ",(0,t.jsx)(i.strong,{children:"SAML certificates"})," section, download ",(0,t.jsx)(i.code,{children:"Certificate (Base64)"})," file to be used while configuring SSO in Prophecy UI."]}),"\n",(0,t.jsx)(i.h4,{id:"set-up-prophecyazureadapp",children:"Set up ProphecyAzureADApp"}),"\n",(0,t.jsxs)(i.p,{children:["In the ",(0,t.jsx)(i.strong,{children:"Set up ProphecyAzureADApp"})," section, copy ",(0,t.jsx)(i.code,{children:"Login URL"})," and ",(0,t.jsx)(i.code,{children:"Azure AD Identifier"})," to be used while configuring SSO in Prophecy UI."]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"AzureAD config example",src:n(22762).A+"",width:"674",height:"679"})}),"\n",(0,t.jsx)(i.h3,{id:"okta",children:"Okta"}),"\n",(0,t.jsx)(i.p,{children:"Configure SAML for Okta and enable SCIM provisioning"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsx)(i.li,{children:"Log in to Okta as an administrator."}),"\n",(0,t.jsxs)(i.li,{children:["On the homepage, navigate to ",(0,t.jsx)(i.strong,{children:"Applications"})," > ",(0,t.jsx)(i.strong,{children:"Applications"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Click ",(0,t.jsx)(i.strong,{children:"Create App Integration"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Select ",(0,t.jsx)(i.strong,{children:"SAML 2.0"})," and click ",(0,t.jsx)(i.strong,{children:"Next"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Enter ",(0,t.jsx)(i.strong,{children:"App Name"})," as ",(0,t.jsx)(i.em,{children:"Prophecy SAML App"})," and click ",(0,t.jsx)(i.strong,{children:"Next"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["For ",(0,t.jsx)(i.strong,{children:"Single Sign-On URL"}),", specify ",(0,t.jsx)(i.code,{children:"https://your-prophecy-ide-url.domain/api/oauth/samlCallback"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Select ",(0,t.jsx)(i.strong,{children:"Use this"})," for both ",(0,t.jsx)(i.strong,{children:"Recipient URL"})," and ",(0,t.jsx)(i.strong,{children:"Destination URL"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["In ",(0,t.jsx)(i.strong,{children:"Audience URI (SP Entity ID)"}),", provide a name to serve as the entity issuer ID (e.g., ",(0,t.jsx)(i.em,{children:"prophecyokta"}),")."]}),"\n",(0,t.jsxs)(i.li,{children:["Set ",(0,t.jsx)(i.strong,{children:"Name ID format"})," to ",(0,t.jsx)(i.strong,{children:"EmailAddress"})," from the dropdown."]}),"\n",(0,t.jsxs)(i.li,{children:["For ",(0,t.jsx)(i.strong,{children:"Application Username"}),", select ",(0,t.jsx)(i.strong,{children:"Email"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Under ",(0,t.jsx)(i.strong,{children:"Attribute Statements"}),", add two attributes ",(0,t.jsx)(i.strong,{children:"name"})," and ",(0,t.jsx)(i.strong,{children:"email"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Okta config example",src:n(66810).A+"",width:"1127",height:"1466"})}),"\n",(0,t.jsxs)(i.ol,{start:"12",children:["\n",(0,t.jsxs)(i.li,{children:["Click ",(0,t.jsx)(i.strong,{children:"Next"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Choose ",(0,t.jsx)(i.strong,{children:"I\u2019m an Okta customer adding an internal app"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Click ",(0,t.jsx)(i.strong,{children:"Finish"}),". The ",(0,t.jsx)(i.em,{children:"Prophecy SAML App"})," is now displayed."]}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"information-required-from-okta",children:"Information required from Okta"}),"\n",(0,t.jsx)(i.h5,{id:"download-saml-signing-certificate",children:"Download SAML Signing Certificate"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Navigate to the ",(0,t.jsx)(i.strong,{children:"Sign On"})," tab of ",(0,t.jsx)(i.em,{children:"Prophecy SAML App"})," in Okta."]}),"\n",(0,t.jsxs)(i.li,{children:["Locate the ",(0,t.jsx)(i.strong,{children:"SAML Signing Certificates"})," section."]}),"\n",(0,t.jsx)(i.li,{children:"Click the download button, as shown in the example below, to download the certificate:"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Download Okta Cert",src:n(18753).A+"",width:"1138",height:"788"})}),"\n",(0,t.jsx)(i.h5,{id:"sso-url",children:"SSO URL"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["In the same ",(0,t.jsx)(i.strong,{children:"Sign On"})," tab under ",(0,t.jsx)(i.strong,{children:"SAML Signing Certificates"}),", click ",(0,t.jsx)(i.strong,{children:"View IdP metadata"}),"."]}),"\n",(0,t.jsx)(i.li,{children:"This action opens an XML file in a new browser tab."}),"\n",(0,t.jsxs)(i.li,{children:["Copy the red-highlighted text in the ",(0,t.jsx)(i.strong,{children:"Location"})," section of the XML file and use it as the ",(0,t.jsx)(i.strong,{children:"SSO URL"})," in Prophecy IDE."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"IDP Metadata",src:n(37215).A+"",width:"3142",height:"820"})}),"\n",(0,t.jsx)(i.h5,{id:"entity-and-sso-issuer",children:"Entity and SSO Issuer"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Go to the ",(0,t.jsx)(i.strong,{children:"General"})," tab, then navigate to the ",(0,t.jsx)(i.strong,{children:"SAML Settings"})," section and click ",(0,t.jsx)(i.strong,{children:"Edit"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Click ",(0,t.jsx)(i.strong,{children:"Next"})," to reach the ",(0,t.jsx)(i.strong,{children:"Configure SAML"})," section."]}),"\n",(0,t.jsxs)(i.li,{children:["Scroll to the bottom and click the ",(0,t.jsx)(i.strong,{children:"Preview the SAML assertion"})," button."]}),"\n",(0,t.jsx)(i.li,{children:"This opens a new browser tab."}),"\n",(0,t.jsxs)(i.li,{children:["Copy the highlighted information from the preview and use it as the ",(0,t.jsx)(i.strong,{children:"Entity Issuer"})," and ",(0,t.jsx)(i.strong,{children:"SSO Issuer"})," in Prophecy IDE."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"SAML Assertion",src:n(75835).A+"",width:"2736",height:"1116"})})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},53920:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/sso-scim-647df26fc0d3bba6a708477cb2d5074b.png"},66810:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/okta_example-4e85f048aa3e058aed50b83093c2739c.png"},75835:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/okta_xml-7c8ba189fececf1f90db537d0685afac.png"}}]);