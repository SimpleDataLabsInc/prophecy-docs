"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[2671],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>f});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),l=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=l(r),m=a,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return r?n.createElement(f,i(i({ref:t},p),{},{components:r})):n.createElement(f,i({ref:t},p))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[u]="string"==typeof e?e:a,i[1]=c;for(var l=2;l<o;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},47568:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var n=r(87462),a=(r(67294),r(3905));const o={title:"Amazon EMR Fabric",id:"EMR-fabric-configuration",description:"Configuring the EMR Fabric",sidebar_position:1,tags:["deployment","fabric","emr"]},i=void 0,c={unversionedId:"low-code-spark/fabrics/EMR-fabric-configuration",id:"low-code-spark/fabrics/EMR-fabric-configuration",title:"Amazon EMR Fabric",description:"Configuring the EMR Fabric",source:"@site/docs/low-code-spark/fabrics/emr-fabric.md",sourceDirName:"low-code-spark/fabrics",slug:"/low-code-spark/fabrics/EMR-fabric-configuration",permalink:"/low-code-spark/fabrics/EMR-fabric-configuration",draft:!1,tags:[{label:"deployment",permalink:"/tags/deployment"},{label:"fabric",permalink:"/tags/fabric"},{label:"emr",permalink:"/tags/emr"}],version:"current",sidebarPosition:1,frontMatter:{title:"Amazon EMR Fabric",id:"EMR-fabric-configuration",description:"Configuring the EMR Fabric",sidebar_position:1,tags:["deployment","fabric","emr"]},sidebar:"defaultSidebar",previous:{title:"How to create a Fabric",permalink:"/low-code-spark/fabrics/create-a-Fabric"},next:{title:"Azure Synapse Fabric",permalink:"/low-code-spark/fabrics/azure-synapse-fabric-guide"}},s={},l=[{value:"Create Amazon EMR cluster with Apache Livy",id:"create-amazon-emr-cluster-with-apache-livy",level:2},{value:"Allow network connectivity between Amazon EMR and Prophecy",id:"allow-network-connectivity-between-amazon-emr-and-prophecy",level:3},{value:"Create a Fabric to connect Prophecy to EMR",id:"create-a-fabric-to-connect-prophecy-to-emr",level:2}],p={toc:l},u="wrapper";function d(e){let{components:t,...o}=e;return(0,a.kt)(u,(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In the context of Spark execution engines, users have the flexibility to opt for Amazon EMR. This guide offers step-by-step instructions on creating a Fabric that enables seamless connectivity to the EMR environment."),(0,a.kt)("h2",{id:"create-amazon-emr-cluster-with-apache-livy"},"Create Amazon EMR cluster with Apache Livy"),(0,a.kt)("admonition",{title:"Warning",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Livy does not work with Python version 3.8 and above.")),(0,a.kt)("p",null,"Navigate to Amazon EMR service and create a cluster. Under ",(0,a.kt)("strong",{parentName:"p"},"Application bundle")," select ",(0,a.kt)("strong",{parentName:"p"},"Custom"),"."),(0,a.kt)("p",null,"Choose appropriate applications to include in your installation. At a minimum, please make sure sure ",(0,a.kt)("strong",{parentName:"p"},"Livy")," and ",(0,a.kt)("strong",{parentName:"p"},"Spark")," are included in the install."),(0,a.kt)("img",{src:r(42830).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("h3",{id:"allow-network-connectivity-between-amazon-emr-and-prophecy"},"Allow network connectivity between Amazon EMR and Prophecy"),(0,a.kt)("p",null,"To configure the necessary network settings for seamless integration, specific modifications to the security groups of your EMR cluster are required. Please follow the instructions outlined below:\nIf you intend to utilize Prophecy as a SaaS (Software as a Service) solution, please note that the Prophecy public IP is ",(0,a.kt)("inlineCode",{parentName:"p"},"3.133.35.237"),". Ensure that the Core security group's outbound rule allows connections to this IP address."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Modify the ",(0,a.kt)("strong",{parentName:"li"},"Primary Node")," security group:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Allow incoming connections to port ",(0,a.kt)("inlineCode",{parentName:"li"},"8998")," from the Prophecy IP."),(0,a.kt)("li",{parentName:"ul"},"This can be achieved by adding an inbound rule to the Master security group that permits incoming traffic on port ",(0,a.kt)("inlineCode",{parentName:"li"},"8998")," from the Prophecy IP address."))),(0,a.kt)("li",{parentName:"ol"},"Modify the ",(0,a.kt)("strong",{parentName:"li"},"Core Node")," security group:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Allow outgoing connections to the Prophecy public IP over HTTPS."),(0,a.kt)("li",{parentName:"ul"},"To enable this, add an outbound rule to the Core security group that allows outgoing traffic over HTTPS protocol to the Prophecy public IP.")))),(0,a.kt)("p",null,"By implementing these adjustments to your EMR cluster's security groups, you will establish the necessary network configuration for effective integration with Prophecy."),(0,a.kt)("h2",{id:"create-a-fabric-to-connect-prophecy-to-emr"},"Create a Fabric to connect Prophecy to EMR"),(0,a.kt)("p",null,"Navigate to Prophecy's UI and click on ",(0,a.kt)("strong",{parentName:"p"},"Create Fabric"),". The Fabric will establish a connection with your EMR cluster and utilizes it as the execution engine for your Pipelines."),(0,a.kt)("img",{src:r(81075).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("br",null),(0,a.kt)("br",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Name")," your EMR Fabric and click on ",(0,a.kt)("strong",{parentName:"p"},"Continue"),"."),(0,a.kt)("br",null),(0,a.kt)("br",null),(0,a.kt)("img",{src:r(63886).Z,alt:"EMR create Fabric",width:"75%"}),(0,a.kt)("p",null,"Choose ",(0,a.kt)("strong",{parentName:"p"},"EMR")," as your ",(0,a.kt)("strong",{parentName:"p"},"Provider"),"."),(0,a.kt)("img",{src:r(18759).Z,alt:"EMR create Fabric",width:"75%"}),(0,a.kt)("p",null,"Before proceeding, it is crucial to ensure that all the required settings are properly configured. If you are uncertain about the necessary configurations, we recommend reaching out to your cloud infrastructure team for additional guidance and assistance. They will be able to provide you with the specific information and support needed to ensure a successful setup."),(0,a.kt)("p",null,"Enter your AWS credentials under ",(0,a.kt)("strong",{parentName:"p"},"Access Key")," and ",(0,a.kt)("strong",{parentName:"p"},"Secret Key"),". Choose the ",(0,a.kt)("strong",{parentName:"p"},"Region")," that your EMR cluster is running in."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Click")," on ",(0,a.kt)("strong",{parentName:"p"},"Fetch environments"),"."),(0,a.kt)("img",{src:r(33565).Z,alt:"EMR cred",width:"75%"}),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Select")," your EMR cluster that you would like to connect to under ",(0,a.kt)("strong",{parentName:"p"},"Spark Environment"),"."),(0,a.kt)("img",{src:r(10763).Z,alt:"EMR select",width:"75%"}),(0,a.kt)("p",null,"Most of the fields should be automatically populated after selecting a EMR cluster. Enter the S3 path that points to the location where you would like your logs to persist."),(0,a.kt)("img",{src:r(73448).Z,alt:"EMR dependencies",width:"75%"}),(0,a.kt)("p",null,"Add the Job size to your environment by clicking on ",(0,a.kt)("strong",{parentName:"p"},"Add Job Size"),". Configure your Job size and click on ",(0,a.kt)("strong",{parentName:"p"},"Add"),"."),(0,a.kt)("img",{src:r(59506).Z,alt:"EMR Job size",width:"75%"}),(0,a.kt)("p",null,"Configure the Prophecy Library:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Select")," ",(0,a.kt)("strong",{parentName:"p"},"File System")," under ",(0,a.kt)("strong",{parentName:"p"},"Scala Resolution mode")," and provide the path:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"s3://prophecy-public-bucket/prophecy-libs")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Select")," ",(0,a.kt)("strong",{parentName:"p"},"File System")," under ",(0,a.kt)("strong",{parentName:"p"},"Python Resolution mode")," and provide the path:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"s3://prophecy-public-bucket/python-prophecy-libs")),(0,a.kt)("img",{src:r(75109).Z,alt:"EMR Job size",width:"75%"}),(0,a.kt)("p",null,"Click on ",(0,a.kt)("strong",{parentName:"p"},"Complete")," and your EMR Fabric is ready!"),(0,a.kt)("img",{src:r(32960).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("p",null,"Run a simple Pipeline and make sure that the interim returns data properly."))}d.isMDXComponent=!0},32960:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/complete-f-abric-400209303a57ed2a4c22f1bccf4c12d9.png"},59506:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/configure-j-ob-size-058d3dded50c8ba323719d7d822fa8c1.png"},81075:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/create-entity-emr-57b7756db750041a330241e5ab066db9.png"},33565:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/emr-aws-cred-4ddff8da9c69baadeea2ad16c60ceeab.png"},10763:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/emr-cluster-select-b517dc86ec0fcc84ff68d0f85be963b1.png"},18759:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/emr-f-abric-f799ef07acc31566f38c945f82e788e7.png"},73448:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/emr-setup-764598a55b42c4663e439f07dbfa2ecd.png"},75109:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/library-789a18e5a1d88023a77f94cfaf14cdb9.png"},42830:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/livy-938a5bcdafa0b6d505604595152d0433.png"},63886:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/name-emr-e8bea861c161b2e398db8c5e4ac23a2c.png"}}]);