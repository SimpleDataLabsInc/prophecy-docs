"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[21079],{15680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>y});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),i=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},g=function(e){var t=i(e.components);return n.createElement(d.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),p=i(a),c=r,y=p["".concat(d,".").concat(c)]||p[c]||m[c]||o;return a?n.createElement(y,l(l({ref:t},g),{},{components:a})):n.createElement(y,l({ref:t},g))}));function y(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=c;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s[p]="string"==typeof e?e:r,l[1]=s;for(var i=2;i<o;i++)l[i]=a[i];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},21585:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>i});var n=a(58168),r=(a(96540),a(15680));const o={title:"Data Sources",id:"datasources-sql",description:"access your data",tags:["SQL","sources","seeds"]},l=void 0,s={unversionedId:"SQL/gems/datasources/datasources-sql",id:"SQL/gems/datasources/datasources-sql",title:"Data Sources",description:"access your data",source:"@site/docs/SQL/gems/datasources/datasources.md",sourceDirName:"SQL/gems/datasources",slug:"/SQL/gems/datasources/",permalink:"/SQL/gems/datasources/",draft:!1,tags:[{label:"SQL",permalink:"/tags/sql"},{label:"sources",permalink:"/tags/sources"},{label:"seeds",permalink:"/tags/seeds"}],version:"current",frontMatter:{title:"Data Sources",id:"datasources-sql",description:"access your data",tags:["SQL","sources","seeds"]},sidebar:"mySidebar",previous:{title:"Write Options",permalink:"/SQL/gems/target-models/write-options"},next:{title:"Upload files",permalink:"/SQL/gems/datasources/upload-files"}},d={},i=[{value:"Seed",id:"seed",level:2},{value:"Source",id:"source",level:2},{value:"Model",id:"model",level:2}],g={toc:i},p="wrapper";function m(e){let{components:t,...o}=e;return(0,r.yg)(p,(0,n.A)({},g,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Loading data into Prophecy is done via the ",(0,r.yg)("a",{parentName:"p",href:"#seed"},"Seed"),", ",(0,r.yg)("a",{parentName:"p",href:"#source"},"Source"),", or ",(0,r.yg)("a",{parentName:"p",href:"#model"},"Model")," gems. These are all based on ",(0,r.yg)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/projects"},"dbt")," concepts."),(0,r.yg)("h2",{id:"seed"},"Seed"),(0,r.yg)("p",null,"A Seed is an excellent way to load small CSV files into Prophecy. This is useful for small test datasets or lookup mappings, like a list of cities or countries. Seeds are saved as SQL files on Git when projects are committed and released. Follow the steps below to create a seed and write to the SQL warehouse defined in the fabric."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Seed1",src:a(19965).A,width:"2880",height:"1084"})),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Callout"),(0,r.yg)("th",{parentName:"tr",align:null},"Step"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"1"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Add Seed")),(0,r.yg)("td",{parentName:"tr",align:null},"Inside the model canvas, from the project tab, select ",(0,r.yg)("strong",{parentName:"td"},"+ Add Seed")," and provide a name. Here the Seed was named ORDERDETAILS.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"2"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Toggle to ",(0,r.yg)("inlineCode",{parentName:"strong"},"Code"))),(0,r.yg)("td",{parentName:"tr",align:null},"The code view displays a text editor.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"3"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Paste data")),(0,r.yg)("td",{parentName:"tr",align:null},"Paste content in CSV format with header and separated by commas.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"4"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Seed file")),(0,r.yg)("td",{parentName:"tr",align:null},"The Seed file is now listed in the files that will be committed to Git when the project is committed and released.")))),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"When you create a new seed, paste the seed contents using the code view. Then, save the seed by clicking the ",(0,r.yg)("strong",{parentName:"p"},"large play button")," in the bottom right corner. Finally, you can open the model of interest and run/execute the seed using the ",(0,r.yg)("strong",{parentName:"p"},"small play button on the Seed gem itself"),".")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Seed2",src:a(95078).A,width:"2880",height:"1084"})),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"th"},"Seed - use in a model and write to the Warehouse")))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"5 Open Model")," - Click to open the desired model where you'd like to use the Seed.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"6 Toggle to ",(0,r.yg)("inlineCode",{parentName:"strong"},"Visual"))," - From this visual view we can see the model canvas.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"7 Add Seed to Model")," - Add the Seed as a datasource for this model.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"8 Seed appears in the Model Canvas")," - Now the content of the Seed is part of the model and can be transformed, joined, etc.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"9 Interactive Run")," - Click the Play button to interactively run the model, including the Seed datasource.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"10 Click the Environment tab")," - Click to browse the SQL Warehouse.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"11 Refetch Sources")," - Crawls the SQL Warehouse to list tables in each of the databases and schemas accessible to your user. Seeds are by default materialized as Tables.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"12 Seed appears as a Table in the Warehouse")," - Once Prophecy has refetched the sources, Prophecy lists the Seed in the Project Browser. So the Seed exists as both a Table in the Warehouse and is also saved as a versioned CSV file on Git when the project is committed and released.")))),(0,r.yg)("h2",{id:"source"},"Source"),(0,r.yg)("p",null,"Each Source points to a table in the SQL Warehouse(s) specified in the fabric. Prophecy does not store the contents of the Source Table. Inside a project, the ",(0,r.yg)("inlineCode",{parentName:"p"},"Env")," tab allows for browsing the database and schema. Tables in the ",(0,r.yg)("inlineCode",{parentName:"p"},"Env")," tab can be drag-n-dropped to the canvas without manually specifying any metadata. You can also upload a source table directly to your environment. For more information about how to upload a file, see ",(0,r.yg)("a",{parentName:"p",href:"./upload-files"},"Upload files"),". Follow the steps below to create and use a Source."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Source1",src:a(55505).A,width:"2880",height:"1084"})),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"th"},"Source creation and usage")))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"1 Cluster and Fabric")," - The Cluster and fabric define the SQL Warehouse execution environment. Attach the desired fabric which contains the Table of interest.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"2 Click the Environment tab")," - Browse the SQL Warehouse specified in the selected fabric.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"3 Add a table")," - Prophecy respects the user's permissions. Any table for which the user has read permission can be added to the model canvas.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"4 Source is added to the model canvas")," - The Source named ORDERSHIPMENTS is now part of the model, and is ready for transformation, joins, etc.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"5 Click the Project tab")," - Lists all the Sources that are now accessible to any model in the project.")))),(0,r.yg)("h2",{id:"model"},"Model"),(0,r.yg)("p",null,"A model is similar to a pipeline, as both contain data transformation steps. Unlike a pipeline, however, each model defines a single ",(0,r.yg)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/materializations#materializations"},"materialized view or table"),"."),(0,r.yg)("p",null,"Models are represented as visual format or as a single SQL file in ",(0,r.yg)("inlineCode",{parentName:"p"},"code")," format. Because models define a single materialized view or table, models can serve as inputs to other models."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Model1",src:a(62481).A,width:"2880",height:"1084"})),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Callout"),(0,r.yg)("th",{parentName:"tr",align:null},"Step"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"1"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Open existing Model")),(0,r.yg)("td",{parentName:"tr",align:null},"Within a project, open an existing model, e.g. MyNextModel.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"2"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Add Model")),(0,r.yg)("td",{parentName:"tr",align:null},"Click to add a new model to the existing Model.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"3"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"Model Name and File Path")),(0,r.yg)("td",{parentName:"tr",align:null},"Provide a name for the new model, e.g. MyModel. Define the desired storage path in Git to store the new model as a SQL file.")))),(0,r.yg)("p",null,"Now the new model has been created and the canvas is displayed. Optionally, click ",(0,r.yg)("inlineCode",{parentName:"p"},"Config"),". Prophecy makes it easy to decide whether a model should be materialized as a view, table, ephemeral, incremental, or dynamic table. For more information on how to configure a table's materiliazation, read this ",(0,r.yg)("a",{parentName:"p",href:"https://www.prophecy.io/blog/interactive-development"},"interactive development blog post"),"."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Model2",src:a(54170).A,width:"2880",height:"1084"})),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Model as a Datasource"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"4 Add a Source")," - From the Environment tab, select a source for the new model.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"5 Configure ")," - Configure the new source, do any transformation steps or simply connect to the new model gem.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"6 Interactive Run"),' - Click the "Play" button to execute the new model and create a materialized view of the new model.')),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"7 Project Tab")," - Click the project tab and notice MyModel is now available in the Project Browser.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"8 Existing Model")," - Open the existing model of interest. In this example, MyNextModel is opened.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"9 Add Model as a Source")," - Add the new model (e.g. MyModel) as a Source.")))),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Model3",src:a(59395).A,width:"2880",height:"1084"})),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Model as a Datasource (cont'd)"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"10 Model as a Source")," - The new model (MyModel) appears on the canvas of the existing model (MyNextModel). Connect the new model as an input to the Join gem or any desired transformation gem. The new model acts as a Datasource.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("strong",{parentName:"td"},"11 Toggle to ",(0,r.yg)("inlineCode",{parentName:"strong"},"code"))," - The SQL ",(0,r.yg)("inlineCode",{parentName:"td"},"code")," view for the open model, MyNextModel, is shown. Each code fragment represents one gem in MyNextModel.")))),(0,r.yg)("p",null,"As a result, ",(0,r.yg)("strong",{parentName:"p"},"MyNextModel")," contains three sources: a Seed (ORDERDETAILS), a Source (ORDERSHIPMENTS), and a model (MyModel). These three sources are joined together and materialized as a table or view in the database.schema defined in the fabric."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"MyNextModel")," can be viewed visually (left) or as a SQL file (right). The project browser (left) lists the sources, seeds, and models available to drag-n-drop into the selected model's canvas."),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"You can't use statements, such as ",(0,r.yg)("inlineCode",{parentName:"p"},"CALL")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"EXECUTE IMMEDIATE"),", directly inside of models. Instead of trying to use these statements in SQL statements or macros, you must use them in pre-hooks.")),(0,r.yg)("p",null,"For more details on dbt concepts including ",(0,r.yg)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/sources"},"Sources"),", ",(0,r.yg)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/seeds"},"Seeds"),", and ",(0,r.yg)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/models"},"Models"),", please explore the dbt documentation or checkout Prophecy's ",(0,r.yg)("a",{parentName:"p",href:"/getting-started/sql-with-databricks"},"SQL with Databricks getting-started guide"),"."))}m.isMDXComponent=!0},62481:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/Model1-c3e59b31aec9286e0fdaece4ca9d5022.png"},54170:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/Model2-a9192e2b9084c7a4dcb77c6de0469e0e.png"},59395:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/Model3-793fdb7516d55a4bdaf5f6b82a89ab6d.png"},19965:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/Seed1-872bb650c42ac27ed7421742853bcf69.png"},95078:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/Seed2-6c3876562dbe732bf65242ab8c03fd9e.png"},55505:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/Source1-670f1524eee23e8c9e263a3ff159088f.png"}}]);