"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[27122],{15979:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>x,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"analysts/development/gems/parse/text-to-column","title":"TextToColumns","description":"Convert text into a column in your table","source":"@site/docs/analysts/development/gems/parse/text-to-column.md","sourceDirName":"analysts/development/gems/parse","slug":"/analysts/text-to-column","permalink":"/analysts/text-to-column","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"gems","permalink":"/tags/gems"},{"inline":true,"label":"analyst","permalink":"/tags/analyst"},{"inline":true,"label":"parse","permalink":"/tags/parse"}],"version":"current","frontMatter":{"title":"TextToColumns","id":"text-to-column","slug":"/analysts/text-to-column","description":"Convert text into a column in your table","tags":["gems","analyst","parse"]},"sidebar":"mySidebar","previous":{"title":"Except","permalink":"/analysts/except"},"next":{"title":"Email","permalink":"/analysts/email"}}');var i=t(74848),l=t(28453),r=t(82824);const d={title:"TextToColumns",id:"text-to-column",slug:"/analysts/text-to-column",description:"Convert text into a column in your table",tags:["gems","analyst","parse"]},c=void 0,a={},h=[{value:"Parameters",id:"parameters",level:2},{value:"Example",id:"example",level:2},{value:"Split to columns",id:"split-to-columns",level:3},{value:"Split to rows",id:"split-to-rows",level:3}];function o(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.A,{sql_package_name:"ProphecyDatabricksSqlBasics",sql_package_version:"0.0.4+"}),"\n",(0,i.jsx)(n.p,{children:"When working with certain tables, you might encounter text columns that contain multiple values separated by specific characters such as commas or semicolons."}),"\n",(0,i.jsx)(n.p,{children:"Use the TextToColumns gem to parse this text and simplify further analysis and processing."}),"\n",(0,i.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Select Column to Split"}),(0,i.jsx)(n.td,{children:"The column that contains the text you would like to split."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Delimiter"}),(0,i.jsx)(n.td,{children:"The character that delimits the separate values."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Select Split Strategy"}),(0,i.jsx)(n.td,{children:(0,i.jsxs)("ul",{class:"table-list",children:[(0,i.jsx)("li",{children:"Split to columns: Values will be split into individual rows in one or more columns."}),(0,i.jsx)("li",{children:"Split to rows: Values will be split into individual rows in one column."})]})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(n.p,{children:["Let's say you have the following table that includes bank account information. Note that some values in the ",(0,i.jsx)(n.code,{children:"Beneficiaries"})," column contain multiple names separated by semicolons."]}),"\n",(0,i.jsx)("div",{class:"table-example",children:(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Account_Number"}),(0,i.jsx)(n.th,{children:"Account_Type"}),(0,i.jsx)(n.th,{children:"Balance"}),(0,i.jsx)(n.th,{children:"Beneficiaries"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"123456789"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"75000.50"}),(0,i.jsx)(n.td,{children:"Amina Yusuf; Juan P\xe9rez"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"987654321"}),(0,i.jsx)(n.td,{children:"Savings"}),(0,i.jsx)(n.td,{children:"12000.00"}),(0,i.jsx)(n.td,{children:"Chen Wei"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"456789123"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"3400.50"}),(0,i.jsx)(n.td,{children:"Yuki Tanaka; Leila Haddad; Ivan Petrov"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"789123456"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"800.00"}),(0,i.jsx)(n.td,{children:"NULL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"321654987"}),(0,i.jsx)(n.td,{children:"Savings"}),(0,i.jsx)(n.td,{children:"2200.95"}),(0,i.jsx)(n.td,{children:"Mei Lin; Noah Schmidt"})]})]})]})}),"\n",(0,i.jsx)(n.p,{children:"You can use the TextToColumns gem to automatically split these values into separate rows or columns, making your data cleaner and easier to work with."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Open the TextToColumns gem."}),"\n",(0,i.jsxs)(n.li,{children:["Select the ",(0,i.jsx)(n.code,{children:"Beneficiaries"})," column to split."]}),"\n",(0,i.jsxs)(n.li,{children:["Under ",(0,i.jsx)(n.strong,{children:"Delimiter"}),", input ",(0,i.jsx)(n.code,{children:";"})," as the delimiting character."]}),"\n",(0,i.jsx)(n.li,{children:"Select the split strategy."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Let's explore the outputs that result from the different split strategies."}),"\n",(0,i.jsx)(n.h3,{id:"split-to-columns",children:"Split to columns"}),"\n",(0,i.jsxs)(n.p,{children:["When you use the ",(0,i.jsx)(n.strong,{children:"Split to columns"})," strategy, each name should be split into its own column."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Split to columns"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Under ",(0,i.jsx)(n.strong,{children:"Number of columns"}),", type ",(0,i.jsx)(n.code,{children:"2"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Keep the default ",(0,i.jsx)(n.strong,{children:"Extra Characters"})," setting to ",(0,i.jsx)(n.code,{children:"Leave extra in last column"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Keep or change the default column prefix and suffix."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The resulting table will have two new columns. The output table has the same number of rows as the input table."}),"\n",(0,i.jsx)("div",{class:"table-example",children:(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Account_Number"}),(0,i.jsx)(n.th,{children:"Account_Type"}),(0,i.jsx)(n.th,{children:"Balance"}),(0,i.jsx)(n.th,{children:"Beneficiaries"}),(0,i.jsx)(n.th,{children:"root_1_generated"}),(0,i.jsx)(n.th,{children:"root_2_generated"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"123456789"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"75000.50"}),(0,i.jsx)(n.td,{children:"Amina Yusuf; Juan P\xe9rez"}),(0,i.jsx)(n.td,{children:"Amina Yusuf"}),(0,i.jsx)(n.td,{children:"Juan P\xe9rez"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"987654321"}),(0,i.jsx)(n.td,{children:"Savings"}),(0,i.jsx)(n.td,{children:"12000.00"}),(0,i.jsx)(n.td,{children:"Chen Wei"}),(0,i.jsx)(n.td,{children:"Chen Wei"}),(0,i.jsx)(n.td,{children:"NULL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"456789123"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"3400.50"}),(0,i.jsx)(n.td,{children:"Yuki Tanaka; Leila Haddad; Ivan Petrov"}),(0,i.jsx)(n.td,{children:"Yuki Tanaka"}),(0,i.jsx)(n.td,{children:"Leila Haddad; Ivan Petrov"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"789123456"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"800.00"}),(0,i.jsx)(n.td,{children:"NULL"}),(0,i.jsx)(n.td,{children:"NULL"}),(0,i.jsx)(n.td,{children:"NULL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"321654987"}),(0,i.jsx)(n.td,{children:"Savings"}),(0,i.jsx)(n.td,{children:"2200.95"}),(0,i.jsx)(n.td,{children:"Mei Lin; Noah Schmidt"}),(0,i.jsx)(n.td,{children:"Mei Lin"}),(0,i.jsx)(n.td,{children:"Noah Schmidt"})]})]})]})}),"\n",(0,i.jsxs)(n.p,{children:["Notice that one the of cells still has a semicolon: ",(0,i.jsx)(n.code,{children:"Leila Haddad; Ivan Petrov"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"This is because the gem was configured to generate two new columns. Extra characters are kept in the last column. If the gem was configured to generate three columns instead, each beneficiary would have their own column."}),"\n",(0,i.jsx)(n.h3,{id:"split-to-rows",children:"Split to rows"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"Split to rows"})," strategy creates a separate row for each value in the selected column. All other column values are copied to each new row. Use this strategy when:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The number of items in a cell (such as beneficiaries) varies between rows."}),"\n",(0,i.jsx)(n.li,{children:"You don\u2019t know the maximum number of items in the column."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"To apply this strategy:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Split to rows"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Keep or change the default generated column name."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"In the output table, each beneficiary has their own row. The output table has more rows than the input table."}),"\n",(0,i.jsx)("div",{class:"table-example",children:(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Account_Number"}),(0,i.jsx)(n.th,{children:"Account_Type"}),(0,i.jsx)(n.th,{children:"Balance"}),(0,i.jsx)(n.th,{children:"Beneficiaries"}),(0,i.jsx)(n.th,{children:"generated_column"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"123456789"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"75000.5"}),(0,i.jsx)(n.td,{children:"Amina Yusuf; Juan P\xe9rez"}),(0,i.jsx)(n.td,{children:"Amina Yusuf"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"123456789"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"75000.5"}),(0,i.jsx)(n.td,{children:"Amina Yusuf; Juan P\xe9rez"}),(0,i.jsx)(n.td,{children:"Juan P\xe9rez"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"987654321"}),(0,i.jsx)(n.td,{children:"Savings"}),(0,i.jsx)(n.td,{children:"12000"}),(0,i.jsx)(n.td,{children:"Chen Wei"}),(0,i.jsx)(n.td,{children:"Chen Wei"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"456789123"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"3400.5"}),(0,i.jsx)(n.td,{children:"Yuki Tanaka; Leila Haddad; Ivan Petrov"}),(0,i.jsx)(n.td,{children:"Yuki Tanaka"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"456789123"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"3400.5"}),(0,i.jsx)(n.td,{children:"Yuki Tanaka; Leila Haddad; Ivan Petrov"}),(0,i.jsx)(n.td,{children:"Leila Haddad"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"456789123"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"3400.5"}),(0,i.jsx)(n.td,{children:"Yuki Tanaka; Leila Haddad; Ivan Petrov"}),(0,i.jsx)(n.td,{children:"Ivan Petrov"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"789123456"}),(0,i.jsx)(n.td,{children:"Checking"}),(0,i.jsx)(n.td,{children:"800"}),(0,i.jsx)(n.td,{children:"NULL"}),(0,i.jsx)(n.td,{children:"NULL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"321654987"}),(0,i.jsx)(n.td,{children:"Savings"}),(0,i.jsx)(n.td,{children:"2200.95"}),(0,i.jsx)(n.td,{children:"Mei Lin; Noah Schmidt"}),(0,i.jsx)(n.td,{children:"Mei Lin"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"321654987"}),(0,i.jsx)(n.td,{children:"Savings"}),(0,i.jsx)(n.td,{children:"2200.95"}),(0,i.jsx)(n.td,{children:"Mei Lin; Noah Schmidt"}),(0,i.jsx)(n.td,{children:"Noah Schmidt"})]})]})]})})]})}function x(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>d});var s=t(96540);const i={},l=s.createContext(i);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}},82824:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var s=t(74848);function i(e){return(0,s.jsxs)("div",{children:[e.sql_package_name&&e.sql_package_version&&(0,s.jsx)("a",{href:"https://docs.prophecy.io/engineers/package-hub/",children:(0,s.jsxs)("span",{className:"badge-dependency",children:[(0,s.jsx)("span",{className:"left",children:e.sql_package_name}),(0,s.jsx)("span",{className:"right",children:e.sql_package_version})]})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})}}}]);