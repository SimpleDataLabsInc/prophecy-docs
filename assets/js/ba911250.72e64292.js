"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[70596],{25922:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>c,frontMatter:()=>d,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"analysts/development/gems/custom/stored-procedure","title":"StoredProcedure gem","description":"Create and call stored procedures to use in pipelines","source":"@site/docs/analysts/development/gems/custom/stored-procedure.md","sourceDirName":"analysts/development/gems/custom","slug":"/analysts/stored-procedure-gem","permalink":"/analysts/stored-procedure-gem","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"gems","permalink":"/tags/gems"},{"inline":true,"label":"analyst","permalink":"/tags/analyst"},{"inline":true,"label":"custom","permalink":"/tags/custom"}],"version":"current","frontMatter":{"title":"StoredProcedure gem","sidebar_label":"StoredProcedure","id":"stored-procedure","slug":"/analysts/stored-procedure-gem","description":"Create and call stored procedures to use in pipelines","tags":["gems","analyst","custom"]},"sidebar":"mySidebar","previous":{"title":"Script","permalink":"/analysts/script"},"next":{"title":"SQLStatement","permalink":"/analysts/sql-statement"}}');var o=r(74848),n=r(28453);const d={title:"StoredProcedure gem",sidebar_label:"StoredProcedure",id:"stored-procedure",slug:"/analysts/stored-procedure-gem",description:"Create and call stored procedures to use in pipelines",tags:["gems","analyst","custom"]},i=void 0,a={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Limitations",id:"limitations",level:2},{value:"Input and Output",id:"input-and-output",level:2},{value:"Parameters",id:"parameters",level:2}];function u(e){const t={a:"a",code:"code",h2:"h2",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Use the StoredProcedure gem to call stored procedures defined in your project. Stored procedures allow you to run procedural logic (such as loops, conditional statements, or DDL operations) as a step in your pipeline."}),"\n",(0,o.jsxs)(t.p,{children:["Stored procedures are built on top of BigQuery stored procedures and follow the same SQL syntax and execution model. To learn more about what stored procedures are, how they work in Prophecy, and how to define them, see ",(0,o.jsx)(t.a,{href:"/analysts/stored-procedure",children:"Stored procedures"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsx)(t.p,{children:"To use stored procedures, you need:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Prophecy 4.1.2 or later."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"limitations",children:"Limitations"}),"\n",(0,o.jsx)(t.p,{children:"The StoredProcedure gem can only call stored procedures that have been defined in Prophecy. Stored procedures originating from BigQuery cannot be called from this gem."}),"\n",(0,o.jsx)(t.h2,{id:"input-and-output",children:"Input and Output"}),"\n",(0,o.jsxs)(t.p,{children:["By default, the StoredProcedure gem has no input or output ports. You can add ports manually by clicking ",(0,o.jsx)(t.code,{children:"+"})," next to ",(0,o.jsx)(t.strong,{children:"Ports"})," in the gem configuration."]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Input port (optional): Pass values from a table into the stored procedure. Only one input port is supported."}),"\n",(0,o.jsx)(t.li,{children:"Output port (optional): Return output arguments in a table. Only one output port is supported."}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["If an input port is added, the stored procedure is executed ",(0,o.jsx)(t.strong,{children:"once per input row"}),". As a result, the output will contain the ",(0,o.jsx)(t.strong,{children:"same number of rows"})," as the input. If no input port is added, the stored procedure runs once."]}),"\n",(0,o.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,o.jsx)(t.p,{children:"Configure the StoredProcedure gem using the following parameters:"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Parameter"}),(0,o.jsx)(t.th,{children:"Description"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"Procedure"}),(0,o.jsxs)(t.td,{children:["Select a stored procedure from the dropdown menu of ",(0,o.jsx)(t.a,{href:"/analysts/stored-procedure",children:"existing procedures"})," in the project."]})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"Arguments"}),(0,o.jsx)(t.td,{children:"Add values to arguments required by the stored procedure. Arguments automatically appear when you choose a stored procedure."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"Pass through columns"}),(0,o.jsxs)(t.td,{children:["Pass through additional columns from the input table to the output of the stored procedure. Columns can be defined using visual or SQL expressions. ",(0,o.jsx)("br",{}),"If no pass through columns are defined, the output contains one column per ",(0,o.jsx)(t.code,{children:"OUT"})," argument in the stored procedure."]})]})]})]})]})}function c(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},28453:(e,t,r)=>{r.d(t,{R:()=>d,x:()=>i});var s=r(96540);const o={},n=s.createContext(o);function d(e){const t=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);