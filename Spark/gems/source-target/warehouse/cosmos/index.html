<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Spark/gems/source-target/warehouse/cosmos" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">CosmosDB | Prophecy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.prophecy.io/Spark/gems/source-target/warehouse/cosmos"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CosmosDB | Prophecy"><meta data-rh="true" name="description" content="CosmosDB"><meta data-rh="true" property="og:description" content="CosmosDB"><link data-rh="true" rel="icon" href="/img/favicon2.png"><link data-rh="true" rel="canonical" href="https://docs.prophecy.io/Spark/gems/source-target/warehouse/cosmos"><link data-rh="true" rel="alternate" href="https://docs.prophecy.io/Spark/gems/source-target/warehouse/cosmos" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.prophecy.io/Spark/gems/source-target/warehouse/cosmos" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Prophecy" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/assets/css/styles.16451571.css">
<script src="/assets/js/runtime~main.1f4a7428.js" defer="defer"></script>
<script src="/assets/js/main.29d909ef.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Prophecy Logo.png" alt="Prophecy Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Prophecy Logo White.png" alt="Prophecy Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/administration">Administration</a><a href="https://transpiler.docs.prophecy.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Transpiler</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/getting-help">Help</a><a href="mailto:docs@prophecy.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Feedback</a><a href="http://app.prophecy.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div id="inkeep-shadowradix-:R1spa5:" style="display:contents"></div><span></span></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Prophecy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/getting-started/">Getting started</a><button aria-label="Expand sidebar category &#x27;Getting started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-copilot">Data Copilot</a><button aria-label="Expand sidebar category &#x27;Data Copilot&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/release_notes/">Release notes</a><button aria-label="Expand sidebar category &#x27;Release notes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="sidebar-divider"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-title">Analysts <span class="badge">Preview</span></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/pipeline-development">Pipeline development</a><button aria-label="Expand sidebar category &#x27;Pipeline development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/versioning">Versioning</a><button aria-label="Expand sidebar category &#x27;Versioning&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analysts/scheduling">Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analysts/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analysts/extensibility">Extensibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/business-applications">Apps</a><button aria-label="Expand sidebar category &#x27;Apps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="sidebar-divider"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-title">Engineers</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Spark/">Pipeline development</a><button aria-label="Collapse sidebar category &#x27;Pipeline development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/Spark/pipelines/">Pipelines</a><button aria-label="Expand sidebar category &#x27;Pipelines&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/dataset">Datasets</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/Spark/gems/">Gems</a><button aria-label="Collapse sidebar category &#x27;Gems&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/Spark/gems/source-target/">Source and Target</a><button aria-label="Collapse sidebar category &#x27;Source and Target&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/Spark/gems/source-target/file/avro">File</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/Spark/gems/source-target/warehouse/bigquery">Warehouse</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/bigquery">BigQuery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Spark/gems/source-target/warehouse/cosmos">CosmosDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/db2">DB2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/jdbc">JDBC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/mongodb">MongoDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/oracle">Oracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/redshift">Redshift</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/salesforce">Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/snowflake">Snowflake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/warehouse/teradata">Teradata</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/Spark/gems/source-target/catalog-table/delta">Catalog Table</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/source-target/lookup">Lookup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/Spark/gems/transform/">Transform</a><button aria-label="Expand sidebar category &#x27;Transform&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/Spark/gems/join-split/">Join/Split</a><button aria-label="Expand sidebar category &#x27;Join/Split&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineers/subgraph">Subgraph</a><button aria-label="Expand sidebar category &#x27;Subgraph&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/Spark/gems/machine-learning/">Machine learning</a><button aria-label="Expand sidebar category &#x27;Machine learning&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/Spark/gems/custom/">Custom</a><button aria-label="Expand sidebar category &#x27;Custom&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Spark/gems/expression-builder">Expression builder</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineers/execution">Execution</a><button aria-label="Expand sidebar category &#x27;Execution&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/Spark/data-explorer/">Data exploration</a><button aria-label="Expand sidebar category &#x27;Data exploration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/Spark/functions/business-rules-engine/">Functions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/Spark/spark-streaming/">Spark streaming</a><button aria-label="Expand sidebar category &#x27;Spark streaming&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engineers/project-best-practices">Best practices</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-modeling/">Model development</a><button aria-label="Expand sidebar category &#x27;Model development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/lineage/">Lineage</a><button aria-label="Expand sidebar category &#x27;Lineage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ci-cd/reliable-ci-cd">CI/CD</a><button aria-label="Expand sidebar category &#x27;CI/CD&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Orchestration/">Orchestration</a><button aria-label="Expand sidebar category &#x27;Orchestration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/extensibility/">Extensibility</a><button aria-label="Expand sidebar category &#x27;Extensibility&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Spark/"><span itemprop="name">Pipeline development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Spark/gems/"><span itemprop="name">Gems</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Spark/gems/source-target/"><span itemprop="name">Source and Target</span></a><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Warehouse</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CosmosDB</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CosmosDB</h1></header><div><a href="https://docs.prophecy.io/extensibility/package-hub/"><span class="badge-dependency"><span class="left">ProphecyWarehousePython</span><span class="right">0.0.1+</span></span></a><a href="https://docs.prophecy.io/administration/fabrics/Spark-fabrics/databricks/"><span class="badge-spark"><span class="left">Databricks UC Single Cluster</span><span class="right">Not Supported</span></span></a><a href="https://docs.prophecy.io/administration/fabrics/Spark-fabrics/databricks/ucshared"><span class="badge-spark"><span class="left">Databricks UC Shared</span><span class="right">Not Supported</span></span></a><a href="https://docs.prophecy.io/administration/fabrics/Spark-fabrics/livy"><span class="badge-spark"><span class="left">Livy</span><span class="right">Not Supported</span></span></a><br><br></div>
<p>The <code>azure-cosmos-spark</code> connector is an integration between Azure CosmosDB and Apache Spark, enabling you to read and write data from and to CosmosDB using Spark. This document will cover the key properties available for configuration when using this connector.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<p>On your Execution Cluster (Databricks or OnPrem), <a href="/engineers/dependencies">connect a dependency</a> that has the following Maven coordinates (for Spark 3.3; For others please check <a href="https://github.com/Azure/azure-sdk-for-java/tree/main/sdk/cosmos/azure-cosmos-spark_3-3_2-12" target="_blank" rel="noopener noreferrer">this</a> link):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">com.azure.cosmos.spark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">azure-cosmos-spark_3-3_2</span><span class="token number" style="color:#36acaa">-12</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">4.18</span><span class="token plain">.</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2>
<div style="position:relative;padding-bottom:56.25%;height:0"><iframe src="https://www.loom.com/embed/f5c150ff8a1b4c1fb1485c20e08fde50" frameborder="0" style="position:absolute;top:0;left:0;width:100%;height:100%"></iframe></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-auth-properties">Common Auth Properties<a href="#common-auth-properties" class="hash-link" aria-label="Direct link to Common Auth Properties" title="Direct link to Common Auth Properties">​</a></h2>
<p>These properties are shared between the read and write operations.</p>
<table><thead><tr><th>Property</th><th>Required</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>Authentication Type</td><td><code>True</code></td><td><code>MasterKey</code></td><td>There are two auth types are supported currently: <code>MasterKey</code>(PrimaryReadWriteKeys, SecondReadWriteKeys, PrimaryReadOnlyKeys, SecondReadWriteKeys), <code>ServicePrinciple</code>.</td></tr><tr><td>Azure Environment</td><td><code>True</code></td><td><code>Azure</code></td><td>The azure environment of the CosmosDB account: Azure, AzureChina, AzureUsGovernment, AzureGermany.</td></tr><tr><td>Account Endpoint</td><td><code>True</code></td><td><code>None</code></td><td>The CosmosDB account URI.</td></tr><tr><td>Account Key</td><td><code>True</code></td><td><code>None</code></td><td>The CosmosDB account key.</td></tr><tr><td>Subscription ID</td><td><code>False</code></td><td><code>None</code></td><td>The subscriptionId of the CosmosDB account. Required for <code>ServicePrinciple</code> authentication.</td></tr><tr><td>Tenant</td><td><code>False</code></td><td><code>None</code></td><td>The tenantId of the CosmosDB account. Required for <code>ServicePrinciple</code> authentication.</td></tr><tr><td>Resource Group Name</td><td><code>False</code></td><td><code>None</code></td><td>The resource group of the CosmosDB account. Required for ServicePrinciple authentication.</td></tr><tr><td>Client Id</td><td><code>False</code></td><td><code>None</code></td><td>The clientId/ApplicationId of the service principle. Required for ServicePrinciple authentication.</td></tr><tr><td>Client Secret</td><td><code>False</code></td><td><code>None</code></td><td>The client secret/password of the service principle. Required for ServicePrinciple authentication.</td></tr><tr><td>Database</td><td><code>True</code></td><td><code>None</code></td><td>The CosmosDB database name.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="source-properties">Source Properties<a href="#source-properties" class="hash-link" aria-label="Direct link to Source Properties" title="Direct link to Source Properties">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="important-source-properties">Important Source Properties<a href="#important-source-properties" class="hash-link" aria-label="Direct link to Important Source Properties" title="Direct link to Important Source Properties">​</a></h3>
<p>These properties are specific to read operations.</p>
<table><thead><tr><th>Property</th><th>Required</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>Data Source</td><td><code>True</code></td><td>DB Table</td><td>Whether all data in container should be loaded or should data be returned using a custom query</td></tr><tr><td>Container</td><td><code>False</code></td><td><code>None</code></td><td>The CosmosDB container name.</td></tr><tr><td>Custom Query</td><td><code>False</code></td><td><code>SELECT 1</code></td><td>When provided the custom query will be processed against the CosmosDB endpoint instead of dynamically generating the query via predicate push down. Usually it is recommended to rely on Spark&#x27;s predicate push down because that will allow to generate the most efficient set of filters based on the query plan. But there are a couple of predicates like aggregates (count, group by, avg, sum, etc.) that cannot be pushed down yet (at least in Spark 3.1) - so the custom query is a fallback to allow them to be pushed into the query sent to Cosmos. If specified, with schema inference enabled, the custom query will also be used to infer the schema.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-source-properties">Other Source Properties<a href="#other-source-properties" class="hash-link" aria-label="Direct link to Other Source Properties" title="Direct link to Other Source Properties">​</a></h3>
<table><thead><tr><th>Property</th><th>Required</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>Use Gateway Mode</td><td><code>False</code></td><td><code>false</code></td><td>Use gateway mode for the client operations.</td></tr><tr><td>Force Eventual Consistency</td><td><code>False</code></td><td><code>true</code></td><td>Makes the client use Eventual consistency for read operations instead of using the default account level consistency.</td></tr><tr><td>Application name</td><td><code>False</code></td><td><code>None</code></td><td>Application name</td></tr><tr><td>Preferred Regions List</td><td><code>False</code></td><td><code>None</code></td><td>Preferred regions list to be used for a multi region CosmosDB account. This is a comma separated value (e.g., [East US, West US] or East US, West US) provided preferred regions will be used as hint. You should use a collocated Spark cluster with your CosmosDB account and pass the Spark cluster region as preferred region. See list of azure regions <a href="https://learn.microsoft.com/en-gb/dotnet/api/microsoft.azure.documents.locationnames?view=azure-dotnet&amp;preserve-view=true" target="_blank" rel="noopener noreferrer">here</a>. Note that you can also use <code>spark.cosmos.preferredRegions</code> as alias.</td></tr><tr><td>Disable Tcp Connection Endpoint Rediscovery</td><td><code>False</code></td><td><code>false</code></td><td>Can be used to disable TCP connection endpoint rediscovery. TCP connection endpoint rediscovery should only be disabled when using custom domain names with private endpoints when using a custom Spark environment. When using Azure Databricks or Azure Synapse as Spark runtime it should never be required to disable endpoint rediscovery.</td></tr><tr><td>Allow Invalid JSON With Duplicate JSON Properties</td><td><code>False</code></td><td><code>false</code></td><td>By default (when set to false) the CosmosDB Java SDK and Spark connector will raise a hard failure when JSON documents are read that contain JSON object with multiple properties of the same name. This config option can be used to override the behavior and silently ignore the invalid JSON and instead use the last occurrence of the property when parsing the JSON. NOTE: This is only meant to be used as a temporary workaround. We strongly recommend fixing the invalid JSON from even being ingested into the data and only use this workaround while cleaning up the documents with invalid JSON.</td></tr><tr><td>Max Item Count</td><td><code>False</code></td><td><code>1000</code></td><td>Overrides the maximum number of documents that can be returned for a single query or change feed request. The default value is 1000. Consider increasing this only for average document sizes significantly smaller than 1KB or when projection reduces the number of properties selected in queries significantly (like when only selecting &quot;id&quot; of documents, etc.).</td></tr><tr><td>Max Integrated Staleness in milliseconds</td><td><code>False</code></td><td><code>None</code></td><td>Sets the max staleness window in milliseconds for the point read or query request results in the integrated cache when using the dedicated gateway. Learn more about max integrated cache staleness <a href="https://learn.microsoft.com/en-gb/azure/cosmos-db/integrated-cache#maxintegratedcachestaleness" target="_blank" rel="noopener noreferrer">here</a>.</td></tr><tr><td>Inclusion Mode</td><td><code>False</code></td><td><code>Always</code></td><td>Determines whether null/default values will be serialized to JSON or whether properties with null/default value will be skipped. The behavior follows the same ideas as <a href="https://github.com/FasterXML/jackson-annotations/blob/d0820002721c76adad2cc87fcd88bf60f56b64de/src/main/java/com/fasterxml/jackson/annotation/JsonInclude.java#L98-L227" target="_blank" rel="noopener noreferrer">Jackson&#x27;s JsonInclude.Include</a>. <code>Always</code> means JSON properties are created even for null and default values. <code>NonNull</code> means no JSON properties will be created for explicit null values. <code>NonEmpty</code> means JSON properties will not be created for empty string values or empty arrays/mpas. <code>NonDefault</code> means JSON properties will be skipped not just for null/empty but also when the value is identical to the default value 0 for numeric properties for example.</td></tr><tr><td>DateTime Conversion Mode</td><td><code>False</code></td><td><code>Default</code></td><td>The date/time conversion mode options are <code>Default</code>, <code>AlwaysEpochMilliseconds</code>, <code>AlwaysEpochMillisecondsWithSystemDefaultTimezone</code>. With <code>Default</code>, the standard Spark 3.* behavior is used: java.sql.Date/java.time.LocalDate are converted to EpochDay, java.sql.Timestamp/java.time.Instant are converted to MicrosecondsFromEpoch. With <code>AlwaysEpochMilliseconds</code>, the same behavior as the CosmosDB connector for Spark 2.4 is used: java.sql.Date, java.time.LocalDate, java.sql.Timestamp and java.time.Instant are converted to MillisecondsFromEpoch. The behavior for <code>AlwaysEpochMillisecondsWithSystemDefaultTimezone</code> is identical with <code>AlwaysEpochMilliseconds</code> except that the connector will assume System default time zone / Spark session time zone (specified via <code>spark.sql.session.timezone</code>) instead of UTC when the date/time to be parsed has no explicit time zone.</td></tr><tr><td>Schema Conversion Mode</td><td><code>False</code></td><td><code>Relaxed</code></td><td>The schema conversion behavior (<code>Relaxed</code>, <code>Strict</code>). When reading JSON documents, if a document contains an attribute that does not map to the schema type, the user can decide whether to use a null value (<code>Relaxed</code>) or an exception (<code>Strict</code>).</td></tr><tr><td>Partitioning Strategy</td><td><code>False</code></td><td><code>Default</code></td><td>The partitioning strategy used (<code>Default</code>, <code>Custom</code>, <code>Restrictive</code> or <code>Aggressive</code>)</td></tr><tr><td>Partitioning Targeted Count</td><td><code>False</code></td><td><code>None</code></td><td>An Integer value representing the targeted Partition Count. This parameter is optional and ignored unless strategy is <code>Custom</code>. In this case the Spark Connector won&#x27;t dynamically calculate the number of partitions but stick with this value.</td></tr><tr><td>Partitioning Feed Range Filter</td><td><code>False</code></td><td><code>None</code></td><td>Can be used to scope the query to a single logical CosmosDB partition (or a subset of logical partitions). If this parameter is optionally provided, the partitioning strategy will be modified - only partitions for the scoped logical partitions will be created. So, the main benefit of this config option is to reduce the necessary SparkTasks/Partitions.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="schema-inference-related-configs">Schema Inference Related Configs<a href="#schema-inference-related-configs" class="hash-link" aria-label="Direct link to Schema Inference Related Configs" title="Direct link to Schema Inference Related Configs">​</a></h3>
<table><thead><tr><th>Property</th><th>Required</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>Enable Infer Schema</td><td><code>True</code></td><td><code>true</code></td><td>Whether all data in the container should be loaded or should data be returned using a custom query</td></tr><tr><td>Enable Custom Query for Inferring Schema</td><td><code>False</code></td><td><code>None</code></td><td>Checkbox, which if marked, will open up an editor for writing Custom SQL Query</td></tr><tr><td>Make all Columns Nullable</td><td><code>False</code></td><td><code>true</code></td><td>When schema inference is enabled, whether the resulting schema will make all columns nullable. By default, all columns (except cosmos system properties) will be treated as nullable even if all rows within the sample set have non-null values. When disabled, the inferred columns are treated as nullable or not depending on whether any record in the sample set has null-values within a column.</td></tr><tr><td>Record Sample Size for Schema Inference</td><td><code>False</code></td><td><code>1000</code></td><td>Sampling size to use when inferring schema and not using a query.</td></tr><tr><td>Include all System Properties</td><td><code>False</code></td><td><code>false</code></td><td>When schema inference is enabled, whether the resulting schema will include all CosmosDB system properties.</td></tr><tr><td>Include Document Timestamp field</td><td><code>False</code></td><td><code>false</code></td><td>When schema inference is enabled, whether the resulting schema will include the document Timestamp (_ts). Not required if <code>spark.cosmos.read.inferSchema.includeSystemProperties</code> is enabled, as it will already include all system properties.</td></tr><tr><td>Infer Schema Query</td><td><code>False</code></td><td><code>SELECT * FROM r</code></td><td>When schema inference is enabled, used as custom query to infer it. For example, if you store multiple entities with different schemas within a container and you want to ensure inference only looks at certain document types or you want to project only particular columns.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="throughput-control-configs">Throughput Control Configs<a href="#throughput-control-configs" class="hash-link" aria-label="Direct link to Throughput Control Configs" title="Direct link to Throughput Control Configs">​</a></h3>
<p>Having throughput control helps to isolate the performance needs of applications running against a container, by limiting the amount of <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/request-units" target="_blank" rel="noopener noreferrer">request units</a> that can be consumed by a given Spark client.
There are several advanced scenarios that benefit from client-side throughput control:</p>
<ul>
<li><strong>Different operations and tasks have different priorities</strong> - there can be a need to prevent normal transactions from being throttled due to data ingestion or copy activities. Some operations and/or tasks aren&#x27;t sensitive to latency, and are more tolerant to being throttled than others.</li>
<li><strong>Provide fairness/isolation to different end users/tenants</strong> - An application will usually have many end users. Some users may send too many requests, which consume all available throughput, causing others to get throttled.</li>
<li><strong>Load balancing of throughput between different Azure Cosmos DB clients</strong> - in some use cases, it&#x27;s important to make sure all the clients get a fair (equal) share of the throughput.</li>
</ul>
<table><thead><tr><th>Property</th><th>Required</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>Throughput Control Enabled</td><td><code>False</code></td><td><code>false</code></td><td>Whether throughput control is enabled</td></tr><tr><td>Throughput Control: Account Endpoint</td><td><code>False</code></td><td><code>None</code></td><td>CosmosDB Account Endpoint Uri for throughput control. If not defined, then <code>spark.cosmos.accountEndpoint</code> will be used.</td></tr><tr><td>Throughput Control Account Key</td><td><code>False</code></td><td><code>None</code></td><td>CosmosDB Account Key for throughput control.</td></tr><tr><td>Throughput Control Preferred Regions List</td><td><code>False</code></td><td><code>None</code></td><td>Preferred regions list to be used for a multi region CosmosDB account. This is a comma separated value (e.g., [<code>East US</code>, <code>West US</code>] or <code>East US</code>, <code>West US</code>) provided preferred regions will be used as hint. You should use a collocated Spark cluster with your CosmosDB account and pass the Spark cluster region as preferred region. See list of azure regions <a href="https://learn.microsoft.com/en-gb/dotnet/api/microsoft.azure.documents.locationnames?view=azure-dotnet&amp;preserve-view=true" target="_blank" rel="noopener noreferrer">here</a>.</td></tr><tr><td>Disable TCP connection endpoint Rediscovery</td><td><code>False</code></td><td><code>false</code></td><td>Can be used to disable TCP connection endpoint rediscovery. TCP connection endpoint rediscovery should only be disabled when using custom domain names with private endpoints when using a custom Spark environment. When using Azure Databricks or Azure Synapse as Spark runtime it should never be required to disable endpoint rediscovery.</td></tr><tr><td>Use Gateway Mode</td><td><code>False</code></td><td><code>false</code></td><td>Use gateway mode for the client operations</td></tr><tr><td>Use Dedicated Container</td><td><code>False</code></td><td><code>true</code></td><td>Flag to indicate when configured with throughput control, whether dedicated throughput control container will be provided.</td></tr><tr><td>Throughput control group name</td><td><code>False</code></td><td><code>None</code></td><td>Throughput control group name</td></tr><tr><td>Throughput control group target throughput</td><td><code>False</code></td><td><code>None</code></td><td>Throughput control group target throughput in number of <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/request-units" target="_blank" rel="noopener noreferrer">request units</a></td></tr><tr><td>Throughput control group target throughput threshold</td><td><code>False</code></td><td><code>None</code></td><td>Throughput control group target throughput threshold in <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/request-units" target="_blank" rel="noopener noreferrer">request units</a></td></tr><tr><td>Database which will be used for throughput global control</td><td><code>False</code></td><td><code>None</code></td><td>Database which will be used for throughput global control</td></tr><tr><td>Container which will be used for throughput global control</td><td><code>False</code></td><td><code>None</code></td><td>Container which will be used for throughput global control</td></tr><tr><td>Renew Interval in milliseconds</td><td><code>False</code></td><td><code>5s</code></td><td>How often the client is going to update the throughput usage of itself</td></tr><tr><td>Expire Interval in milliseconds</td><td><code>False</code></td><td><code>11s</code></td><td>How quickly an offline client will be detected</td></tr></tbody></table>
<p>More information about Throughput control is available <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/throughput-control-spark" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="target-properties">Target Properties<a href="#target-properties" class="hash-link" aria-label="Direct link to Target Properties" title="Direct link to Target Properties">​</a></h2>
<p>These properties are specific to write operations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-configurations">Write Configurations<a href="#write-configurations" class="hash-link" aria-label="Direct link to Write Configurations" title="Direct link to Write Configurations">​</a></h3>
<table><thead><tr><th>Property</th><th>Required</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>Write Mode</td><td><code>True</code></td><td><code>append</code></td><td>Spark Write Mode. The possible values are <code>error</code>, <code>append</code>, <code>overwrite</code> and <code>ignore</code> . More information on Write Modes is available <a href="https://spark.apache.org/docs/latest/sql-data-sources-load-save-functions.html#save-modes" target="_blank" rel="noopener noreferrer">here</a>.</td></tr><tr><td>Date Format</td><td><code>False</code></td><td><code>yyyy-MM-dd</code></td><td>Format for Date columns. More information on the possible formats is given <a href="https://spark.apache.org/docs/latest/sql-ref-datetime-pattern.html" target="_blank" rel="noopener noreferrer">here</a>.</td></tr><tr><td>Timestamp Format</td><td><code>False</code></td><td><code>yyyy-MM-dd&#x27;T&#x27;HH:mm:ss.SSSXXX</code></td><td>Format for Timestamp columns. More information on the possible formats is given <a href="https://spark.apache.org/docs/latest/sql-ref-datetime-pattern.html" target="_blank" rel="noopener noreferrer">here</a>.</td></tr><tr><td>Write Strategy</td><td><code>True</code></td><td><code>ItemOverwrite</code></td><td>CosmosDB Item Write Strategy: <code>ItemOverwrite</code> (using upsert); <code>ItemOverwriteIfNotModified</code> (if etag property of the row is empty/null it will just do an insert and ignore if the document already exists - same as <code>ItemAppend</code>, if an etag value exists the connector will attempt to replace the document with etag pre-condition. If the document changed - identified by precondition failure - the update is skipped and the document is not updated with the content of the data frame row), <code>ItemAppend</code> (using create, ignore pre-existing items i.e., Conflicts), <code>ItemDelete</code> (delete all documents), <code>ItemDeleteIfNotModified</code> (delete all documents for which the etag hasn&#x27;t changed),<code>ItemPatch</code> (Partial update all documents based on the patch config).</td></tr><tr><td>Max Retry Attempts</td><td><code>False</code></td><td><code>10</code></td><td>CosmosDB Write Max Retry Attempts on retriable failures (e.g., connection error, write error, etc.)</td></tr><tr><td>Max Concurrency</td><td><code>False</code></td><td><code>None</code></td><td>CosmosDB Item Write Max concurrency. If not specified it will be determined based on the Spark executor VM Size.</td></tr><tr><td>Max No. of Pending Bulk Operations</td><td><code>False</code></td><td><code>None</code></td><td>CosmosDB Item Write bulk mode maximum pending operations. Defines a limit of bulk operations being processed concurrently. If not specified it will be determined based on the Spark executor VM Size. If the volume of data is large for the provisioned throughput on the destination container, this setting can be adjusted by following the estimation of <code>1000 x Cores</code>.</td></tr><tr><td>Enable Write Bulk</td><td><code>False</code></td><td><code>true</code></td><td>CosmosDB Item Write bulk enabled</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="patch-specific-configurations">Patch Specific Configurations<a href="#patch-specific-configurations" class="hash-link" aria-label="Direct link to Patch Specific Configurations" title="Direct link to Patch Specific Configurations">​</a></h3>
<p>These Configurations are valid only when <code>Write Strategy</code> is given as <code>ItemPatch</code></p>
<table><thead><tr><th>Property</th><th>Required</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>Default Patch Operation Type</td><td><code>True</code></td><td><code>Replace</code></td><td>Default CosmosDB patch operation type. Supported types include <code>none</code>, <code>add</code>, <code>set</code>, <code>replace</code>, <code>remove</code>, <code>increment</code>. Choose <code>none</code> for no-op, for others please reference <a href="https://learn.microsoft.com/en-gb/azure/cosmos-db/partial-document-update#supported-operations" target="_blank" rel="noopener noreferrer">here</a> for full context.</td></tr><tr><td>Patch Column Configs</td><td><code>False</code></td><td><code>None</code></td><td>CosmosDB patch column configs. It can contain multiple definitions that match the following patterns (separated by comma) =&gt; <code>col(column).op(operationType)</code> or <code>col(column).path(patchInCosmosdb).op(operationType)</code> - The difference of the second pattern is that it also allows you to define a different CosmosDB path.</td></tr><tr><td>Patch Filter</td><td><code>False</code></td><td><code>None</code></td><td>Used for Conditional patch</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/gems">gems</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/warehouse">warehouse</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/cosmos">cosmos</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure">azure</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Spark/gems/source-target/warehouse/bigquery"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">BigQuery</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Spark/gems/source-target/warehouse/db2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DB2</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#common-auth-properties" class="table-of-contents__link toc-highlight">Common Auth Properties</a></li><li><a href="#source-properties" class="table-of-contents__link toc-highlight">Source Properties</a><ul><li><a href="#important-source-properties" class="table-of-contents__link toc-highlight">Important Source Properties</a></li><li><a href="#other-source-properties" class="table-of-contents__link toc-highlight">Other Source Properties</a></li><li><a href="#schema-inference-related-configs" class="table-of-contents__link toc-highlight">Schema Inference Related Configs</a></li><li><a href="#throughput-control-configs" class="table-of-contents__link toc-highlight">Throughput Control Configs</a></li></ul></li><li><a href="#target-properties" class="table-of-contents__link toc-highlight">Target Properties</a><ul><li><a href="#write-configurations" class="table-of-contents__link toc-highlight">Write Configurations</a></li><li><a href="#patch-specific-configurations" class="table-of-contents__link toc-highlight">Patch Specific Configurations</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Prophecy</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.prophecy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.prophecy.io/blogs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/prophecy-io-support/shared_invite/zt-1dwuvkakg-JcavnQuoukyZ3q5jkSkKCg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:docs@prophecy.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation feedback<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://app.prophecy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Prophecy Inc All Rights Reserved <a href="https://legal.prophecy.io/privacy" target="_blank">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>