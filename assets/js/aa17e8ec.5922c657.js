"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[5206],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=r.createContext({}),l=function(e){var t=r.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(a),k=n,u=p["".concat(c,".").concat(k)]||p[k]||b[k]||o;return a?r.createElement(u,i(i({ref:t},d),{},{components:a})):r.createElement(u,i({ref:t},d))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=k;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:n,i[1]=s;for(var l=2;l<o;l++)i[l]=a[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}k.displayName="MDXCreateElement"},47482:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>b,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var r=a(87462),n=(a(67294),a(3905));const o={title:"Databricks SQL",id:"databricks",description:"Run Models on a Databricks Warehouse",sidebar_position:2,tags:["databricks","sql","connect","warehouse","fabric"]},i=void 0,s={unversionedId:"low-code-sql/fabrics/databricks",id:"low-code-sql/fabrics/databricks",title:"Databricks SQL",description:"Run Models on a Databricks Warehouse",source:"@site/docs/low-code-sql/fabrics/databricks.md",sourceDirName:"low-code-sql/fabrics",slug:"/low-code-sql/fabrics/databricks",permalink:"/low-code-sql/fabrics/databricks",draft:!1,tags:[{label:"databricks",permalink:"/tags/databricks"},{label:"sql",permalink:"/tags/sql"},{label:"connect",permalink:"/tags/connect"},{label:"warehouse",permalink:"/tags/warehouse"},{label:"fabric",permalink:"/tags/fabric"}],version:"current",sidebarPosition:2,frontMatter:{title:"Databricks SQL",id:"databricks",description:"Run Models on a Databricks Warehouse",sidebar_position:2,tags:["databricks","sql","connect","warehouse","fabric"]},sidebar:"defaultSidebar",previous:{title:"Snowflake SQL",permalink:"/low-code-sql/fabrics/snowflake"},next:{title:"Data Explorer",permalink:"/low-code-sql/data-explorer"}},c={},l=[{value:"Create a Fabric",id:"create-a-fabric",level:2},{value:"Basic Info",id:"basic-info",level:3},{value:"Provider",id:"provider",level:3},{value:"Connections",id:"connections",level:3},{value:"Secrets",id:"secrets",level:3}],d={toc:l},p="wrapper";function b(e){let{components:t,...o}=e;return(0,n.kt)(p,(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Databricks SQL Warehouse offers seamless integration into the Databricks ecosystem. Follow the steps below to create a Fabric in Prophecy so that you can execute data transformations on your Databricks Warehouse."),(0,n.kt)("h2",{id:"create-a-fabric"},"Create a Fabric"),(0,n.kt)("p",null,"Create an entity by clicking the ",(0,n.kt)("strong",{parentName:"p"},"plus")," icon. Click to ",(0,n.kt)("strong",{parentName:"p"},"Create a Fabric"),".\nThere are four steps to creating a Fabric:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/low-code-sql/fabrics/databricks#basic-info"},"Basic info")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/low-code-sql/fabrics/databricks#provider"},"Providers")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/low-code-sql/fabrics/databricks#connections"},"Connections")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/low-code-sql/fabrics/databricks#secrets"},"Secrets")," (coming soon)")),(0,n.kt)("h3",{id:"basic-info"},"Basic Info"),(0,n.kt)("p",null,"First we\u2019ll give our Fabric some ",(0,n.kt)("strong",{parentName:"p"},"Basic information")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"DBInfo",src:a(94849).Z,width:"2880",height:"1084"})),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Basic Info")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"1 - Title")," - Specify a title, like devDatabricks, for your Fabric. \u201cdev\u201d or \u201cprod\u201d are helpful descriptors for this environment setup. Also specify a description (optional).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"2 - Team")," - Select a team to own this Fabric. Click the dropdown to list the teams your user is a member. If you don\u2019t see the desired team, ask a Prophecy Administrator to add you to a team.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"3 - Continue")," to the Provider step.")))),(0,n.kt)("h3",{id:"provider"},"Provider"),(0,n.kt)("p",null,"Add the ",(0,n.kt)("strong",{parentName:"p"},"Provider")," details. The SQL provider is both the storage warehouse and the execution environment where your SQL code will run. Be sure to ",(0,n.kt)("strong",{parentName:"p"},"Start")," the Databricks Warehouse before trying to setup the Fabric."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"SFProvider",src:a(80175).Z,width:"2880",height:"1084"})),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Provider details")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"1 - Provider Type")," - Select SQL as the Provider type. (Alternatively, create a Spark type Fabric using instructions ",(0,n.kt)("a",{parentName:"td",href:"/low-code-spark/fabrics/"},"here")," or an Airflow type Fabric following these ",(0,n.kt)("a",{parentName:"td",href:"/low-code-jobs/airflow/setup/"},"instructions"),".)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"2 - Provider")," - Click the dropdown menu for the list of supported Provider types. Select Databricks.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"3 - JDBC URL")," - Copy the JDBC URL from the Databricks UI as shown. This is the URL that Prophecy will connect for SQL Warehouse data storage and execution.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"4 - Personal Databricks Access Token ")," - This is the token Prophecy will use to connect to Databricks. Each user will need to apply their own token. To generate a Databricks PAT follow ",(0,n.kt)("a",{parentName:"td",href:"https://docs.databricks.com/en/dev-tools/auth/pat.html#databricks-personal-access-tokens-for-workspace-users"},"these instructions"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"5 - Catalog")," - (Optional) Enter the Catalog name if you are using Unity Catalog")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"6 - Continue")," to the Connections step.")))),(0,n.kt)("h3",{id:"connections"},"Connections"),(0,n.kt)("p",null,"If your Warehouse includes hundreds or thousands of tables, consider setting up a ",(0,n.kt)("a",{parentName:"p",href:"/metadata/metadata-connections"},"Metadata Connection"),". Follow the steps detailed ",(0,n.kt)("a",{parentName:"p",href:"/metadata/metadata-connections#add-a-metadata-connection"},"here")," and enjoy a faster listing of Databricks SQL Warehouse tables in the Prophecy Project browser. Be sure to ",(0,n.kt)("strong",{parentName:"p"},"enable")," the connection to query the selected Warehouse at the interval defined in the Connection."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"DBConnection",src:a(29810).Z,width:"2880",height:"832"})),(0,n.kt)("h3",{id:"secrets"},"Secrets"),(0,n.kt)("p",null,"(",(0,n.kt)("a",{parentName:"p",href:"https://docs.prophecy.io/low-code-spark/secret-management/"},"Secrets")," are currently implemented for Spark fabrics and are coming soon for SQL Fabrics.)"),(0,n.kt)("p",null,"Now the Databricks SQL Fabric is complete! Once you\u2019ve created a Fabric, it will appear on the Metadata page. Team Admins can manage their Team\u2019s Fabrics by clicking into the Fabric from this Metadata page. Prophecy SQL Projects can connect to your new Databricks SQL Fabric, read tables, and execute models."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"FabricMetadata",src:a(9531).Z,width:"2880",height:"652"})))}b.isMDXComponent=!0},94849:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/DatabricksFabric1-b1735420cdac950d06a5646b246d5792.png"},80175:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/DatabricksFabric2-693ac4981dd8c1e1300707ed71804377.png"},29810:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/DatabricksFabric3-5c574ecdb620577592fae7f17e7b5197.png"},9531:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/FabricMetadata-5fc2660e7f91eee87b014b8b4d8a116c.png"}}]);