---
title: Configure Audit Logging
id: auditLogging
description: Prophecy Audit logs available to be exported in S3
sidebar_position: 6
tags:
  - Audit Logs
---

Prophecy provides access to audit logs of activities performed by Prophecy users, allowing your enterprise to monitor detailed usage patterns.

For a list of each of these types of events and the associated parameters, see Audit events.

## Configure S3 bucket for logs

## Audit events

This table lists events for each Entity Type/Action along with the Request and Response parameters grouped by the entity and the action taken by the User

| Entity   | Action                                 | Description                                         | Request Parameters                                                             | Response Parameters                                                                                                                                                                                                              |
| -------- | -------------------------------------- | --------------------------------------------------- | ------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Fabric   | Get Fabric Details                     |                                                     | ["id"]                                                                         | ["_id", "name", "teamName", "Fabric type", "Details based on Fabric type like Airflow Info/ jobs sizes for Spark, etc"]                                                                                                          |
|          | Add Fabric                             |                                                     | ["name", "ownerUid"]                                                           | ["id"]                                                                                                                                                                                                                           |
|          | Update owned by                        |                                                     | ["id","targetUid"]                                                             | -                                                                                                                                                                                                                                |
| Project  | Add project                            |                                                     | ["name","forkMode","language", "ownerUid", "mainBranchModificationAllowed"]    | ["id","name"]                                                                                                                                                                                                                    |
|          | Get Details                            |                                                     | ["projectId"]                                                                  | ["id","name","language", "latestReleaseVersion","gitContext","projectDependencies","pipelines", "Jobs", "Subgraphs", "Datasets"]                                                                                                 |
|          | Update Project                         |                                                     | -                                                                              | -                                                                                                                                                                                                                                |
|          | Project List Query                     | List all projects for User                          | ["uid"]                                                                        | ["teamId, "teamName", "ProjectId", "ProjectName", "language"]                                                                                                                                                                    |
|          | Team Project Available                 | Available Projects for that Team                    | ["uid", "language"]                                                            | ["id", "name", "description", "latestReleaseVersion"]                                                                                                                                                                            |
|          | Add Project Dependency                 | Add a dependency Project to Current                 | ["projectId", "DependencyProjectUid"]                                          | ["_id", "name"]                                                                                                                                                                                                                  |
|          | Update Project Dependency              | Update dependency Project to a new released version | ["projectId", "DependencyProjectUid", "ReleaseTag"]                            | ["_id", "name"]                                                                                                                                                                                                                  |
|          | Remove Project Dependency              | Removed an added dependency                         | ["projectId", "DependencyProjectUid"]                                          | ["_id", "name"]                                                                                                                                                                                                                  |
|          | Project Dependencies Query             | List all project Dependencies                       | ["projectId"]                                                                  | ["projectDependencyVersion", "id", "name", "description", "created", "latestReleaseVersion"]                                                                                                                                     |
|          | Project Release Status                 | Gives Status of last Release for given project      | ["projectID", "statuses"]                                                      | ["status"]                                                                                                                                                                                                                       |
|          | Project Sync From Git                  | Status of Git sync of project                       | ["uid"]                                                                        | ["id","language","syncMode","externalSyncStatus","savedGitCredsStatus" ]                                                                                                                                                         |
|          | Release Project                        |                                                     | ["branch", "message","version","projectID", "CommitHash"]                      |                                                                                                                                                                                                                                  |
|          | Git Footer                             | Details for Git for commit/branchNAme etc           | ["projectID"]                                                                  | ["id","name", "mainBranch", "forkMade", "workingGitContext"]                                                                                                                                                                     |
|          | Add Subscriber To Project              |                                                     | ["uid", "teamId"]                                                              |                                                                                                                                                                                                                                  |
|          | Project Branches                       | List of available branches for this project         | ["projectId"]                                                                  | ["mainBranch", "workingBranchName", "workingBranchType", availableBranch]                                                                                                                                                        |
|          | Clone Project                          | Created clone of current project                    | ["uid", "name", "teamUid", "copyMainBranchReleaseTags"]                        | ["_id", "name"]                                                                                                                                                                                                                  |
| Pipeline | Add Pipeline                           | Add a new Pipeline                                  | ["name", "branch", "ownerId", "doCheckout"]                                    | ["_id", "name"]                                                                                                                                                                                                                  |
|          | Pipeline Table Query for given project | Lists all pipelines for project                     | ["projectId", "sortOrder", "sortColumn"]                                       | ["_id", "name", "mode", "createdAt", "createdBy", "modified" ]                                                                                                                                                                   |
|          | Pipeline Table query for User          | Lists all pipelines for User                        | ["uid", "sortOrder", "sortColumn"]                                             | ["_id", "name", "projectID", "projectName", "mode", "createdAt", "createdBy", "modified" ]                                                                                                                                       |
|          | Git Details of Pipeline                | Get Git details of Pipeline                         | ["Uid"]                                                                        | ["workingBranchName", "type", "uncommittedFiles", "uncommittedFilesCount" ]                                                                                                                                                      |
|          | Pipeline Details Query                 | Get Details of Pipeline                             | ["Uid"]                                                                        | ["name", "id", "path", "projectID", "projectName", "workingBranchName", "mainBranch"]                                                                                                                                            |
|          | Clone Pipeline                         | Cloned a Pipeline                                   | ["branch", "sourcePipelineId", "targetPipelineName", "ownerUid", "doCheckout"] | ["_id", "name"]                                                                                                                                                                                                                  |
| Team     | Add Team                               | Added a new Team                                    | ["name", "adminUid"]                                                           | ["_id", "name", "__typeName"]                                                                                                                                                                                                    |
|          | Get User Team                          | Get Teams for a User                                | ["uid"]                                                                        | ["_id", "teamId", "teamName"]                                                                                                                                                                                                    |
|          | Add team Admin                         | Add a user as Admin                                 | ["teamUid", "userUid", "invitationAccepted"]                                   |                                                                                                                                                                                                                                  |
|          | Initial Gql Query Setting Team Page    | List All teams for Users with Members               | ["uid"]                                                                        | ["_id", "teamId", "teamName", "members.Id", "members.FirstName,"members.LastName", "members.Email", "members.InvitationAccepted","admins.Id", "admins.FirstName,"admins.LastName", "admins.Email", "admins.InvitationAccepted" ] |
|          | Add User to Team                       |                                                     |                                                                                |                                                                                                                                                                                                                                  |
|          | Remove User from team                  |                                                     |                                                                                |                                                                                                                                                                                                                                  |
| User     | Get User                               |                                                     | ["email"]                                                                      | ["_id","name","firstName","lastName","email","created","createdBy"]                                                                                                                                                              |
|          | Add User                               |                                                     |                                                                                |                                                                                                                                                                                                                                  |
|          | Table Query User                       |                                                     | ["uid"]                                                                        | ["_id","firstName","lastName","company","email"]                                                                                                                                                                                 |
| Git      | DeleteBranch                           |                                                     | ["projectId", "branchName"]                                                    |                                                                                                                                                                                                                                  |
|          |                                        |                                                     |                                                                                |                                                                                                                                                                                                                                  |

## Steps at customer environment

1. Create/reuse a new AWS IAM user who is responsible for prophecy libs. 
2. Share the ARN of the AWS user to grant permissions to our newly created S3 bucket. It should be of the format `arn:aws:iam::{{Customer-Account-ID}:user/{Customer-User}` with the actual customer details. Eg: `arn:aws:iam::022726153140:user/prashanth`
3. Download the AWS CLI on customer machine and set it up on their machine. 
4. Create/reuse AWS access keys using the above user and configure the AWS CLI to use it. 
5. Use the below command to get the latest events bucket locally. You may use similar mechanism to access it from your applications.
```
cd {desired-directory}
aws s3 sync s3://customer-backend-events-xyz .
```
