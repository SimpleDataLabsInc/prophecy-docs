"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[6689],{3905:(e,t,i)=>{i.d(t,{Zo:()=>p,kt:()=>h});var n=i(67294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var c=n.createContext({}),s=function(e){var t=n.useContext(c),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},p=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(i),m=a,h=u["".concat(c,".").concat(m)]||u[m]||d[m]||r;return i?n.createElement(h,o(o({ref:t},p),{},{components:i})):n.createElement(h,o({ref:t},p))}));function h(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=i.length,o=new Array(r);o[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<r;s++)o[s]=i[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,i)}m.displayName="MDXCreateElement"},1217:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(67294),a=i(44996);const r=e=>{let{children:t}=e;return n.createElement("div",{style:{position:"relative",display:"flex","justify-content":"center","align-items":"center"}},t)},o=e=>{let{source:t,children:i}=e;return n.createElement("img",{src:(0,a.Z)(t),style:{"object-fit":"cover"}})},l=e=>{let{slides:t}=e;const[i,a]=(0,n.useState)(0);return n.createElement(r,null,n.createElement("i",{class:"fa fa-chevron-left",onClick:()=>{a(0===i?t.length-1:i-1)},style:{position:"absolute",top:"50%",left:"0px","font-size":"2rem"}}),n.createElement("i",{class:"fa fa-chevron-right",onClick:()=>{a(i===t.length-1?0:i+1)},style:{position:"absolute",top:"50%",right:"0px","font-size":"2rem"}}),n.createElement("div",{style:{padding:"30px"}},n.createElement(o,{source:t[i].image}),t[i].description))};function c(e){let{ImageData:t}=e;return n.createElement(l,{slides:t,style:{"font-family":" sans-serif","text-align":"center"}})}},63418:(e,t,i)=>{i.r(t),i.d(t,{ImageData:()=>u,assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>p});var n=i(87462),a=(i(67294),i(3905)),r=i(1217);const o={title:"Interactive Execution",id:"interactive-execution",description:"Interactive Execution",sidebar_position:1,tags:["spark","interactive","development"]},l=void 0,c={unversionedId:"low-code-spark/execution/interactive-execution",id:"low-code-spark/execution/interactive-execution",title:"Interactive Execution",description:"Interactive Execution",source:"@site/docs/low-code-spark/execution/interactive-execution.md",sourceDirName:"low-code-spark/execution",slug:"/low-code-spark/execution/interactive-execution",permalink:"/low-code-spark/execution/interactive-execution",draft:!1,tags:[{label:"spark",permalink:"/tags/spark"},{label:"interactive",permalink:"/tags/interactive"},{label:"development",permalink:"/tags/development"}],version:"current",sidebarPosition:1,frontMatter:{title:"Interactive Execution",id:"interactive-execution",description:"Interactive Execution",sidebar_position:1,tags:["spark","interactive","development"]},sidebar:"defaultSidebar",previous:{title:"Execution",permalink:"/low-code-spark/execution/"},next:{title:"Execution Metrics",permalink:"/low-code-spark/execution/execution-metrics"}},s={},p=[{value:"Running a Pipeline",id:"running-a-pipeline",level:2},{value:"Interims",id:"interims",level:2},{value:"Execution",id:"execution",level:2},{value:"Execution Code",id:"execution-code",level:3},{value:"Execution Errors",id:"execution-errors",level:3},{value:"Runtime Logs",id:"runtime-logs",level:3},{value:"Runtime Metrics",id:"runtime-metrics",level:3},{value:"Execution Metrics",id:"execution-metrics",level:3},{value:"Shell",id:"shell",level:2},{value:"Examples",id:"examples",level:3},{value:"Python",id:"python",level:4},{value:"Scala",id:"scala",level:4}],u=[{image:"/img/interactive-execution/interactive-execution-interims-config.png",description:(0,a.kt)("h3",{style:{padding:"10px"}},"Data Sampling Configuration")},{image:"/img/interactive-execution/interactive-execution-interim-all.png",description:(0,a.kt)("h3",{style:{padding:"10px"}},"Data Sampling Mode - All")},{image:"/img/interactive-execution/interactive-execution-interim-source.png",description:(0,a.kt)("h3",{style:{padding:"10px"}},"Data Sampling Mode - Source")},{image:"/img/interactive-execution/interactive-execution-interim-target.png",description:(0,a.kt)("h3",{style:{padding:"10px"}},"Data Sampling Mode - Target")},{image:"/img/interactive-execution/interactive-execution-interim-io.png",description:(0,a.kt)("h3",{style:{padding:"10px"}},"Data Sampling Mode - IO")},{image:"/img/interactive-execution/interactive-execution-sample-interim.png",description:(0,a.kt)("h3",{style:{padding:"10px"}},"Interim example")}],d={toc:p,ImageData:u},m="wrapper";function h(e){let{components:t,...o}=e;return(0,a.kt)(m,(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"running-a-pipeline"},"Running a Pipeline"),(0,a.kt)("p",null,"There are 2 ways to run a Pipeline interactively:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Interactive run options",src:i(96125).Z,width:"3450",height:"1848"})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Using the play button from the bottom right side. This would execute the entire Pipeline."),(0,a.kt)("li",{parentName:"ol"},"Using the play button on a particular Gem. This would only execute the flow in the Pipeline up to and including that Gem. This comes\nin handy during development, so that we don't have to run the entire Pipeline to debug/change a particular Gem.")),(0,a.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,a.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,a.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/185360973-928612ae-7655-4e67-8f95-ae9b63829231.mp4",title:"Monitoring",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,a.kt)("h2",{id:"interims"},"Interims"),(0,a.kt)("p",null,"During development, often the user will want to see their data to make more sense of it and to check whether the expected output is getting\ngenerated or not after the transformation. Prophecy generates these data samples as ",(0,a.kt)("inlineCode",{parentName:"p"},"Interims"),", which are temporarily cached previews of data after each Gem.\nWhich Gems automatically get Interims created is controlled by the Pipeline settings as shown below."),(0,a.kt)("p",null,"By default, for interactive runs, data sampling is enabled for all components. This behaviour can be configured as needed from the\n",(0,a.kt)("inlineCode",{parentName:"p"},"options")," menu as shown in image below:"),(0,a.kt)(r.Z,{ImageData:u,mdxType:"App"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"(1) - Option to enable/disable data sampling during interactive runs."),(0,a.kt)("li",{parentName:"ul"},"(2) - Option to choose the level of data sampling for interactive runs."),(0,a.kt)("li",{parentName:"ul"},"(3) - Option to enable/disable data sampling for Job runs (scheduled/interactive). Level of data sampling can be configured same as (2). If enabled the interims would be stored in ",(0,a.kt)("a",{parentName:"li",href:"#execution-metrics"},"execution metrics")," for scheduled runs as well.")),(0,a.kt)("h2",{id:"execution"},"Execution"),(0,a.kt)("p",null,"Once we run a Pipeline, we have several options to better understand our Pipeline:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#execution-code"},"Execution code")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#execution-errors"},"Execution Errors")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#runtime-logs"},"Runtime Logs")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#runtime-metrics"},"Runtime Metrics")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#execution-metrics"},"Execution Metrics"))),(0,a.kt)("h3",{id:"execution-code"},"Execution Code"),(0,a.kt)("p",null,"Once we run a Pipeline interactively Prophecy generates the execution code in the backend, which is then executed in\nthe selected Fabric."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Execution code",src:i(77525).Z,width:"3328",height:"1208"})),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Execution code can also be copy-pasted inside ",(0,a.kt)("inlineCode",{parentName:"p"},"databricks notebook")," or ",(0,a.kt)("a",{parentName:"p",href:"#shell"},"shell")," and can directly\nbe executed for debugging.")),(0,a.kt)("h3",{id:"execution-errors"},"Execution Errors"),(0,a.kt)("p",null,"If there are any errors in the Pipeline, a pop-up window will open for ",(0,a.kt)("inlineCode",{parentName:"p"},"execution errors"),".\n",(0,a.kt)("img",{alt:"Interactive execution error",src:i(74997).Z,width:"3298",height:"1598"})),(0,a.kt)("p",null,"Also the error can be seen in the runtime logs:\n",(0,a.kt)("img",{alt:"Interactive execution error logs",src:i(55294).Z,width:"3324",height:"1230"})),(0,a.kt)("h3",{id:"runtime-logs"},"Runtime Logs"),(0,a.kt)("p",null,"Overall progress with associated timestamps can be monitored from the Runtime Logs as shown here:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Runtime Logs",src:i(1549).Z,width:"3312",height:"1206"})),(0,a.kt)("h3",{id:"runtime-metrics"},"Runtime Metrics"),(0,a.kt)("p",null,"Various Spark metrics collected during runtime can be monitored as shown here:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Runtime Metrics",src:i(78043).Z,width:"3326",height:"1198"})),(0,a.kt)("h3",{id:"execution-metrics"},"Execution Metrics"),(0,a.kt)("p",null,"For ",(0,a.kt)("inlineCode",{parentName:"p"},"interactive runs")," execution metrics are collected to make the development easier and performance tuning more intuitive. These can be\naccessed from the ",(0,a.kt)("inlineCode",{parentName:"p"},"Metadata Page")," inside the ",(0,a.kt)("inlineCode",{parentName:"p"},"run tab")," of the ",(0,a.kt)("inlineCode",{parentName:"p"},"Pipeline"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Execution Metrics",src:i(50821).Z,width:"3302",height:"824"})),(0,a.kt)("h2",{id:"shell"},"Shell"),(0,a.kt)("p",null,"Prophecy IDE comes with an inbuilt interactive Spark shell that supports both ",(0,a.kt)("inlineCode",{parentName:"p"},"Python")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Scala"),". The shell is an easy way to quickly analyze data or test Spark commands\n",(0,a.kt)("img",{alt:"Interactive execution",src:i(48991).Z,width:"3456",height:"504"})),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"Spark context")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"session")," are available within the shell as variables ",(0,a.kt)("inlineCode",{parentName:"p"},"sc")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"spark")," respectively")),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"examples"},"Examples"),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"You need to be connected to a cluster to access the interactive shell")),(0,a.kt)("h4",{id:"python"},"Python"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Python interactive execution",src:i(96874).Z,width:"3456",height:"1938"})),(0,a.kt)("h4",{id:"scala"},"Scala"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Scala interactive execution",src:i(50742).Z,width:"3456",height:"1938"})))}h.isMDXComponent=!0},48991:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/int_exc_1-2e523394c4897568cd99b0f6e9e56f3f.png"},96874:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/int_exc_py-e8b3d69d77f69415240565e4ca616ff1.png"},50742:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/int_exc_scala-75d0419fc92ac9aeb536d0967e7e0765.png"},77525:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/interactive-execution-code-0f6ee9619f0b5bcea176668cedbfd487.png"},55294:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/interactive-execution-error-logs-2bb22db972820d0a41d4c7006576d9fb.png"},74997:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/interactive-execution-error-9df26e6ed47a58adba2c9fd03aa0957b.png"},50821:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/interactive-execution-execution-metrics-3835ca06e0405228b3f773f197890162.png"},96125:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/interactive-execution-play-options-4845ed9025f1d78c2e9c243b96148800.png"},1549:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/interactive-execution-runtime-logs-7fbf3c747b179885b4ea8d305f989bca.png"},78043:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/interactive-execution-runtime-metrics-c12c60b32964ca2bd349627e3584b3a5.png"}}]);