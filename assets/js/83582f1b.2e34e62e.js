"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[24574],{15680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>y});var r=a(96540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=r.createContext({}),l=function(e){var t=r.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(a),h=n,y=u["".concat(c,".").concat(h)]||u[h]||d[h]||i;return a?r.createElement(y,o(o({ref:t},p),{},{components:a})):r.createElement(y,o({ref:t},p))}));function y(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:n,o[1]=s;for(var l=2;l<i;l++)o[l]=a[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},3514:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(96540),n=a(20053),i=a(84142),o=a(75489),s=a(16654),c=a(21312);const l={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};function p(e){let{href:t,children:a}=e;return r.createElement(o.A,{href:t,className:(0,n.A)("card padding--lg",l.cardContainer)},a)}function u(e){let{href:t,icon:a,title:i,description:o}=e;return r.createElement(p,{href:t},r.createElement("h2",{className:(0,n.A)("text--truncate",l.cardTitle),title:i},a," ",i),o&&r.createElement("p",{className:(0,n.A)("text--truncate",l.cardDescription),title:o},o))}function d(e){let{item:t}=e;const a=(0,i._o)(t);return a?r.createElement(u,{href:a,icon:"\ud83d\uddc3\ufe0f",title:t.label,description:t.description??(0,c.T)({message:"{count} items",id:"theme.docs.DocCard.categoryDescription",description:"The default description for a category card in the generated index about how many items this category includes"},{count:t.items.length})}):null}function h(e){let{item:t}=e;const a=(0,s.A)(t.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",n=(0,i.cC)(t.docId??void 0);return r.createElement(u,{href:t.href,icon:a,title:t.label,description:t.description??n?.description})}function y(e){let{item:t}=e;switch(t.type){case"link":return r.createElement(h,{item:t});case"category":return r.createElement(d,{item:t});default:throw new Error(`unknown item type ${JSON.stringify(t)}`)}}function g(e){let{className:t}=e;const a=(0,i.$S)();return r.createElement(m,{items:a.items,className:t})}function m(e){const{items:t,className:a}=e;if(!t)return r.createElement(g,e);const o=(0,i.d1)(t);return r.createElement("section",{className:(0,n.A)("row",a)},o.map(((e,t)=>r.createElement("article",{key:t,className:"col col--6 margin-bottom--lg"},r.createElement(y,{item:e})))))}},54213:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>y,frontMatter:()=>s,metadata:()=>l,toc:()=>u});var r=a(58168),n=(a(96540),a(15680)),i=a(3514),o=a(84142);const s={title:"Architecture",id:"architecture",description:"Describing the architecture of Prophecy and how it can integrate into your use cases",tags:[]},c=void 0,l={unversionedId:"architecture/architecture",id:"architecture/architecture",title:"Architecture",description:"Describing the architecture of Prophecy and how it can integrate into your use cases",source:"@site/docs/architecture/architecture.md",sourceDirName:"architecture",slug:"/architecture/",permalink:"/architecture/",draft:!1,tags:[],version:"current",frontMatter:{title:"Architecture",id:"architecture",description:"Describing the architecture of Prophecy and how it can integrate into your use cases",tags:[]},sidebar:"defaultSidebar",previous:{title:"Settings",permalink:"/settings/"},next:{title:"Prophecy deployment",permalink:"/architecture/deployment/"}},p={},u=[{value:"High-Level Architecture",id:"high-level-architecture",level:2},{value:"Prophecy IDE",id:"prophecy-ide",level:3},{value:"SQL",id:"sql",level:3},{value:"Snowflake",id:"snowflake",level:4},{value:"Spark",id:"spark",level:3},{value:"Databricks",id:"databricks",level:4},{value:"Git",id:"git",level:3},{value:"Security and Privacy Practices",id:"security-and-privacy-practices",level:2},{value:"What&#39;s next",id:"whats-next",level:2}],d={toc:u},h="wrapper";function y(e){let{components:t,...s}=e;return(0,n.yg)(h,(0,r.A)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("p",null,"Prophecy deployment is simple and flexible. Prophecy is written as a set of Microservices that run on Kubernetes and is\nbuilt to be multi-tenant."),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},"Deployment Model"),(0,n.yg)("th",{parentName:"tr",align:null},"Customers Who Prefer it"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"./deployment#public-saas"},"Prophecy Managed SaaS")),(0,n.yg)("td",{parentName:"tr",align:null},"Midsize Companies and Startups")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"./deployment#private-saas-customer-vpc"},"Private SaaS (Customer VPC)")),(0,n.yg)("td",{parentName:"tr",align:null},"Enterprises in the Cloud")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"./deployment#on-premise-deployment"},"On-Premise")),(0,n.yg)("td",{parentName:"tr",align:null},"Large Enterprises in the middle of cloud migration (rare cases)")))),(0,n.yg)("h2",{id:"high-level-architecture"},"High-Level Architecture"),(0,n.yg)("p",null,"There are four components of a successful Prophecy deployment:"),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},"Component"),(0,n.yg)("th",{parentName:"tr",align:null},"Description"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"Prophecy IDE")),(0,n.yg)("td",{parentName:"tr",align:null},"The development environment, including Prophecy microservices and cloud infrastructure, that is deployed.")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"Data engine")),(0,n.yg)("td",{parentName:"tr",align:null},"The ",(0,n.yg)("a",{parentName:"td",href:"#sql"},"SQL")," or ",(0,n.yg)("a",{parentName:"td",href:"#spark"},"Spark")," execution environment, like Snowflake or Databricks. This is set up by a customer and connected to Prophecy through a secure and performant interface. No customer data is stored on Prophecy\u2019s environment.")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"Source control")),(0,n.yg)("td",{parentName:"tr",align:null},"Prophecy works similar to code-first IDEs by natively integrating with ",(0,n.yg)("a",{parentName:"td",href:"#git"},"Git")," and platforms like Bitbucket. An encrypted copy of customer\u2019s code is stored within Prophecy\u2019s environment for fast access, while the source-of-truth code is stored on Git.")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("strong",{parentName:"td"},"Identity management (optional)")),(0,n.yg)("td",{parentName:"tr",align:null},"For simple user authentication and permission control, Prophecy can connect your identity provider of choice.")))),(0,n.yg)("h3",{id:"prophecy-ide"},"Prophecy IDE"),(0,n.yg)("p",null,"A user who logs into Prophecy has access to the integrated development environment (IDE). This includes everything needed to enable all data users to transform raw data into reliable, analytics-ready data using visual data pipelines."),(0,n.yg)("p",null,(0,n.yg)("img",{alt:"Prophecy IDE",src:a(88227).A,width:"3781",height:"1538"})),(0,n.yg)("p",null,"Teams are the primary mechanism of ownership. Teams own Projects where Pipelines, Datasets, and Jobs live. Teams also own execution fabrics that provide the execution and storage resources for execution including on SQL Warehouses and Spark clusters."),(0,n.yg)("h3",{id:"sql"},"SQL"),(0,n.yg)("p",null,"To allow for SQL query execution Prophecy can connect to Snowflake and Databricks warehouses. Connectors for additional SQL warehouses will be announced as they are added."),(0,n.yg)("h4",{id:"snowflake"},"Snowflake"),(0,n.yg)("p",null,"To connect with data stored in a SQL Warehouse, or to allow for interactive SQL execution, Prophecy can connect to an existing Snowflake execution environment through secure and performant ",(0,n.yg)("a",{parentName:"p",href:"https://docs.snowflake.com/en/developer-guide/snowpark/index"},"Snowpark")," or ",(0,n.yg)("a",{parentName:"p",href:"https://docs.snowflake.com/en/developer-guide/sql-api/reference"},"Snowflake")," APIs."),(0,n.yg)("p",null,"Each ",(0,n.yg)("a",{parentName:"p",href:"../../concepts/fabrics"},"Fabric")," defined in Prophecy connects to a single Snowflake Warehouse and each user is required to provide credentials to authenticate to it."),(0,n.yg)("p",null,(0,n.yg)("img",{alt:"Arch_Diagram",src:a(67895).A,width:"3840",height:"2160"})),(0,n.yg)("p",null,"Notice the data provider (e.g. Snowflake) matches up to a Fabric. For another scenario, consider the same architecture diagram where the Fabric connects to a Databricks SQL warehouse instead of Snowflake."),(0,n.yg)("h3",{id:"spark"},"Spark"),(0,n.yg)("p",null,"To allow for interactive code execution Prophecy can connect to either ",(0,n.yg)("a",{parentName:"p",href:"#databricks"},"Databricks")," or any other Spark through ",(0,n.yg)("a",{parentName:"p",href:"https://livy.apache.org/"},"Apache Livy")," (e.g. MapR, CDP, HDP, Spark on Kubernetes)."),(0,n.yg)("h4",{id:"databricks"},"Databricks"),(0,n.yg)("p",null,(0,n.yg)("img",{alt:"Prophecy to Databricks Connectivity",src:a(34813).A,width:"3840",height:"2160"})),(0,n.yg)("p",null,"Prophecy connects to Databricks using ",(0,n.yg)("a",{parentName:"p",href:"https://docs.databricks.com/dev-tools/api/latest/index.html"},"Rest API"),". Each ",(0,n.yg)("a",{parentName:"p",href:"../../concepts/fabrics"},"Fabric")," defined in Prophecy connects to a single ",(0,n.yg)("a",{parentName:"p",href:"https://docs.databricks.com/workspace/index.html"},"Databricks workspace")," and each user is required to provide a ",(0,n.yg)("a",{parentName:"p",href:"https://docs.databricks.com/dev-tools/api/latest/authentication.html"},"personal access token")," to authenticate to it."),(0,n.yg)("p",null,"Security-conscious enterprises that use Databricks with limited network access have to additionally add the ",(0,n.yg)("strong",{parentName:"p"},"Prophecy Data Plane IP address")," (",(0,n.yg)("inlineCode",{parentName:"p"},"3.133.35.237"),") to the Databricks allowed ",(0,n.yg)("a",{parentName:"p",href:"https://docs.databricks.com/security/network/ip-access-list.html#add-an-ip-access-list"},"access list"),"."),(0,n.yg)("p",null,"Primarily Prophecy uses Databricks for the following functionalities:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Interactive Execution")," - Prophecy allows its users to spin up new clusters or connect to existing clusters. When a cluster connection exists, Prophecy allows the user to run their code in the interactive mode. Interactive code queries are sent to Databricks using the ",(0,n.yg)("a",{parentName:"li",href:"https://docs.databricks.com/dev-tools/api/1.2/index.html"},"Databricks Command API 1.2"),"."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Scheduling")," - Prophecy allows the user to build and orchestrate Databricks Jobs. This works through the ",(0,n.yg)("a",{parentName:"li",href:"https://docs.databricks.com/dev-tools/api/latest/jobs.html"},"Databricks Jobs API 2.1"),".")),(0,n.yg)("p",null,"By default, Prophecy does not store any data samples when executing code using Databricks. Data samples can be optionally stored for observability purposes (execution metrics)."),(0,n.yg)("admonition",{type:"note"},(0,n.yg)("p",{parentName:"admonition"},"When using ",(0,n.yg)("strong",{parentName:"p"},"Active Directory"),", Prophecy takes care of auto-generation and refreshing of the Databricks personal access tokens. Read more about it ",(0,n.yg)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/databricks/dev-tools/api/latest/aad/"},"here"),".")),(0,n.yg)("h3",{id:"git"},"Git"),(0,n.yg)("p",null,"While all code generated by Prophecy is stored in a User\u2019s Git repository, we temporarily store some of the generated code used during Interactive development in an encrypted cache."),(0,n.yg)("p",null,"Supported Git providers:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Prophecy Managed")," - Prophecy automatically sets up the connectivity between itself and the repositories. Prophecy Managed is based on open-source ",(0,n.yg)("a",{parentName:"li",href:"https://github.com/go-gitea/gitea"},"GitTea"),"."),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"GitHub")," (including GitHub Enterprise) - authenticates using per-user personal access tokens. ",(0,n.yg)("a",{parentName:"li",href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token"},"How to generate PAT?")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Bitbucket")," (including Bitbucket self-hosted) - authenticates using per-user personal access tokens. ",(0,n.yg)("a",{parentName:"li",href:"https://confluence.atlassian.com/bitbucketserver072/personal-access-tokens-1005335924.html"},"How to generate PAT?")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"GitLab")," (including GitLab self-hosted) - authenticates using per-user personal access tokens. ",(0,n.yg)("a",{parentName:"li",href:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html"},"How to generate PAT?")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Azure DevOps")," - authenticates using per-user personal access tokens. ",(0,n.yg)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=azure-devops&tabs=Windows"},"How to generate PAT?"))),(0,n.yg)("p",null,"Security-conscious enterprises that use Git Providers within private networks behind firewalls have to add the Prophecy Control Plane IP address (",(0,n.yg)("inlineCode",{parentName:"p"},"3.133.35.237"),") to the private network allow-list or to the Git provider ",(0,n.yg)("a",{parentName:"p",href:"https://github.blog/2019-12-12-ip-allow-lists-now-in-public-beta/"},"allow-list"),"."),(0,n.yg)("h2",{id:"security-and-privacy-practices"},"Security and Privacy Practices"),(0,n.yg)("p",null,"The Prophecy team employs top-notch industry practices to safeguard the security of their application and maintain the privacy of customer data. Below are just a few components of our comprehensive security strategy and system structure:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"General")," - An annual penetration test is performed to validate Prophecy\u2019s posture and identify vulnerabilities. Our latest penetration test report was issued in November 2022. Prophecy maintains SOC-2 compliance as audited by PrescientAssurance.")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Public SaaS")," - Prophecy IDE is hosted on secure servers on AWS. All storage systems are encrypted, and all servers are tightly access controlled and audited. Data is encrypted in transit at all times.")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Private SaaS")," - Alternatively, Prophecy\u2019s IDE can be installed within an Enterprise network as desired. Prophecy\u2019s IDE accesses your environment through a single IP address dedicated to you, allowing you to protect access to your data resources at the network level. The credentials are stored per user, and only a fully authenticated user can access their environment.")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"On-Premise")," - Prophecy complies with your security requirements on-premise; ",(0,n.yg)("a",{parentName:"p",href:"https://www.prophecy.io/request-a-demo"},"reach out")," to start the discussion."))),(0,n.yg)("p",null,"Read more details on Prophecy\u2019s security and compliance posture at our Security Portal ",(0,n.yg)("a",{parentName:"p",href:"https://security.prophecy.io/"},"here.")),(0,n.yg)("h2",{id:"whats-next"},"What's next"),(0,n.yg)("p",null,"To learn more about Prophecy's architecture, see the following pages:"),(0,n.yg)(i.A,{items:(0,o.$S)().items,mdxType:"DocCardList"}))}y.isMDXComponent=!0},34813:(e,t,a)=>{a.d(t,{A:()=>r});const r=a.p+"assets/images/arch_databricks-f89e18abb116e995687ce447eba7c982.png"},88227:(e,t,a)=>{a.d(t,{A:()=>r});const r=a.p+"assets/images/arch_ide-42d5237f2aef43f19a15d8d2bf2366ee.png"},67895:(e,t,a)=>{a.d(t,{A:()=>r});const r=a.p+"assets/images/arch_snowflake-9a239c15dd53ff73475d620c5e3be545.png"}}]);