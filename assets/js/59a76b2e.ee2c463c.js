"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[81938],{28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>a});var s=i(96540);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}},69846:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"analysts/development/gems/transform/window","title":"WindowFunction","description":"Create moving aggregations and transformation","source":"@site/docs/analysts/development/gems/transform/window.md","sourceDirName":"analysts/development/gems/transform","slug":"/analysts/window","permalink":"/analysts/window","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"gems","permalink":"/tags/gems"},{"inline":true,"label":"analyst","permalink":"/tags/analyst"},{"inline":true,"label":"transform","permalink":"/tags/transform"}],"version":"current","frontMatter":{"title":"WindowFunction","id":"window","slug":"/analysts/window","description":"Create moving aggregations and transformation","tags":["gems","analyst","transform"]},"sidebar":"mySidebar","previous":{"title":"Transpose","permalink":"/analysts/transpose"},"next":{"title":"DataCleansing","permalink":"/analysts/data-cleansing"}}');var r=i(74848),t=i(28453),d=i(82824);const a={title:"WindowFunction",id:"window",slug:"/analysts/window",description:"Create moving aggregations and transformation",tags:["gems","analyst","transform"]},o=void 0,l={},c=[{value:"Parameters",id:"parameters",level:3},{value:"Examples",id:"examples",level:3},{value:"Ranking Functions with Window",id:"ranking-functions-with-window",level:4},{value:"Analytical Functions with Window",id:"analytical-functions-with-window",level:4},{value:"Aggregate Functions with Window",id:"aggregate-functions-with-window",level:4}];function h(e){const n={admonition:"admonition",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{execution_engine:"SQL Warehouse",sql_package_name:"",sql_package_version:""}),"\n",(0,r.jsxs)(n.p,{children:["The WindowFunction lets you define a ",(0,r.jsx)(n.strong,{children:"WindowSpec"})," and apply window functions on a model."]}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Required"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Model"}),(0,r.jsx)(n.td,{children:"Input Source"}),(0,r.jsx)(n.td,{children:"True"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Target column"}),(0,r.jsx)(n.td,{children:"Output Column name"}),(0,r.jsx)(n.td,{children:"True"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Source expression"}),(0,r.jsx)(n.td,{children:"Window function expression to perform over the created Window"}),(0,r.jsx)(n.td,{children:"True"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Order columns"}),(0,r.jsxs)(n.td,{children:["Columns to order by in Window. Must be a numeric type column if a ",(0,r.jsx)(n.code,{children:"Range Frame"})," is selected"]}),(0,r.jsxs)(n.td,{children:["Required when ",(0,r.jsx)(n.code,{children:"Source expression"})," has a Ranking/Analytical function ",(0,r.jsx)(n.strong,{children:"OR"})," when ",(0,r.jsx)(n.code,{children:"Range Frame"})," is selected"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Partition column"}),(0,r.jsx)(n.td,{children:"Column to partition by in Window"}),(0,r.jsx)(n.td,{children:"False"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Row frame"}),(0,r.jsx)(n.td,{children:"Row based frame boundary to apply on Window"}),(0,r.jsx)(n.td,{children:"False"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Range frame"}),(0,r.jsx)(n.td,{children:"Range based frame boundary to apply on Window"}),(0,r.jsx)(n.td,{children:"False"})]})]})]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"Order Columns"})," ",(0,r.jsx)(n.strong,{children:"are not"})," defined, this gem uses an unbounded window frame ",(0,r.jsx)(n.code,{children:"(rowFrame, unboundedPreceding, unboundedFollowing)"})," by default."]}),(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"Order Columns"})," ",(0,r.jsx)(n.strong,{children:"are"})," defined, this gem uses a growing window frame ",(0,r.jsx)(n.code,{children:"(rangeFrame, unboundedPreceding, currentRow)"})," by default."]})]}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h4,{id:"ranking-functions-with-window",children:"Ranking Functions with Window"}),"\n",(0,r.jsxs)(n.p,{children:["Examples of ranking functions are: ",(0,r.jsx)(n.code,{children:"row_number()"}),", ",(0,r.jsx)(n.code,{children:"rank()"}),", ",(0,r.jsx)(n.code,{children:"dense_rank()"})," and ",(0,r.jsx)(n.code,{children:"ntile()"})]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Only the default window frame ",(0,r.jsx)(n.code,{children:"(rowFrame, unboundedPreceding, currentRow)"})," can be used with Ranking functions"]})}),"\n",(0,r.jsx)(n.h4,{id:"analytical-functions-with-window",children:"Analytical Functions with Window"}),"\n",(0,r.jsxs)(n.p,{children:["Examples of analytical functions are: ",(0,r.jsx)(n.code,{children:"lead()"}),", ",(0,r.jsx)(n.code,{children:"lag()"}),", ",(0,r.jsx)(n.code,{children:"cume_dist()"}),", etc."]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A window frame for ",(0,r.jsx)(n.code,{children:"lead()"})," and ",(0,r.jsx)(n.code,{children:"lag()"})," can not be specified."]}),"\n",(0,r.jsxs)(n.li,{children:["Only the default window frame ",(0,r.jsx)(n.code,{children:"(rangeFrame, unboundedPreceding, currentRow)"})," can be used with ",(0,r.jsx)(n.code,{children:"cume_dist()"})]}),"\n"]})}),"\n",(0,r.jsx)(n.h4,{id:"aggregate-functions-with-window",children:"Aggregate Functions with Window"}),"\n",(0,r.jsxs)(n.p,{children:["Examples of analytical functions are: ",(0,r.jsx)(n.code,{children:"min()"}),", ",(0,r.jsx)(n.code,{children:"max()"}),", ",(0,r.jsx)(n.code,{children:"avg()"}),", etc."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},82824:(e,n,i)=>{i.d(n,{A:()=>r});i(96540);var s=i(74848);function r(e){return(0,s.jsxs)("div",{children:[e.execution_engine&&(0,s.jsx)("a",{href:"https://docs.prophecy.io/administration/fabrics/prophecy-fabrics/",children:(0,s.jsx)("span",{className:"badge",children:e.execution_engine})}),e.sql_package_name&&e.sql_package_version&&(0,s.jsx)("a",{href:"https://docs.prophecy.io/engineers/package-hub/",children:(0,s.jsxs)("span",{className:"badge-dependency",children:[(0,s.jsx)("span",{className:"left",children:e.sql_package_name}),(0,s.jsx)("span",{className:"right",children:e.sql_package_version})]})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})}}}]);