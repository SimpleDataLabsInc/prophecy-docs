---
id: 4-1-2
description: Release notes for version 4.1.2
title: Prophecy 4.1.2.x
tags:
  - release notes
  - changelog
---

July 22, 2025

## Prophecy for Analysts

### Features {#analyst-features}

The following features are available in this release.

- You can now use Google BigQuery as a SQL Warehouse connection in Prophecy fabrics. This means that you can run SQL transformations in pipelines in your BigQuery warehouse. Learn how to configure a [BigQuery connection](/administration/fabrics/prophecy-fabrics/connections/bigquery).

- You can now define and call [stored procedures](/analysts/stored-procedure) within SQL projects running on BigQuery. This is particularly useful when migrating workflows from other systems.

- Pipeline schedules can now be triggered by [file arrivals or changes](/analysts/triggers#file-arrival-or-change-trigger) in a specified SFTP or S3 location.

- Prophecy provides the following new SQL gems in this release.

  - [Pivot](/analysts/pivot): Reshape your data by transforming unique row values from one column into new columns.
  - [Unpivot](/analysts/unpivot): Convert multiple columns into row-level key-value pairs to simplify columnar data.
  - [Buffer](/analysts/buffer): Take any polygon or line and expand or contract its boundaries.
  - [FindNearest](/analysts/find-nearest): Find the closest spatial point(s) between two datasets based on geographic distance.
  - [Simplify](/analysts/simplify): Reduce the number of vertices in polygons and polylines while preserving overall shape.
  - [HeatMap](/analysts/heatmap): Transform latitude and longitude point data into a spatial heatmap using hexagonal tiling.
  - [PolyBuild](/analysts/polybuild): Build spatial shapes from coordinate data by grouping and ordering points into either polygons or polylines.
  - [SpatialMatch](/analysts/spatial-match): Compare geometries and return only the pairs that have the spatial relationship you specify.

### Enhancements {#analyst-enhancements}

The following enhancements are available in this release.

- We now support uploading [Parquet](/analysts/parquet) files to Databricks connections.

- You can now overwrite a Table gem using the [File Upload component](/analysts/business-application-components#file-upload) in a Prophecy App. Previously, you could only overwrite Source gems. (Added in 4.1.2.2).

## Prophecy for Engineers

### Features {#engineer-features}

The following feature is available in this release.

- PySpark project pipelines can now run on Databricks serverless compute. See supported features and limitations in [Databricks serverless compute for PySpark](/administration/fabrics/Spark-fabrics/databricks/databricks-serverless).

### Enhancements {#engineer-enhancements}

The following enhancements are available in this release.

- We have improved the release flow for protected branches. When a branch like `main` is protected, direct commits to it are not allowed. Our previous release process required a direct commit to `main`, which caused issues in these scenarios. We now provide an option on the Open Pull Request screen to bump the version of the source branch before merging into main. To learn more, visit [Pull requests](/engineers/git-pull-requests).

- You can now merge from the default branch (e.g., `main`) into another branch. Previously, the merge UI only allowed merging into the default branch. This enhancement is available in both the [Git workflow dialog](/engineers/git-workflow) within the project editor and the Commits tab on the [project metadata](/projects#metadata) page.

- The [Catalog Table](/engineers/delta-table/) Target gem includes the following enhancements. Update the `ProphecySparkBasicsPython` package to version 0.2.47 to access these updates.

  - Soft Delete for SCD Type 2 (SCD2) Merge: You can now enable soft delete behavior during SCD2 merges. When the source system deletes a record, the target table retains its history by updating the recordâ€™s end-time. This treats the deletion as a Type 2 change instead of removing the row.

  - Schema Evolution for Merge: When writing to a Delta table on Databricks using merge mode, the table can now automatically evolve its schema to accommodate changes in the incoming data (such as added or modified columns). This feature helps prevent merge failures due to schema mismatches. To enable it, turn on the "Schema evolution for merge" property in the Catalog Table Target gem. (Requires Databricks Runtime 15.4 or later.)

- The XLSX gem now runs on [Databricks UC clusters](/administration/fabrics/Spark-fabrics/databricks/ucshared) configured with standard (formerly shared) access mode.

  | Gem                      | Condition                                                                                                                          | Package                     | Minimum version |
  | ------------------------ | ---------------------------------------------------------------------------------------------------------------------------------- | --------------------------- | --------------- |
  | [XLSX](/engineers/xlsx/) | Read file with Pandas. The `openpyxl` library is needed for Pandas to work. Files can be read from and written to UC volumes only. | `ProphecySparkBasicsPython` | `0.2.47`        |

### Prophecy Library versions

The following are the newest available Prophecy Library versions in this release.

- ProphecyLibsPython 2.0.11

- ProphecyLibsScala 8.11.0

## Global Updates

- You can now enable auditing for file downloads from Prophecy. When this feature is turned on via an environment flag, audit logs will capture the file name, the user who downloaded it, and the page in Prophecy where the download occurred. Contact your administrator or support team to enable this feature.
