"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[39881],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>y});var r=n(96540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,y=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return n?r.createElement(y,o(o({ref:t},p),{},{components:n})):r.createElement(y,o({ref:t},p))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3514:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(96540),a=n(20053),i=n(84142),o=n(75489),s=n(16654),l=n(21312);const c={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};function p(e){let{href:t,children:n}=e;return r.createElement(o.A,{href:t,className:(0,a.A)("card padding--lg",c.cardContainer)},n)}function u(e){let{href:t,icon:n,title:i,description:o}=e;return r.createElement(p,{href:t},r.createElement("h2",{className:(0,a.A)("text--truncate",c.cardTitle),title:i},n," ",i),o&&r.createElement("p",{className:(0,a.A)("text--truncate",c.cardDescription),title:o},o))}function m(e){let{item:t}=e;const n=(0,i._o)(t);return n?r.createElement(u,{href:n,icon:"\ud83d\uddc3\ufe0f",title:t.label,description:t.description??(0,l.T)({message:"{count} items",id:"theme.docs.DocCard.categoryDescription",description:"The default description for a category card in the generated index about how many items this category includes"},{count:t.items.length})}):null}function d(e){let{item:t}=e;const n=(0,s.A)(t.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",a=(0,i.cC)(t.docId??void 0);return r.createElement(u,{href:t.href,icon:n,title:t.label,description:t.description??a?.description})}function y(e){let{item:t}=e;switch(t.type){case"link":return r.createElement(d,{item:t});case"category":return r.createElement(m,{item:t});default:throw new Error(`unknown item type ${JSON.stringify(t)}`)}}function f(e){let{className:t}=e;const n=(0,i.$S)();return r.createElement(g,{items:n.items,className:t})}function g(e){const{items:t,className:n}=e;if(!t)return r.createElement(f,e);const o=(0,i.d1)(t);return r.createElement("section",{className:(0,a.A)("row",n)},o.map(((e,t)=>r.createElement("article",{key:t,className:"col col--6 margin-bottom--lg"},r.createElement(y,{item:e})))))}},42691:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>y,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var r=n(58168),a=(n(96540),n(15680)),i=n(3514),o=n(84142);const s={title:"Self Hosted",id:"self-hosted",description:"Self Hosted",tags:["deployment","installation","self-hosted"]},l=void 0,c={unversionedId:"architecture/self-hosted/self-hosted",id:"architecture/self-hosted/self-hosted",title:"Self Hosted",description:"Self Hosted",source:"@site/docs/architecture/self-hosted/self-hosted.md",sourceDirName:"architecture/self-hosted",slug:"/architecture/self-hosted/",permalink:"/architecture/self-hosted/",draft:!1,tags:[{label:"deployment",permalink:"/tags/deployment"},{label:"installation",permalink:"/tags/installation"},{label:"self-hosted",permalink:"/tags/self-hosted"}],version:"current",frontMatter:{title:"Self Hosted",id:"self-hosted",description:"Self Hosted",tags:["deployment","installation","self-hosted"]},sidebar:"mySidebar",previous:{title:"Product Feature Matrix",permalink:"/architecture/feature-matrix"},next:{title:"Install Prophecy",permalink:"/architecture/self-hosted/install-prophecy/"}},p={},u=[{value:"Spark",id:"spark",level:2},{value:"Airflow",id:"airflow",level:2},{value:"Logging / Metrics",id:"logging--metrics",level:2},{value:"Prophecy services",id:"prophecy-services",level:2},{value:"Running Services API",id:"running-services-api",level:3}],m={toc:u},d="wrapper";function y(e){let{components:t,...n}=e;return(0,a.yg)(d,(0,r.A)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"Prophecy is written as a set of microservices that run on a Kubernetes cluster. Our recommended platforms to run Kubernetes are:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Amazon Web Services managed EKS"),(0,a.yg)("li",{parentName:"ul"},"Microsoft Azure managed AKS"),(0,a.yg)("li",{parentName:"ul"},"Google Cloud Platform managed GKE")),(0,a.yg)("p",null,"There are a couple of ways to install the self-managed version of Prophecy:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Installation via ",(0,a.yg)("a",{parentName:"li",href:"https://helm.sh/docs/intro/quickstart/"},"Helm")),(0,a.yg)("li",{parentName:"ul"},"Installation via Marketplaces")),(0,a.yg)("p",null,"Once Prophecy is installed, you'll have to manually perform upgrades, backups, restores, etc."),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"For personalized help, contact ",(0,a.yg)("a",{parentName:"p",href:"https://prophecy.zendesk.com/"},"support"),". If applicable, send along your ",(0,a.yg)("a",{parentName:"p",href:"/architecture/self-hosted/download-logs"},"logs")," to help us troubleshoot.")),(0,a.yg)("h2",{id:"spark"},"Spark"),(0,a.yg)("p",null,"After installation, Prophecy requires the following for interactive development:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Databricks API 1.2")," for Databricks-based Spark deployments, or"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Livy 0.7.x")," for any other Spark deployment support (like CDP, HDP, MapR, Spark on Kubernetes).")),(0,a.yg)("h2",{id:"airflow"},"Airflow"),(0,a.yg)("p",null,"For interactive and jobs deployment to Airflow, Prophecy requires a customer-managed ",(0,a.yg)("strong",{parentName:"p"},"Airflow deployment version 2.x.x")," (latest recommended). ",(0,a.yg)("strong",{parentName:"p"},"Astronomer"),"'s managed Airflow offering is supported."),(0,a.yg)("h2",{id:"logging--metrics"},"Logging / Metrics"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Prophecy comes with a built-in ",(0,a.yg)("strong",{parentName:"li"},"lightweight infrastructure for monitoring")," (based on Loki & Grafana)\nand ",(0,a.yg)("strong",{parentName:"li"},"logging")," (based on Prometheus, Grafana and alert-manager, etc.)."),(0,a.yg)("li",{parentName:"ul"},"You can optionally ",(0,a.yg)("strong",{parentName:"li"},"redirect the logs and metrics")," to your own logging services.")),(0,a.yg)("h2",{id:"prophecy-services"},"Prophecy services"),(0,a.yg)("p",null,"You can use the Running Services API to retrieve the status of your Prophecy services. 200 denotes that the service is running, while 404 denotes that the service is disabled. Any other error code denotes a service failure."),(0,a.yg)("h3",{id:"running-services-api"},"Running Services API"),(0,a.yg)("p",null,"Example:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"curl 'https://<prophecy-env-url>/athena/api/v1/prophecy/status'\n")),(0,a.yg)("details",null,(0,a.yg)("summary",null,"Response:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'{\n "anyServiceDown": false,\n "data": {\n  "services": [\n   {\n    "isPrimary": true,\n    "name": "App",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": true,\n    "name": "Metadata",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Pipeline/Jobs Editor",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Prophecy Managed Git",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Execution",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "CI / CD",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Lineage",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Search",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false,\n    "name": "Kafka",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false\n   },\n   {\n    "isPrimary": false,\n    "name": "Transpiler",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false,\n    "name": "Data Quality",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false,\n    "name": "Data Copilot",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false,\n    "name": "Sandboxing",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Database Connectivity",\n    "statusCode": 200\n   }\n  ]\n },\n "isProphecyDown": false,\n "success": true\n}\n'))),(0,a.yg)("p",null,"To learn more about installation methods and management, see the following pages:"),(0,a.yg)(i.A,{items:(0,o.$S)().items,mdxType:"DocCardList"}))}y.isMDXComponent=!0}}]);