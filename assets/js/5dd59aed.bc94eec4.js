"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[79992],{16143:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/configuration-789969a98c1d3af7642186e53cd43a5e.png"},28453:(e,r,t)=>{t.d(r,{R:()=>o,x:()=>l});var n=t(96540);const a={},s=n.createContext(a);function o(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(s.Provider,{value:r},e.children)}},51793:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>i,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"data-modeling/gems/target-models/sql-query","title":"SQL Query","description":"SQL Query of Target Models","source":"@site/docs/data-modeling/gems/target-models/sql-query.md","sourceDirName":"data-modeling/gems/target-models","slug":"/data-modeling/gems/target-models/sql-query","permalink":"/data-modeling/gems/target-models/sql-query","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"concept","permalink":"/tags/concept"},{"inline":true,"label":"model","permalink":"/tags/model"},{"inline":true,"label":"query","permalink":"/tags/query"},{"inline":true,"label":"SQL","permalink":"/tags/sql"}],"version":"current","frontMatter":{"title":"SQL Query","id":"sql-query","description":"SQL Query of Target Models","tags":["concept","model","query","SQL"]},"sidebar":"mySidebar","previous":{"title":"Schema","permalink":"/data-modeling/gems/target-models/schema"},"next":{"title":"Type and Format","permalink":"/data-modeling/gems/target-models/type-and-format"}}');var a=t(74848),s=t(28453);const o={title:"SQL Query",id:"sql-query",description:"SQL Query of Target Models",tags:["concept","model","query","SQL"]},l=void 0,i={},d=[{value:"Enable custom SQL query",id:"enable-custom-sql-query",level:2},{value:"Ports",id:"ports",level:3},{value:"SQL Query",id:"sql-query",level:3},{value:"Declare variables",id:"declare-variables",level:2}];function u(e){const r={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.p,{children:"You can use the SQL Query tab to view and enable your custom SQL query at the end of your Target model. A custom SQL query enables you to perform one last data transformation step as a SQL query, before creating the model."}),"\n",(0,a.jsx)(r.p,{children:"This is useful if you import your own codebase and your final query has additional conditions. Your query is saved here for you to view and edit. For low code users you can use a Filter gem to achieve the same results."}),"\n",(0,a.jsx)(r.h2,{id:"enable-custom-sql-query",children:"Enable custom SQL query"}),"\n",(0,a.jsx)(r.p,{children:"You can add a custom SQL query if you're doing data processing with advance Jinja or dbt templating.\nThis gives you flexibility when doing last mile operations for your SQL models. To that end, we support the use of declared variables directly in the SQL queries for those last mile operations on each model write."}),"\n",(0,a.jsx)(r.h3,{id:"ports",children:"Ports"}),"\n",(0,a.jsx)(r.p,{children:"Ports represent the tables or gems that you want to use in the SQL query. You can access them using the table aliases, or port names. The visual order of the ports defines the order of the variables."}),"\n",(0,a.jsx)(r.p,{children:"You can edit or add Ports for Input and Output."}),"\n",(0,a.jsx)(r.h3,{id:"sql-query",children:"SQL Query"}),"\n",(0,a.jsx)(r.p,{children:"You can enable customer SQL query on the SQL Query tab."}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["Toggle ",(0,a.jsx)(r.strong,{children:"Enable custom SQL query"})," to enable your custom SQL query at the end of your model."]}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"SQL Query",src:t(72114).A+"",width:"1400",height:"823"})}),"\n",(0,a.jsx)(r.p,{children:"Your SQL query will appear as a normal string in the Code view."}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-SQL",children:"SELECT *\n\nFROM customers_raw\n\nWHERE customer_id > {{ id_threshold }}\n"})}),"\n",(0,a.jsx)(r.p,{children:"You can use your declared dbt variables in the SQL query."}),"\n",(0,a.jsx)(r.h2,{id:"declare-variables",children:"Declare variables"}),"\n",(0,a.jsx)(r.p,{children:"The variable declaration interface allows you to configure variables directly in the SQL query for your Target model."}),"\n",(0,a.jsx)(r.p,{children:"Declared variables are accessible by clicking configuration to add the variable of interest."}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["You can declare the variables under ",(0,a.jsx)(r.strong,{children:"..."})," > ",(0,a.jsx)(r.strong,{children:"Configuration"})," using key-value pairs. Variables can be defined at the model or project level."]}),"\n"]}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{alt:"Configuration",src:t(16143).A+"",width:"1420",height:"834"})}),"\n",(0,a.jsx)(r.p,{children:"You can then use the variable, along with standard dbt functions, in the Target model SQL Query tab."})]})}function c(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},72114:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/sql-query-68df20db4a7c84069bb54758d2e9c49f.png"}}]);