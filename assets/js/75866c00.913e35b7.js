"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[6342],{3905:(e,n,t)=>{t.d(n,{Zo:()=>l,kt:()=>h});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=o.createContext({}),p=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},l=function(e){var n=p(e.components);return o.createElement(s.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},g=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(t),g=a,h=d["".concat(s,".").concat(g)]||d[g]||u[g]||r;return t?o.createElement(h,i(i({ref:n},l),{},{components:t})):o.createElement(h,i({ref:n},l))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=g;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c[d]="string"==typeof e?e:a,i[1]=c;for(var p=2;p<r;p++)i[p]=t[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}g.displayName="MDXCreateElement"},77519:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>p});var o=t(87462),a=(t(67294),t(3905));const r={sidebar_position:1,title:"Prophecy Managed",id:"prophecy_managed_airflow_fabric",description:"How Prophecy create a Prophecy Managed Airflow Fabric",tags:["scheduling","airflow","jobs","prophecyManaged","fabric"]},i=void 0,c={unversionedId:"low-code-jobs/airflow/setup/prophecy_managed_airflow_fabric",id:"low-code-jobs/airflow/setup/prophecy_managed_airflow_fabric",title:"Prophecy Managed",description:"How Prophecy create a Prophecy Managed Airflow Fabric",source:"@site/docs/low-code-jobs/airflow/setup/prophecyManaged.md",sourceDirName:"low-code-jobs/airflow/setup",slug:"/low-code-jobs/airflow/setup/prophecy_managed_airflow_fabric",permalink:"/low-code-jobs/airflow/setup/prophecy_managed_airflow_fabric",draft:!1,tags:[{label:"scheduling",permalink:"/tags/scheduling"},{label:"airflow",permalink:"/tags/airflow"},{label:"jobs",permalink:"/tags/jobs"},{label:"prophecyManaged",permalink:"/tags/prophecy-managed"},{label:"fabric",permalink:"/tags/fabric"}],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Prophecy Managed",id:"prophecy_managed_airflow_fabric",description:"How Prophecy create a Prophecy Managed Airflow Fabric",tags:["scheduling","airflow","jobs","prophecyManaged","fabric"]},sidebar:"defaultSidebar",previous:{title:"Setup",permalink:"/low-code-jobs/airflow/setup/"},next:{title:"Composer",permalink:"/low-code-jobs/airflow/setup/composer_fabric"}},s={},p=[{value:"How to create Prophecy Managed Airflow Fabric",id:"how-to-create-prophecy-managed-airflow-fabric",level:2},{value:"Setting up Connections",id:"setting-up-connections",level:2},{value:"Adding AWS connection",id:"adding-aws-connection",level:3},{value:"Adding Email connection",id:"adding-email-connection",level:3},{value:"Adding Databricks Spark connection",id:"adding-databricks-spark-connection",level:3},{value:"Adding Databricks SQL connection (DBT)",id:"adding-databricks-sql-connection-dbt",level:3}],l={toc:p},d="wrapper";function u(e){let{components:n,...r}=e;return(0,a.kt)(d,(0,o.Z)({},l,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"If you are new to Airflow and do not have an Airflow Instance running in your environment, we provide a ",(0,a.kt)("inlineCode",{parentName:"p"},"Prophecy Managed Airflow")," to expedite your trial and POC.\nYou can use this to connect to your Spark or SQL execution env and try out scheduling for your Spark Pipelines or SQL Models.\nLet's see how to set up this Fabric."),(0,a.kt)("h2",{id:"how-to-create-prophecy-managed-airflow-fabric"},"How to create Prophecy Managed Airflow Fabric"),(0,a.kt)("p",null,"Setting up a Fabric is very straightforward. Click the ",(0,a.kt)("strong",{parentName:"p"},"(1) Create Entity")," button, and choose ",(0,a.kt)("strong",{parentName:"p"},"(2) Create Fabric")," option. The Fabric creation is composed of two steps: Basic Info and Providers setup.\nOn the Basic Info screen, enter a ",(0,a.kt)("strong",{parentName:"p"},"(1) Fabric Name"),", ",(0,a.kt)("strong",{parentName:"p"},"(2) Fabric Description"),", and choose the ",(0,a.kt)("strong",{parentName:"p"},"(3) Team")," that\u2019s going to own the Fabric."),(0,a.kt)("p",null,"Once ready, click ",(0,a.kt)("strong",{parentName:"p"},"(4) Continue"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"CreateFabric",src:t(17521).Z,width:"2880",height:"1084"})),(0,a.kt)("p",null,"Since we\u2019re setting up a Fabric connected to Airflow, choose ",(0,a.kt)("strong",{parentName:"p"},"Airflow")," as the ",(0,a.kt)("strong",{parentName:"p"},"(1) Provider Type")," and ",(0,a.kt)("strong",{parentName:"p"},"Prophecy Managed")," as the ",(0,a.kt)("strong",{parentName:"p"},"(2) Provider"),".\nFor connecting to Prophecy Managed Airflow, you don't need to provide any other details, so go ahead and click on ",(0,a.kt)("strong",{parentName:"p"},"(3) Continue"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"CreatePMFabric",src:t(76908).Z,width:"2880",height:"1726"})),(0,a.kt)("p",null,"This completes the Fabric creation for you. Now you can start setting up connections for Prophecy Managed Airflow to your AWS/Databricks etc."),(0,a.kt)("h2",{id:"setting-up-connections"},"Setting up Connections"),(0,a.kt)("p",null,"You need Airflow to talk to various other systems in your Data Platform to be able to do certain tasks like send Email, trigger Spark pipelines and SQL models.\nFor these we create ",(0,a.kt)("a",{parentName:"p",href:"https://airflow.apache.org/docs/apache-airflow/stable/authoring-and-scheduling/connections.html"},"connections")," in Airflow.\nFor Prophecy Managed Airflow, you can provide all the details required to connect to your external systems in Connections page, and Prophecy will set up the Airflow connection for you.\nThe credentials for your connections are stored securely in a Google Cloud Secret Manager."),(0,a.kt)("p",null,"Let's see how to set up different type of connections one by one below:"),(0,a.kt)("h3",{id:"adding-aws-connection"},"Adding AWS connection"),(0,a.kt)("p",null,"To be able to trigger your Airflow Job using an S3 File Sensor, you need to have connection from Prophecy Managed Airflow to you S3 account. For this, we need to add an AWS Connection. You would need this AWS connection for connecting to any AWS services.\nTo create an AWS connection for Prophecy Managed Airflow, you need to provide the ",(0,a.kt)("strong",{parentName:"p"},"AWS access key id")," and associated ",(0,a.kt)("strong",{parentName:"p"},"Secret Key"),". Check ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html"},"here"))," to know how you can get it for your AWS account."),(0,a.kt)("p",null,"For adding a connection, Click on ",(0,a.kt)("strong",{parentName:"p"},"(1) Add Connection")," button. This Opens up the Connection form as shown."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Add_connection",src:t(49269).Z,width:"2880",height:"1084"})),(0,a.kt)("p",null,"Select AWS in ",(0,a.kt)("strong",{parentName:"p"},"(1) Connection Type"),". Provide a ",(0,a.kt)("strong",{parentName:"p"},"(2) Connection Name")," to identify your connection, add a ",(0,a.kt)("strong",{parentName:"p"},"(3) Description")," of your choice, and provide the ",(0,a.kt)("strong",{parentName:"p"},"(4) AWS Access Key ID")," and ",(0,a.kt)("strong",{parentName:"p"},"(5)AWS Secret Access Key"),". Once done, hit ",(0,a.kt)("strong",{parentName:"p"},"(6) Save"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"AWS_connection",src:t(91383).Z,width:"2880",height:"1726"})),(0,a.kt)("h3",{id:"adding-email-connection"},"Adding Email connection"),(0,a.kt)("p",null,"To be able to send Email via Airflow using an Email Gem, you need to have Email connection in Prophecy Managed Airflow. Click again on Add Connection button and select Email in (",(0,a.kt)("strong",{parentName:"p"},"1) Connection Type"),"."),(0,a.kt)("p",null,"Provide a ",(0,a.kt)("strong",{parentName:"p"},"(2) Connection Name")," to identify your connection, add a ",(0,a.kt)("strong",{parentName:"p"},"(3) Description")," of your choice, and provide the ",(0,a.kt)("strong",{parentName:"p"},"(4) Host")," as your SMTP host example ",(0,a.kt)("inlineCode",{parentName:"p"},"smtp.gmail.com"),". Provide the login credentials for this server in ",(0,a.kt)("strong",{parentName:"p"},"(5)Login")," and ",(0,a.kt)("strong",{parentName:"p"},"(6)Password")," and provide your SMTP port in ",(0,a.kt)("strong",{parentName:"p"},"(7) Port"),". Once done, hit ",(0,a.kt)("strong",{parentName:"p"},"(8) Save"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Email_connection",src:t(66915).Z,width:"2880",height:"1726"})),(0,a.kt)("h3",{id:"adding-databricks-spark-connection"},"Adding Databricks Spark connection"),(0,a.kt)("p",null,"To be able to schedule your Databricks Spark pipelines via Airflow, you need to have a Databricks Spark Connections from Prophecy Managed Airflow to your Databricks Workspace.\nClick on Add Connection button."),(0,a.kt)("p",null,"Select Databricks Spark in ",(0,a.kt)("strong",{parentName:"p"},"(1) Connection Type"),". Since you have already provided the details for your Databricks Workspace when creating a Databricks Fabric, you need not provide the details here again.\nUnder the ",(0,a.kt)("strong",{parentName:"p"},"(2) Fabric"),", select the Fabric you created for Databricks Spark and Prophecy would set up the connection. You can provide a description in the ",(0,a.kt)("strong",{parentName:"p"},"(3) Description"),". Once done, click ",(0,a.kt)("strong",{parentName:"p"},"(4) Save"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"DB_Spark_connection",src:t(11368).Z,width:"2880",height:"1726"})),(0,a.kt)("h3",{id:"adding-databricks-sql-connection-dbt"},"Adding Databricks SQL connection (DBT)"),(0,a.kt)("p",null,"To be able to Run your Databricks SQL Models, you need to have connection from Prophecy Managed Airflow to your Databricks SQL Environment. Click again on Add Connection button."),(0,a.kt)("p",null,"Select Databricks SQL in ",(0,a.kt)("strong",{parentName:"p"},"(1) Connection Type"),". Now under the ",(0,a.kt)("strong",{parentName:"p"},"(2) Fabric"),", you would select the already created Fabric for Databricks SQL and Prophecy would setup the connection. You can provide a description in the ",(0,a.kt)("strong",{parentName:"p"},"(3) Description"),". Once done, click ",(0,a.kt)("strong",{parentName:"p"},"(4) Save"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"DB_SQL_connection",src:t(23829).Z,width:"2880",height:"1726"})))}u.isMDXComponent=!0},91383:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/AWS_Connection-4c3d3bfbc9c76e839dcbb6d4e1ef3584.png"},49269:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/Add_Connection-e52b200f2986cda3be090212a02ff872.png"},17521:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/Create_Fabric-49796b917d7155244e44ce3e3af6b5cd.png"},76908:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/Create_PM_Fabric-8cb092965a4dee63432186c2b6982924.png"},11368:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/DB_Spark_connection-51d1e9b4ff69f1e17085ec10d3654309.png"},23829:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/DB_Sql_connection-e1de47abbd9b3265c2b03e8aafcca822.png"},66915:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/Email_connection-6f392517477fe16388989d4f089be6ed.png"}}]);