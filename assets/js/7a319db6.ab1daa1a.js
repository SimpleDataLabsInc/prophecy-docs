"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[3894],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var r=i.createContext({}),d=function(e){var t=i.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return i.createElement(r.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),u=a,h=c["".concat(r,".").concat(u)]||c[u]||m[u]||o;return n?i.createElement(h,l(l({ref:t},p),{},{components:n})):i.createElement(h,l({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=u;var s={};for(var r in t)hasOwnProperty.call(t,r)&&(s[r]=t[r]);s.originalType=e,s[c]="string"==typeof e?e:a,l[1]=s;for(var d=2;d<o;d++)l[d]=n[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},75211:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var i=n(87462),a=(n(67294),n(3905));const o={sidebar_position:1,title:"Dependencies",id:"dependencies",description:"Dependency management",tags:["dependencies","maven","extensibility"]},l=void 0,s={unversionedId:"low-code-spark/extensibility/dependencies",id:"low-code-spark/extensibility/dependencies",title:"Dependencies",description:"Dependency management",source:"@site/docs/low-code-spark/extensibility/dependencies.md",sourceDirName:"low-code-spark/extensibility",slug:"/low-code-spark/extensibility/dependencies",permalink:"/low-code-spark/extensibility/dependencies",draft:!1,tags:[{label:"dependencies",permalink:"/tags/dependencies"},{label:"maven",permalink:"/tags/maven"},{label:"extensibility",permalink:"/tags/extensibility"}],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Dependencies",id:"dependencies",description:"Dependency management",tags:["dependencies","maven","extensibility"]},sidebar:"defaultSidebar",previous:{title:"Extensibility",permalink:"/low-code-spark/extensibility/"},next:{title:"User-defined functions",permalink:"/low-code-spark/extensibility/udfs"}},r={},d=[{value:"Storage",id:"storage",level:2},{value:"Common Actions",id:"common-actions",level:2},{value:"See dependencies",id:"see-dependencies",level:3},{value:"Add dependency",id:"add-dependency",level:3},{value:"Enable / Disable dependency",id:"enable--disable-dependency",level:3},{value:"Delete dependency",id:"delete-dependency",level:3},{value:"Installing on a cluster",id:"installing-on-a-cluster",level:3},{value:"Build Tool Customization",id:"build-tool-customization",level:2},{value:"Jobs Support",id:"jobs-support",level:2},{value:"Scala",id:"scala",level:3},{value:"Python",id:"python",level:3}],p={toc:d},c="wrapper";function m(e){let{components:t,...o}=e;return(0,a.kt)(c,(0,i.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Dependencies allow you to make use of third-party or custom code in your data Pipelines and Jobs. Dependencies can be\nwritten in Java, Scala, or PySpark, and can be connected to your data Pipelines by pointing\nto ",(0,a.kt)("a",{parentName:"p",href:"https://mvnrepository.com/"},"Maven")," or ",(0,a.kt)("a",{parentName:"p",href:"https://pypi.org/"},"PyPi")," coordinates."),(0,a.kt)("h2",{id:"storage"},"Storage"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"See Dependencies",src:n(2120).Z,width:"2576",height:"1084"})),(0,a.kt)("p",null,"All of your dependencies are stored at the Project-level. When adding a dependency to a single\nPipeline, by default it becomes available to all the other Pipelines within the same Project. However, within each\nPipeline you can control if a given dependency should be enabled or disabled."),(0,a.kt)("p",null,"Dependencies are natively saved within your build-system files. E.g. if you're using Scala, they're saved in the\n",(0,a.kt)("strong",{parentName:"p"},"pom.xml")," file, if you're using Python, they're saved in the ",(0,a.kt)("strong",{parentName:"p"},"setup.py")," file. To customize the build system further,\nplease check out the ",(0,a.kt)("a",{parentName:"p",href:"#build-tool-customization"},"Custom Build Tool")," section."),(0,a.kt)("h2",{id:"common-actions"},"Common Actions"),(0,a.kt)("h3",{id:"see-dependencies"},"See dependencies"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"See Dependencies",src:n(6405).Z,width:"3200",height:"800"})),(0,a.kt)("p",null,"To see all of your Project and Pipeline dependencies simply open the ",(0,a.kt)("strong",{parentName:"p"},"Manage Dependencies")," screen by going to ",(0,a.kt)("strong",{parentName:"p"},"... >\nOptions > Manage Dependencies"),"."),(0,a.kt)("h3",{id:"add-dependency"},"Add dependency"),(0,a.kt)("p",null,"To add the dependency, first click ",(0,a.kt)("a",{parentName:"p",href:"#see-dependencies"},"dependencies list"),". There you will see a complete list of your\ndependencies. Click on ",(0,a.kt)("strong",{parentName:"p"},"Create Dependency")," to add a new dependency."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Add Dependency",src:n(10562).Z,width:"3197",height:"968"})),(0,a.kt)("p",null,"To define a new dependency, specify the following:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Type")," - which can be either ",(0,a.kt)("strong",{parentName:"li"},"Coordinates (Maven)")," or ",(0,a.kt)("strong",{parentName:"li"},"Package (PyPi)")," (Python Projects only)."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Name")," - the name of your dependency - this can be any name, chosen by you to easier identify each dependency"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Coordinates")," - maven coordinates in the ",(0,a.kt)("inlineCode",{parentName:"li"},"groupId:artifcatId:version")," format (e.g. ",(0,a.kt)("inlineCode",{parentName:"li"},"org.postgresql:postgresql:42.3.3"),")")),(0,a.kt)("p",null,"For further customization of your dependency you can additionally define ",(0,a.kt)("strong",{parentName:"p"},"Advanced")," properties:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Repository")," - by default your dependency is fetched from ",(0,a.kt)("strong",{parentName:"li"},"Maven Central")," repository. If you'd like to use an external repository (e.g. your organizations' repository) you can specify the link to it here. Please note\nthe repository must be publicly accessible."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Exclusions")," - optional list of of ",(0,a.kt)("inlineCode",{parentName:"li"},"groupId:artifactId")," pairs, of dependencies you'd like to exclude. Learn more\nabout dependency\nexclusion ",(0,a.kt)("a",{parentName:"li",href:"https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#dependency-exclusions"},"here"),"\n.")),(0,a.kt)("p",null,"After you defined the Dependency press ",(0,a.kt)("strong",{parentName:"p"},"Save"),". Prophecy is going to validate the dependency and add it to the Project,\nmaking it enabled in the current pipeline, and adding it as dependency (but disabled) among all other Pipelines in the Project."),(0,a.kt)("p",null,"When adding dependencies, Prophecy validates that the dependency coordinates are valid and accessible. If\nthat fails, you should see an invalid coordinates error."),(0,a.kt)("admonition",{title:"Invalid coordinates",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"In rare cases, your dependency might be only accessible to the Spark cluster or the build system but not Prophecy\nitself. If you're confident that the dependency is correct, but the validation error shows up, it's safe to press ",(0,a.kt)("strong",{parentName:"p"},"Save\nAnyways")," to ignore that warning.")),(0,a.kt)("h3",{id:"enable--disable-dependency"},"Enable / Disable dependency"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Dependencies List",src:n(17934).Z,width:"2794",height:"338"})),(0,a.kt)("p",null,"Since dependencies are stored at a Project-level, any changes, like adding or deleting a dependency affects all the\nPipelines in that Project. To selectively enable or disable a dependency for a specific Pipeline, you can use the ",(0,a.kt)("strong",{parentName:"p"},"Enable In Pipeline"),"\noption."),(0,a.kt)("h3",{id:"delete-dependency"},"Delete dependency"),(0,a.kt)("p",null,"To delete a dependency click on a trash icon on the dependencies list."),(0,a.kt)("admonition",{title:"Deleting a dependency",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Deleting a dependency deletes it within the whole Project, and all inheriting Pipelines. If you're not confident about\nthe functionality of the other Pipelines, it's usually better to disable a dependency, instead of deleting it.")),(0,a.kt)("h3",{id:"installing-on-a-cluster"},"Installing on a cluster"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Dependencies Install",src:n(18123).Z,width:"3200",height:"1150"})),(0,a.kt)("p",null,"Whenever you connect the Pipeline to a cluster, dependencies are automatically installed on your cluster. If the\ncluster doesn't have the dependency installed yet, Prophecy installs it and restarts the cluster automatically."),(0,a.kt)("h2",{id:"build-tool-customization"},"Build Tool Customization"),(0,a.kt)("p",null,"Project level templates can be defined on the ",(0,a.kt)("strong",{parentName:"p"},"advanced")," tab on the Project main screen to generate the build files for all Pipelines present inside a Project.\nBy default, Project Level Templating is enabled for new Projects.\nThe ",(0,a.kt)("strong",{parentName:"p"},"template")," can be customised at the Project level as per need."),(0,a.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,a.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,a.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/175944764-1289eac2-4f24-4fe1-8893-7e98e298ddd5.mp4",title:"Enable templating",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,a.kt)("hr",null),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"For Projects created before ",(0,a.kt)("strong",{parentName:"p"},"Prophecy 2.0 release on 24th June 2022"),", Project templating would be disabled by default. We highly recommend you to enable it\nas shown in the process below:"),(0,a.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,a.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,a.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/175944722-32fc6e26-75d7-4c91-be7d-e8cc9afb34be.mp4",title:"Old Project Enable templating",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,a.kt)("p",{parentName:"admonition"},"As soon as Project templating is enabled and any Pipeline is opened on the browser, the existing ",(0,a.kt)("strong",{parentName:"p"},"pom.xml/build.py")," files\nwould get updated automatically with the new template defined at the Project level. The ",(0,a.kt)("strong",{parentName:"p"},"pom.xml/build.py")," files include the dependencies defined\nin the ",(0,a.kt)("strong",{parentName:"p"},"... > Options > Manage Dependencies")," screen as well. Please ",(0,a.kt)("strong",{parentName:"p"},"commit the changes and re-release the Project")," for\nchanges to take effect in the Job."),(0,a.kt)("p",{parentName:"admonition"},"For any help required in enabling the Project template for older Projects, please reach out to Prophecy support team.")),(0,a.kt)("h2",{id:"jobs-support"},"Jobs Support"),(0,a.kt)("p",null,"For Projects in which templating is enabled, dependencies are added automatically to ",(0,a.kt)("strong",{parentName:"p"},"pom.xml/build.py")," files as soon as they\nare added on the ",(0,a.kt)("strong",{parentName:"p"},"...> Options > Manage Dependencies")," screen."),(0,a.kt)("h3",{id:"scala"},"Scala"),(0,a.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,a.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,a.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/175944754-84002ed5-2c7c-4ed5-94bd-dd9c7e077e36.mp4",title:"Auto addition to pom file for scala",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,a.kt)("h3",{id:"python"},"Python"),(0,a.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,a.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,a.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/175944746-5300acd1-90b2-4356-8190-128dbe06d0b3.mp4",title:"Auto addition to build file for python",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,a.kt)("hr",null),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"For older Projects in which templating is disabled, the dependencies added to the Pipelines are not propagated to the scheduled Jobs automatically.\n",(0,a.kt)("strong",{parentName:"p"},"(We highly recommend to enable the templating for all Projects, rather than editing the pom.xml files manually)")),(0,a.kt)("p",{parentName:"admonition"},"Though, if you want to keep the templating disabled at Project level and still want to add dependencies for Scala Projects such that it is visible to your Pipeline when it's scheduled, it has to be ",(0,a.kt)("strong",{parentName:"p"},"manually")," added to the ",(0,a.kt)("strong",{parentName:"p"},"pom.xml")," file. Below is an example on how it can be achieved:"),(0,a.kt)("p",{parentName:"admonition"},"The dependency should be added anywhere between the ",(0,a.kt)("inlineCode",{parentName:"p"},"<dependencies></dependencies>")," tags. For instance to add ",(0,a.kt)("inlineCode",{parentName:"p"},"io.github.etspaceman:scalacheck-faker_2.12:7.0.0")," dependency, add it to the ",(0,a.kt)("strong",{parentName:"p"},"pom.xml")," like so:"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("img",{alt:"Dependencies List",src:n(8843).Z,width:"3200",height:"1150"})),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"...\n<dependencies>\n    <dependency>\n        <groupId>io.github.etspaceman</groupId>\n        <artifactId>scalacheck-faker_2.12</artifactId>\n        <version>7.0.0</version>\n    </dependency>\n\n    ...\n</dependencies>\n...\n"))))}m.isMDXComponent=!0},10562:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/dependencies-add-146e3067f9738739226ad0a3445df1b7.png"},18123:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/dependencies-install-81b0fc1b6e483c5c8f00d2ec7deab329.gif"},17934:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/dependencies-list-c7c64f85305b7033fe8ebee9d33d0500.png"},6405:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/dependencies-open-6054cb1a6960ef1cb8d4921501a5e0eb.gif"},8843:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/dependencies-pom-add-840a3df8109102daa6cbc3ef8ce470be.gif"},2120:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/dependencies-storage-3a586a51d4647dab0591eee58ef77908.png"}}]);