<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-analysts/development/gems/visual-expression-builder/use-the-expression-builder" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Advanced visual expressions | Prophecy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.prophecy.io/analysts/use-visual-expression-builder"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Advanced visual expressions | Prophecy"><meta data-rh="true" name="description" content="Create complex visual expressions that include logical operators, comparisons, and parameters"><meta data-rh="true" property="og:description" content="Create complex visual expressions that include logical operators, comparisons, and parameters"><link data-rh="true" rel="icon" href="/img/favicon2.png"><link data-rh="true" rel="canonical" href="https://docs.prophecy.io/analysts/use-visual-expression-builder"><link data-rh="true" rel="alternate" href="https://docs.prophecy.io/analysts/use-visual-expression-builder" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.prophecy.io/analysts/use-visual-expression-builder" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Pipeline development","item":"https://docs.prophecy.io/analysts/pipeline-development"},{"@type":"ListItem","position":2,"name":"Gems","item":"https://docs.prophecy.io/analysts/gems"},{"@type":"ListItem","position":3,"name":"Visual expressions","item":"https://docs.prophecy.io/analysts/visual-expression-builder"},{"@type":"ListItem","position":4,"name":"Advanced visual expressions","item":"https://docs.prophecy.io/analysts/use-visual-expression-builder"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="Prophecy" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/assets/css/styles.91a6e78f.css">
<script src="/assets/js/runtime~main.6d865e23.js" defer="defer"></script>
<script src="/assets/js/main.df24b766.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Prophecy Logo.png" alt="Prophecy Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Prophecy Logo White.png" alt="Prophecy Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/">Product docs</a></li><li><a class="dropdown__link" href="/api/">API docs</a></li></ul></div><a class="navbar__item navbar__link" href="/administration">Administration</a><a href="https://transpiler.docs.prophecy.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Migration guide</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/getting-help">Help</a><a href="http://app.prophecy.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="custom-search-container" style="display:flex;align-items:center;gap:10px;height:30px;min-width:0;flex-shrink:1"><div style="flex:1 1 auto;min-width:0"><div id="inkeep-shadowradix-:R5spah:" style="display:contents"></div><span></span></div><div style="flex:0 0 auto"><div id="inkeep-shadowradix-:R6spah:" style="display:contents"></div><span></span></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Prophecy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/getting-started/">Getting started</a><button aria-label="Expand sidebar category &#x27;Getting started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/prophecy-ai">Prophecy AI</a><button aria-label="Expand sidebar category &#x27;Prophecy AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/release_notes/">Release notes</a><button aria-label="Expand sidebar category &#x27;Release notes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="sidebar-divider"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-title">Analysts</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/analysts/pipeline-development">Pipeline development</a><button aria-label="Collapse sidebar category &#x27;Pipeline development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/pipelines">Pipelines</a><button aria-label="Expand sidebar category &#x27;Pipelines&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/analysts/gems">Gems</a><button aria-label="Collapse sidebar category &#x27;Gems&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/source-target">Source and Target</a><button aria-label="Expand sidebar category &#x27;Source and Target&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/transform-gems">Transform</a><button aria-label="Expand sidebar category &#x27;Transform&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/prepare-gems">Prepare</a><button aria-label="Expand sidebar category &#x27;Prepare&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/join-gems">Join</a><button aria-label="Expand sidebar category &#x27;Join&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/spatial-gems">Spatial</a><button aria-label="Expand sidebar category &#x27;Spatial&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/parse-gems">Parse</a><button aria-label="Expand sidebar category &#x27;Parse&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/report-gems">Report</a><button aria-label="Expand sidebar category &#x27;Report&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/custom-gems">Custom</a><button aria-label="Expand sidebar category &#x27;Custom&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/analysts/visual-expression-builder">Visual expressions</a><button aria-label="Collapse sidebar category &#x27;Visual expressions&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/analysts/visual-expression-builder-reference">Visual expressions reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/analysts/use-visual-expression-builder">Advanced visual expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/analysts/variant-schema">Variant data type</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/ai-features">Agents and AI</a><button aria-label="Expand sidebar category &#x27;Agents and AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/analysts/connections">Connections</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/data-explorer">Data exploration</a><button aria-label="Expand sidebar category &#x27;Data exploration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/data-tests">Data tests</a><button aria-label="Expand sidebar category &#x27;Data tests&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/analysts/collaboration">Collaboration</a><button aria-label="Expand sidebar category &#x27;Collaboration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/analysts/folders">Organization</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/versioning">Versioning</a><button aria-label="Expand sidebar category &#x27;Versioning&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/scheduling">Scheduling</a><button aria-label="Expand sidebar category &#x27;Scheduling&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analysts/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/extensibility">Extensibility</a><button aria-label="Expand sidebar category &#x27;Extensibility&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/business-applications">Prophecy Apps</a><button aria-label="Expand sidebar category &#x27;Prophecy Apps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="sidebar-divider"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-title">Engineers</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/pipeline-development">Pipeline development</a><button aria-label="Expand sidebar category &#x27;Pipeline development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/models">Models</a><button aria-label="Expand sidebar category &#x27;Models&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/lineage">Lineage</a><button aria-label="Expand sidebar category &#x27;Lineage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/ci-cd">CI/CD</a><button aria-label="Expand sidebar category &#x27;CI/CD&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/orchestration">Orchestration</a><button aria-label="Expand sidebar category &#x27;Orchestration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/extensibility">Extensibility</a><button aria-label="Expand sidebar category &#x27;Extensibility&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/analysts/pipeline-development"><span>Pipeline development</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/analysts/gems"><span>Gems</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/analysts/visual-expression-builder"><span>Visual expressions</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Advanced visual expressions</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Advanced visual expressions</h1></header><p>In addition to using the <a href="/analysts/visual-expression-builder-reference">expression options</a> that appear when you open the visual expression builder, you can also create additional configurations that add complexity to your expressions. This page explains the advanced expressions that you can achieve with the visual expression builder.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-advanced-features">Key advanced features<a href="#key-advanced-features" class="hash-link" aria-label="Direct link to Key advanced features" title="Direct link to Key advanced features">​</a></h2>
<p>The following table describes a few advanced options for the visual expression builder.</p>
<table><thead><tr><th>Feature</th><th>Description</th></tr></thead><tbody><tr><td>Comparison</td><td>Lets you establish relationships between two simple expressions connected by an operator. This mode helps you perform comparisons or existence checks on your data that always evaluate to true or false.</td></tr><tr><td>Grouping</td><td>Combine multiple comparison expressions into groups using logical operators like <code>AND</code> and <code>OR</code>. This structure enables you to express intricate business logic in a visual format.</td></tr><tr><td>Parameters</td><td>Enables you to include variables in your expressions that may vary at runtime. Parameters only show up in the <strong>Configuration Variables</strong> of the visual expression builder after you have <a href="/analysts/pipeline-parameters">created them</a> at the pipeline level.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-comparisons-to-stratify-accounts">Use comparisons to stratify accounts<a href="#use-comparisons-to-stratify-accounts" class="hash-link" aria-label="Direct link to Use comparisons to stratify accounts" title="Direct link to Use comparisons to stratify accounts">​</a></h3>
<p>Let&#x27;s say you want to stratify accounts based on their annual revenues. Each condition we set up is limited to one comparison. This example combines conditional logic with comparison operators.</p>
<p><img decoding="async" loading="lazy" alt="Reformat gem using Comparison mode" src="/assets/images/reformat-visual-expression-builder-5f9835f4df7601eedcdca42f021b35a2.png" width="2620" height="1505" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-new-conditional-column">Create a new conditional column<a href="#create-a-new-conditional-column" class="hash-link" aria-label="Direct link to Create a new conditional column" title="Direct link to Create a new conditional column">​</a></h4>
<p>To set up the comparison expressions to match the image above:</p>
<ol>
<li>In the Reformat gem, under <strong>Target Column</strong>, click <strong>Select Column</strong>.</li>
<li>Give the column the name <code>stratify_by_revenue</code>.</li>
<li>Click <strong>Select expression &gt; Conditional</strong>. A <code>WHEN</code> clause appears.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-the-when-clause">Configure the WHEN clause<a href="#configure-the-when-clause" class="hash-link" aria-label="Direct link to Configure the WHEN clause" title="Direct link to Configure the WHEN clause">​</a></h4>
<ol>
<li>For <code>WHEN</code>, click <strong>Select expression &gt; Function</strong>.</li>
<li>Select <strong>Data type cast</strong>, which converts a value of one data type into another data type.</li>
<li>Select <strong>Throw error on failure</strong> to ensure the pipeline doesn&#x27;t run if the type cast fails.</li>
<li>Click <strong>Select expression &gt; Column</strong> and select <code>ANNUALREVENUE</code>.</li>
<li>Click <strong>Select data type &gt; Float</strong> to convert the column to a Float type.</li>
<li>Click <strong>Select operator</strong> and select <code>less than</code>.</li>
<li>Click <strong>Select expression &gt; Value</strong> and enter <code>1000000</code> as the value.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-the-then-clause">Configure the THEN clause<a href="#configure-the-then-clause" class="hash-link" aria-label="Direct link to Configure the THEN clause" title="Direct link to Configure the THEN clause">​</a></h4>
<ol>
<li>For <code>THEN</code>, click <strong>Select expression</strong> and select <strong>Value</strong>. Enter <code>Low Revenue</code> as the value.</li>
<li>Click <code>+</code> on the next line and select <strong>Add CASE</strong> to add another <code>WHEN</code> clause.</li>
<li>Repeat steps 3 to 8 to set up the rest of the comparison expressions.</li>
<li>Click <code>+</code> on the next line and select <strong>Add ELSE</strong> to add an <code>ELSE</code> statement.</li>
<li>Click <strong>Select expression</strong> and select <strong>Value</strong>. Enter <code>Unknown</code> as the value.</li>
</ol>
<p>This conditional expression will categorize your accounts based on revenue thresholds, making it easier to perform segment-specific analysis and reporting. When the pipeline runs, each account will be assigned to the appropriate revenue category based on the conditions you&#x27;ve defined.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-groupings-to-create-complex-filters">Use groupings to create complex filters<a href="#use-groupings-to-create-complex-filters" class="hash-link" aria-label="Direct link to Use groupings to create complex filters" title="Direct link to Use groupings to create complex filters">​</a></h3>
<p>When filtering data, you often want the output data to meet multiple criteria. You can use Grouping for this by creating multiple <code>AND</code> and <code>OR</code> statements.</p>
<p>Assume you have a dataset where you want to filter for the following:</p>
<ul>
<li>Total expected revenue that <code>is not null</code></li>
<li>Total amounts that are greater than <code>100000</code></li>
<li>Latest closed quarters that equals <code>2023Q2</code> or <code>2024Q2</code></li>
</ul>
<p><img decoding="async" loading="lazy" alt="Filter gem using Grouping mode" src="/assets/images/filter-visual-expression-builder-51af95efb5a61a6902c15daf71f8cdac.png" width="2620" height="1507" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can have any number of groups and nestings (a group within a group). You can also always change the grouping conditions between <code>AND</code> and <code>OR</code>.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-base-filter-conditions">Set up base filter conditions<a href="#set-up-base-filter-conditions" class="hash-link" aria-label="Direct link to Set up base filter conditions" title="Direct link to Set up base filter conditions">​</a></h4>
<p>To set up the grouping expressions to match the image above:</p>
<ol>
<li>After creating the Filer gem, click <strong>Add condition</strong>. An option to Select expression appears.</li>
<li>Click <strong>Select expression &gt; Column</strong>.</li>
<li>Select <code>TOTAL_EXPECTED_REVENUE</code> from the list.</li>
<li>Click <strong>Select operator</strong> and select <code>is not null</code>.</li>
<li>Click <strong>+ Add Condition</strong> to add another condition expression.</li>
<li>Click <strong>Select expression &gt; Column</strong>.</li>
<li>Select <code>TOTAL_AMOUNT</code> from the list.</li>
<li>Click <strong>Select operator</strong> and select <code>greater than</code>.</li>
<li>Click <strong>Select expression &gt; Value</strong>.</li>
<li>Enter <code>100000</code> as the value.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-grouped-or-condition">Add grouped <code>OR</code> condition<a href="#add-grouped-or-condition" class="hash-link" aria-label="Direct link to add-grouped-or-condition" title="Direct link to add-grouped-or-condition">​</a></h4>
<ol>
<li>Click <strong>Add Group</strong>. A grouped expression row appears.</li>
<li>Click <strong>Select expression &gt; Column</strong>.</li>
<li>Select <code>LATEST_CLOSED_QTR</code> from the list.</li>
<li>Click <strong>Select operator</strong> and select <code>equals</code>.</li>
<li>Click <strong>Select expression &gt; Value</strong>.</li>
<li>Enter <code>2023Q3</code> as the value.</li>
<li>Click <strong>+ Add Condition</strong> and repeat steps 2 to 6 to set up the other <code>OR</code> condition.</li>
</ol>
<p>This complex filter will return only high-value opportunities from specific quarters that have valid expected revenue values. By combining AND and OR conditions in this way, you can create precise data subsets that match your exact business requirements.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-dynamic-expressions-with-parameters">Create dynamic expressions with parameters<a href="#create-dynamic-expressions-with-parameters" class="hash-link" aria-label="Direct link to Create dynamic expressions with parameters" title="Direct link to Create dynamic expressions with parameters">​</a></h3>
<p>When you use a pipeline parameter in a visual expression, you can manipulate the value of that parameter using different configs at runtime. Let&#x27;s review an example that leverages an array parameter in a Filter gem.</p>
<p>Imagine that you want to filter an <code>Orders</code> dataset based on the region where the order was placed. Specifically, you only want to keep rows where the region is included in the array parameter.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-array-parameter">Create an array parameter<a href="#create-an-array-parameter" class="hash-link" aria-label="Direct link to Create an array parameter" title="Direct link to Create an array parameter">​</a></h4>
<p>First, you&#x27;ll set up a <code>region</code> parameter, which will be an array of strings that includes a subset of regions.</p>
<ol>
<li>Open your project and select <strong>Parameters</strong> in the header.</li>
<li>Click <strong>+ Add Parameter</strong>.</li>
<li>Name the parameter <code>region</code>.</li>
<li>Select the <strong>Type</strong> and choose <strong>Array &gt; String</strong>.</li>
<li>Click <strong>Select expression &gt; Value</strong>.</li>
<li>Type <code>AMER</code> and click <strong>Done</strong>.</li>
<li>Select <code>+</code> to add another string to the array.</li>
<li>Type <code>APAC</code> and click <strong>Done</strong>.</li>
<li>Now, click <strong>Save</strong>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Create string array" src="/assets/images/array-param-a57958f4505d2584e6352b4eebdf3b97.png" width="2866" height="1610" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-parameter-in-an-expression">Use the parameter in an expression<a href="#use-the-parameter-in-an-expression" class="hash-link" aria-label="Direct link to Use the parameter in an expression" title="Direct link to Use the parameter in an expression">​</a></h4>
<p>Now, you&#x27;ll use the parameter in an expression inside a Filter gem.</p>
<ol>
<li>Create and open the Filter gem.</li>
<li>Remove the default <code>true</code> expression.</li>
<li>Click <strong>Select expression &gt; Function</strong> and select <code>array_contains</code>.</li>
<li>In the <strong>array</strong> dropdown of the function, click <strong>Configuration Variable</strong> and select the <code>region</code> parameter.</li>
<li>In the <strong>value</strong> dropdown of the function, click <strong>Column</strong> and select the order region column.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Filter using array" src="/assets/images/filter-array-bbd341e4213e798fd7aed0694ef5d3b6.png" width="2866" height="1610" class="img_ev3q"></p>
<p>The output of this gem will only include rows where the order region matches at least one value in the <code>region</code> array. When you run the pipeline interactively, it will use the values of the default array that you set up in the previous section.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="validate-your-expressions">Validate your expressions<a href="#validate-your-expressions" class="hash-link" aria-label="Direct link to Validate your expressions" title="Direct link to Validate your expressions">​</a></h2>
<p>Run the pipeline up to and including the gem with your expression, and observe the resulting data sample. To do so, click the <strong>play</strong> button on either the canvas or the gem. Once the code has finished running, you can verify the results to make sure they match your expectations. You can explore the result of your gem in the <a href="/analysts/data-explorer">Data Explorer</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips">Tips<a href="#tips" class="hash-link" aria-label="Direct link to Tips" title="Direct link to Tips">​</a></h2>
<p>Here are some additional tips to keep in mind when using the visual expression builder:</p>
<ul>
<li>The expression dropdowns support search.</li>
<li>Each argument of your function is another expression since you have the same expression options to choose from.</li>
<li>You can drag and drop your comparison expressions to rearrange them.</li>
<li>Just as with conditions, you can also drag and drop your grouping expressions to rearrange them.</li>
<li>You can delete individual expressions, conditions, and groupings by clicking the trash icon at the end of the rows.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/expression-builder">expression builder</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/sql">sql</a></li></ul></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/analysts/visual-expression-builder-reference"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Visual expressions reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/analysts/variant-schema"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Variant data type</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#key-advanced-features" class="table-of-contents__link toc-highlight">Key advanced features</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#use-comparisons-to-stratify-accounts" class="table-of-contents__link toc-highlight">Use comparisons to stratify accounts</a></li><li><a href="#use-groupings-to-create-complex-filters" class="table-of-contents__link toc-highlight">Use groupings to create complex filters</a></li><li><a href="#create-dynamic-expressions-with-parameters" class="table-of-contents__link toc-highlight">Create dynamic expressions with parameters</a></li></ul></li><li><a href="#validate-your-expressions" class="table-of-contents__link toc-highlight">Validate your expressions</a></li><li><a href="#tips" class="table-of-contents__link toc-highlight">Tips</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Prophecy</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.prophecy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.prophecy.io/blogs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/prophecy-io-support/shared_invite/zt-1dwuvkakg-JcavnQuoukyZ3q5jkSkKCg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:docs@prophecy.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation feedback<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://app.prophecy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Login<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 Prophecy Inc All Rights Reserved <a href="https://legal.prophecy.io/privacy" target="_blank">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>