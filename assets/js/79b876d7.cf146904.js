"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[49061],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(96540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}},68011:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"administration/authentication/group-team-mapping","title":"Group-to-team mapping","description":"Automatic team creation and user role assignment based on identity provider groups","source":"@site/docs/administration/authentication/group-team-mapping.md","sourceDirName":"administration/authentication","slug":"/administration/authentication/group-team-mapping","permalink":"/administration/authentication/group-team-mapping","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"authentication","permalink":"/tags/authentication"},{"inline":true,"label":"roles","permalink":"/tags/roles"}],"version":"current","frontMatter":{"title":"Group-to-team mapping","id":"group-team-mapping","description":"Automatic team creation and user role assignment based on identity provider groups","tags":["authentication","roles"]},"sidebar":"gettingStartedSidebar","previous":{"title":"Google SSO","permalink":"/administration/authentication/google-sso"},"next":{"title":"Usage and billing","permalink":"/administration/usage-billing/"}}');var r=i(74848),s=i(28453);const o={title:"Group-to-team mapping",id:"group-team-mapping",description:"Automatic team creation and user role assignment based on identity provider groups",tags:["authentication","roles"]},a=void 0,d={},c=[{value:"Overview",id:"overview",level:2},{value:"Standard naming conventions",id:"standard-naming-conventions",level:2},{value:"Custom naming conventions",id:"custom-naming-conventions",level:2},{value:"Required configurations",id:"required-configurations",level:2},{value:"For LDAP",id:"for-ldap",level:3},{value:"For both SCIM and LDAP",id:"for-both-scim-and-ldap",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.admonition,{title:"Express and Enterprise",type:"edition",children:(0,r.jsxs)(n.p,{children:["Available for ",(0,r.jsx)(n.a,{href:"/getting-started/editions/",children:"Express and Enterprise Editions"})," only."]})}),"\n",(0,r.jsxs)(n.p,{children:["Prophecy supports automatic team creation and user role assignment based on identity provider groups using either SCIM or LDAP. To learn about roles in Prophecy, visit ",(0,r.jsx)(n.a,{href:"/administration/rbac",children:"Role-based access"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"When a user signs in through an identity provider, Prophecy checks their group memberships and uses naming conventions to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create teams in Prophecy"}),"\n",(0,r.jsx)(n.li,{children:"Assign users to those teams"}),"\n",(0,r.jsx)(n.li,{children:"Set the user's roles"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["This applies to both ",(0,r.jsx)(n.strong,{children:"SCIM"})," and ",(0,r.jsx)(n.strong,{children:"LDAP"}),"-based identity systems."]}),"\n",(0,r.jsx)(n.h2,{id:"standard-naming-conventions",children:"Standard naming conventions"}),"\n",(0,r.jsx)(n.p,{children:"By default, Prophecy supports the following group naming patterns."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Group Name Pattern"}),(0,r.jsx)(n.th,{children:"Role in Prophecy"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<teamname>-user"})}),(0,r.jsxs)(n.td,{children:["Member of the ",(0,r.jsx)(n.code,{children:"<teamname>"})," team"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<teamname>-admin"})}),(0,r.jsxs)(n.td,{children:["Admin of the ",(0,r.jsx)(n.code,{children:"<teamname>"})," team"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"prophecy-admin"})}),(0,r.jsx)(n.td,{children:"Prophecy cluster admin"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"custom-naming-conventions",children:"Custom naming conventions"}),"\n",(0,r.jsx)(n.p,{children:"If your organization uses more complex naming schemes (for instance, with prefixes or suffixes), Prophecy can still infer team names and assign roles appropriately. The following custom patterns are supported."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Group Name Pattern"}),(0,r.jsx)(n.th,{children:"Example"}),(0,r.jsx)(n.th,{children:"Role in Prophecy"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(<prefix>-)prophecy-cluster-admin(-<suffix>)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"corp-prophecy-cluster-admin"})}),(0,r.jsx)(n.td,{children:"Prophecy cluster admin"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<prefix>-<teamname>-admin"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"corp-finance-admin"})}),(0,r.jsxs)(n.td,{children:["Admin of the ",(0,r.jsx)(n.strong,{children:"finance"})," team"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<prefix>-<teamname>-user"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"corp-finance-user"})}),(0,r.jsxs)(n.td,{children:["Member of the ",(0,r.jsx)(n.strong,{children:"finance"})," team"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<prefix>-<teamname>-prophecy-team-admin(-<suffix>)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"corp-sales-prophecy-team-admin-emea"})}),(0,r.jsxs)(n.td,{children:["Admin of the ",(0,r.jsx)(n.strong,{children:"sales"})," team"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<prefix>-<teamname>-prophecy-team(-<suffix>)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"corp-sales-prophecy-team-emea"})}),(0,r.jsxs)(n.td,{children:["Member of the ",(0,r.jsx)(n.strong,{children:"sales"})," team"]})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Prophecy will automatically strip the ",(0,r.jsx)(n.code,{children:"<prefix>"})," and ",(0,r.jsx)(n.code,{children:"<suffix>"})," from group names to determine the team name. The prefix and suffix will ",(0,r.jsx)(n.strong,{children:"not"})," appear in the Prophecy UI."]}),"\n",(0,r.jsx)(n.h2,{id:"required-configurations",children:"Required configurations"}),"\n",(0,r.jsx)(n.p,{children:"To enable automatic team creation using custom naming schemes, you must configure the following environment variables for your deployment."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"Please reach out to us to set up these configurations."})}),"\n",(0,r.jsx)(n.h3,{id:"for-ldap",children:"For LDAP"}),"\n",(0,r.jsx)(n.p,{children:"To use automatic team creation, enable the following flag."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'ENABLE_AUTO_TEAM_CREATION: "true"\n'})}),"\n",(0,r.jsx)(n.p,{children:"This tells Prophecy to dynamically create teams when matching LDAP group names."}),"\n",(0,r.jsx)(n.h3,{id:"for-both-scim-and-ldap",children:"For both SCIM and LDAP"}),"\n",(0,r.jsxs)(n.p,{children:["To identify and remove prefixes from team names in Prophecy, add the prefix to the ",(0,r.jsx)(n.code,{children:"PROPHECY_IDP_TEAMNAME_STRIP_REGEX"})," variable."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'PROPHECY_IDP_TEAMNAME_STRIP_REGEX: "prefix-"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"prefix-"})," with your actual prefix (for example, ",(0,r.jsx)(n.code,{children:"corp-"}),", ",(0,r.jsx)(n.code,{children:"info-"}),", etc.). Prophecy will strip this from group names before creating or matching teams."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"You can use regular expressions for the prefix value."})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);