"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[3282],{3905:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>u});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=a.createContext({}),m=function(e){var t=a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=m(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),c=m(r),g=n,u=c["".concat(p,".").concat(g)]||c[g]||d[g]||o;return r?a.createElement(u,i(i({ref:t},l),{},{components:r})):a.createElement(u,i({ref:t},l))}));function u(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=g;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[c]="string"==typeof e?e:n,i[1]=s;for(var m=2;m<o;m++)i[m]=r[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}g.displayName="MDXCreateElement"},11191:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>m});var a=r(87462),n=(r(67294),r(3905));const o={title:"Streaming Transformations",id:"transformations-streaming",description:"Low-code Spark Streaming",sidebar_position:5,tags:["spark","streaming"]},i=void 0,s={unversionedId:"low-code-spark/spark-streaming/transformations-streaming",id:"low-code-spark/spark-streaming/transformations-streaming",title:"Streaming Transformations",description:"Low-code Spark Streaming",source:"@site/docs/low-code-spark/spark-streaming/streaming-transformations.md",sourceDirName:"low-code-spark/spark-streaming",slug:"/low-code-spark/spark-streaming/transformations-streaming",permalink:"/low-code-spark/spark-streaming/transformations-streaming",draft:!1,tags:[{label:"spark",permalink:"/tags/spark"},{label:"streaming",permalink:"/tags/streaming"}],version:"current",sidebarPosition:5,frontMatter:{title:"Streaming Transformations",id:"transformations-streaming",description:"Low-code Spark Streaming",sidebar_position:5,tags:["spark","streaming"]},sidebar:"defaultSidebar",previous:{title:"Warehouse-based",permalink:"/low-code-spark/spark-streaming/streaming-sources-and-targets/streaming-warehouse-apps"},next:{title:"Best Practices for Low-code-Spark",permalink:"/low-code-spark/best-practices/"}},p={},m=[{value:"Transformation Gems",id:"transformation-gems",level:2},{value:"Watermarking",id:"watermarking",level:3}],l={toc:m},c="wrapper";function d(e){let{components:t,...o}=e;return(0,n.kt)(c,(0,a.Z)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"transformation-gems"},"Transformation Gems"),(0,n.kt)("p",null,"Transform Gems that generate code but do not work within Streaming Applications include ",(0,n.kt)("inlineCode",{parentName:"p"},"OrderBy"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"Limit"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"Window")," (partitionBy).\nAlthough ",(0,n.kt)("inlineCode",{parentName:"p"},"Window")," would work with a watermarked column (explained below) as part of the partitioning, it is advised to use ",(0,n.kt)("inlineCode",{parentName:"p"},"window()")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"session_window()")," from the ",(0,n.kt)("inlineCode",{parentName:"p"},"pyspark.sql.functions package")," ",(0,n.kt)("a",{parentName:"p",href:"https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/api/pyspark.sql.functions.session_window.html#:~:text=session_window,-pyspark.sql.functions&text=Generates%20session%20window%20given%20a,according%20to%20the%20given%20inputs."},"(link)"),"."),(0,n.kt)("h3",{id:"watermarking"},"Watermarking"),(0,n.kt)("p",null,"Watermarking is a technique that enables aggregations on streaming data by limiting the state over which the aggregation is performed. In order to prevent out-of-memory errors, we have introduced support for watermarking. More information on watermarking is available in the Spark documentation ",(0,n.kt)("a",{parentName:"p",href:"https://spark.apache.org/docs/latest/structured-streaming-programming-guide.html#window-operations-on-event-time"},"here")),(0,n.kt)("p",null,"We have added a Watermarking Gem in the Transform Section that allows a user to add a Watermark to a DataFrame.\n",(0,n.kt)("img",{alt:"Example usage of Watermark - Watermark Table",src:r(17106).Z,width:"3054",height:"938"})),(0,n.kt)("p",null,"In this example, we add Watermarking to the ",(0,n.kt)("inlineCode",{parentName:"p"},"timestamp")," column. A user may enter the column name or select one from the Schema Table on the left. The text box is editable. Finally, define the Watermark Duration.\nIt is recommended to use Watermarking on a Streaming DataFrame in case you're planning to use any of the following operations on it:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/low-code-spark/gems/transform/aggregate"},"Aggregate")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/low-code-spark/gems/transform/deduplicate"},"Deduplicate")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/low-code-spark/gems/custom/sql-statement"},"SQL Statement")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/low-code-spark/gems/join-split/join"},"Join"))))}d.isMDXComponent=!0},17106:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/watermarkinputoutput-031574357ec93fec3e14413c2f4862fd.png"}}]);