"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[9722],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>y});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=a.createContext({}),p=function(e){var t=a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(r.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,r=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=p(n),h=o,y=c["".concat(r,".").concat(h)]||c[h]||m[h]||s;return n?a.createElement(y,l(l({ref:t},d),{},{components:n})):a.createElement(y,l({ref:t},d))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,l=new Array(s);l[0]=h;var i={};for(var r in t)hasOwnProperty.call(t,r)&&(i[r]=t[r]);i.originalType=e,i[c]="string"==typeof e?e:o,l[1]=i;for(var p=2;p<s;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},36789:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const s={title:"Releases and Deployment",id:"releases-and-deployment",description:"Release and Deploy Process. How to Release your Projects and Deploy your Jobs",tags:["metadata","Git","release","build","deploy"]},l=void 0,i={unversionedId:"releases-and-deployment/releases-and-deployment",id:"releases-and-deployment/releases-and-deployment",title:"Releases and Deployment",description:"Release and Deploy Process. How to Release your Projects and Deploy your Jobs",source:"@site/docs/releases-and-deployment/releases-and-deployment.md",sourceDirName:"releases-and-deployment",slug:"/releases-and-deployment/",permalink:"/releases-and-deployment/",draft:!1,tags:[{label:"metadata",permalink:"/tags/metadata"},{label:"Git",permalink:"/tags/git"},{label:"release",permalink:"/tags/release"},{label:"build",permalink:"/tags/build"},{label:"deploy",permalink:"/tags/deploy"}],version:"current",frontMatter:{title:"Releases and Deployment",id:"releases-and-deployment",description:"Release and Deploy Process. How to Release your Projects and Deploy your Jobs",tags:["metadata","Git","release","build","deploy"]},sidebar:"defaultSidebar",previous:{title:"Metadata Connections",permalink:"/metadata/metadata-connections"},next:{title:"Prophecy Build Tool (PBT)",permalink:"/releases-and-deployment/prophecy-build-tool/"}},r={},p=[{value:"Overview",id:"overview",level:2},{value:"How to Release a Project",id:"how-to-release-a-project",level:2},{value:"Advanced Release Settings",id:"advanced-release-settings",level:2},{value:"Deploy on Release",id:"deploy-on-release",level:3},{value:"Staged Release and Deployment",id:"staged-release-and-deployment",level:3},{value:"Release",id:"release",level:4},{value:"Deploy",id:"deploy",level:4},{value:"Selective Job Deployment",id:"selective-job-deployment",level:3},{value:"Enable Unit Tests",id:"enable-unit-tests",level:3},{value:"Releases and Deployment History",id:"releases-and-deployment-history",level:2},{value:"Releases",id:"releases",level:3},{value:"Current Version",id:"current-version",level:3},{value:"Deployment History",id:"deployment-history",level:3}],d={toc:p},c="wrapper";function m(e){let{components:t,...s}=e;return(0,o.kt)(c,(0,a.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Once you have developed and tested your custom components like Gems, Pipelines, Models, or Jobs in Prophecy, the next step is to make them available for use. This involves Releasing and Deploying them to the respective environments.\nYou can Release and Deploy via Prophecy UI or you can use ",(0,o.kt)("a",{parentName:"p",href:"/releases-and-deployment/prophecy-build-tool/"},"Prophecy Build Tool")," CLI to integrate with any other CI-CD tools.\nLets see how you can do it via Prophecy below."),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"As part of the release process, we start by creating a ",(0,o.kt)("a",{parentName:"p",href:"https://git-scm.com/book/en/v2/Git-Basics-Tagging"},"Git Tag")," with a specified version. This tag is then pushed to your configured Git repository. Following this, the Pipelines, Gems, and Jobs in the Project are built and deployed to the respective environments.\nHere's a breakdown of what deploying means for each component:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Gems"),": With Prophecy 3.2, you can create ",(0,o.kt)("a",{parentName:"p",href:"/package-hub/package-builder/Gem-builder"},"Custom Gems")," and use in your Pipelines. During the release, these gems are built and uploaded to an internal Artifactory. They aren't directly copied to your environments, as they are used in generating code for the Pipelines, not during Job/Pipeline execution. Please note, the code for Gems do get committed to your Git repo as part of the Project.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Pipelines"),": Each Pipeline in the project is compiled and built into an artifact (Wheel file for Python and Jar file for Scala). These artifacts are then uploaded to your environment as part of the release process.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Jobs"),": Depending on the type of Job (Databricks or Airflow), the Job is copied to the respective environments as a Json file for Databricks Jobs and as a Python DAG for Airflow."))),(0,o.kt)("p",null,"There is no specific deployment step needed for other entities."),(0,o.kt)("h2",{id:"how-to-release-a-project"},"How to Release a Project"),(0,o.kt)("p",null,"Once you've ",(0,o.kt)("a",{parentName:"p",href:"/metadata/Git#how-to-commit-changes"},"committed")," and ",(0,o.kt)("a",{parentName:"p",href:"/metadata/Git#how-to-merge-changes"},"merged")," your changes, you're ready to release them. To do this, Simply proceed with the ",(0,o.kt)("a",{parentName:"p",href:"/metadata/Git#how-to-release-a-branch"},"Release and Deploy"),", which takes care of both the release and deployment of Pipelines, Gems, and Jobs to respective environments."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Release_screen",src:n(41902).Z,width:"2880",height:"1726"})),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Only an Admin user of the team can initiate a Project Release and Deployment.")),(0,o.kt)("h2",{id:"advanced-release-settings"},"Advanced Release Settings"),(0,o.kt)("p",null,"For most users, a regular project release takes care of both the release and deployment of Pipelines, Gems, and Jobs to respective environments. However, for users who want more control over their deployment process, we offer some advanced options in Project Settings."),(0,o.kt)("p",null,"To access these settings, go to the ",(0,o.kt)("strong",{parentName:"p"},"(1) Settings page")," in your Project, and click on ",(0,o.kt)("strong",{parentName:"p"},"(2) Deployment"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Deployment_settings",src:n(43423).Z,width:"2880",height:"1726"})),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Only an Admin user can modify these Deployment settings for a project.")),(0,o.kt)("p",null,"When you navigate to Settings and Deployment, you'll find the following options:"),(0,o.kt)("h3",{id:"deploy-on-release"},"Deploy on Release"),(0,o.kt)("p",null,"This option is enabled by default, meaning the release and deployment happen in a single step. The ",(0,o.kt)("strong",{parentName:"p"},"Release and Deploy")," button handles building and deploying all Pipelines, Gems, and Jobs, and uploading the required artifacts to the respective environments.\nYou can switch the selection to ",(0,o.kt)("strong",{parentName:"p"},"Staged Release and Deployment")," to break down the process into two steps: ",(0,o.kt)("strong",{parentName:"p"},"Release")," and ",(0,o.kt)("strong",{parentName:"p"},"Deploy"),"."),(0,o.kt)("h3",{id:"staged-release-and-deployment"},"Staged Release and Deployment"),(0,o.kt)("p",null,"When you switch to Staged Release and Deployment, you would start seeing a new step for Deploy separately after Release."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Staged_deploy_Release",src:n(98741).Z,width:"2880",height:"1726"})),(0,o.kt)("h4",{id:"release"},"Release"),(0,o.kt)("p",null,"With Auto-deploy turned off, the Release step only creates a ",(0,o.kt)("a",{parentName:"p",href:"https://git-scm.com/book/en/v2/Git-Basics-Tagging"},"Git Tag")," and pushes it to your Git repository. It doesn't build or upload any artifacts. This speeds up the release process for larger projects with numerous pipelines and jobs."),(0,o.kt)("h4",{id:"deploy"},"Deploy"),(0,o.kt)("p",null,"After the release, you can directly proceed to deploy or choose to deploy later from the Deploy option in three dots as shown below."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Deploy_separately",src:n(73997).Z,width:"2880",height:"1726"})),(0,o.kt)("p",null,"This Deploy step builds all the Pipelines and Gems, uploads the artifacts, and schedules all the Jobs in the Project to the respective environments."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Deployment_steps",src:n(63374).Z,width:"2880",height:"1726"})),(0,o.kt)("p",null,"Start with ",(0,o.kt)("strong",{parentName:"p"},"(1) Choose a release"),", where you would select a version created in Release step. This would be prefilled with the version you created, if you continue to Deploy from the release step directly.\nIn ",(0,o.kt)("strong",{parentName:"p"},"(2) Override Fabric")," , you have the option to choose a specific environment (Fabric) for deploying the Jobs. This is useful for testing purposes, allowing you to deploy all Jobs to a designated test environment."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"This is an optional step and overrides the environment for this particular Job deployment. Leave it blank to use the fabrics pre-configured in Jobs.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"(3) Pick Jobs to Deploy")," table provides an overview of the deployment status for each Job, indicating the targeted Fabric, and any actions taken, such as addition, deletion, or modification.\nIn the ",(0,o.kt)("strong",{parentName:"p"},"Staged Release and Deployment")," setting, the ability to select or deselect specific Jobs is disabled. For more information on enabling this functionality, continue reading or directly jump ",(0,o.kt)("a",{parentName:"p",href:"#selective-job-deployment"},"here"),"."),(0,o.kt)("p",null,"Click on ",(0,o.kt)("strong",{parentName:"p"},"(4) Deploy")," to start the deployment process. This will now build your Pipelines, Gems and update the Jobs as shown below. You would be able to see logs for each step in this screen."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Deployment_logs",src:n(46629).Z,width:"2880",height:"1726"})),(0,o.kt)("h3",{id:"selective-job-deployment"},"Selective Job Deployment"),(0,o.kt)("p",null,"If you activate ",(0,o.kt)("strong",{parentName:"p"},"Selective Job Deployment")," in the advance settings ",(0,o.kt)("a",{parentName:"p",href:"#advanced-release-settings"},"here"),", you would be able to select specific Jobs during the Deploy step. This is helpful when you have many Pipelines and Jobs in the same project and only want to deploy a few at a time. It also speeds up the overall process by only building the Pipelines used in the selected Jobs."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Different versions of pipelines, datasets, and Subgraphs may coexist within the same environment when selectively deploying jobs. Only the deployed jobs will use the latest versions of pipelines, datasets, and subgraphs.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Selective_job_deployment",src:n(55927).Z,width:"2880",height:"1726"})),(0,o.kt)("h3",{id:"enable-unit-tests"},"Enable Unit Tests"),(0,o.kt)("p",null,"Writing good ",(0,o.kt)("a",{parentName:"p",href:"/low-code-spark/tests"},"Unit tests")," is one of the key stages of the having Quality and Manageable Data Pipelines. Prophecy makes the process of writing unit cases easier by giving an interactive environment via which unit test cases can be configured across each component.\nThis setting enables running Unit tests as part of Pipeline Builds."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Enabling unit tests might lead to a slight increase the Build time")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Enable_unit_tests",src:n(55920).Z,width:"2880",height:"1726"})),(0,o.kt)("h2",{id:"releases-and-deployment-history"},"Releases and Deployment History"),(0,o.kt)("p",null,"Click on ",(0,o.kt)("strong",{parentName:"p"},"(1) Releases and Deployments")," tab in the Project Metadata to access the history and the currently deployed Jobs."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Releases_and_Deployments",src:n(42079).Z,width:"2880",height:"1726"})),(0,o.kt)("h3",{id:"releases"},"Releases"),(0,o.kt)("p",null,"In the ",(0,o.kt)("strong",{parentName:"p"},"(2) Releases")," tab, you'll find a list of all tags, who created them, when they were created, and the latest tag. It also provides ",(0,o.kt)("strong",{parentName:"p"},"(3) logs")," of the latest deployment associated with that tag."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Releases_and_deployments",src:n(28322).Z,width:"2880",height:"1084"})),(0,o.kt)("h3",{id:"current-version"},"Current Version"),(0,o.kt)("p",null,"In the ",(0,o.kt)("strong",{parentName:"p"},"(4) Current Version")," tab, you can view the current state of all deployed Jobs per environment. Select the ",(0,o.kt)("strong",{parentName:"p"},"(5) Fabric")," environment you want to see the deployed Jobs for, and it will list all the Jobs deployed in that environment, along with their versions and deployment logs."),(0,o.kt)("h3",{id:"deployment-history"},"Deployment History"),(0,o.kt)("p",null,"In ",(0,o.kt)("strong",{parentName:"p"},"(6) Deployment History")," tab, you can view the history of all past deployments, along with the time at it was deployed and logs."))}m.isMDXComponent=!0},42079:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Release_&_Deployments-ef32b979903ce78e0bbe4b1298d28d61.png"},28322:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Release_Deployment_history-96c282839cc53d49aeea36c05f373a4f.png"},73997:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/deploy_separately-d00f4c0bc4d2fc9fbeee752585863515.png"},63374:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/deployment_steps-9592d87be587f3c8c01a16f50daefd3f.png"},46629:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/deployment_steps_complete-519a867bdd23e4c5957093e8d18d7e44.png"},41902:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/release_and_deploy_screen-6cb31b600460c0bfd3585766e0340c89.png"},55927:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/selective_job_deployment-0b7ca0bd5a4cda747a53eddea5fbe782.png"},43423:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/settings_for_deployment-e48d01af0afdaf1eaf49a34349844680.png"},98741:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/staged_release_deploy-3e57161f46080ce9b31b672c74daff35.png"},55920:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/unit_test-c574cd7144085b3dde6e6d5517becf14.png"}}]);