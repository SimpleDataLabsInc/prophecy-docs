"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[91671],{27138:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/fabric-table-index-bc798d88e8d0a6a35b2452654afcb457.png"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(96540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}},44309:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/copilot_knowledge_graph-18e8a0c69b21f5b71875a485369ee716.png"},71902:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"copilot/knowledge-graph","title":"Knowledge graph","description":"Learn how Prophecy uses knowledge graphs to enhance prompts","source":"@site/docs/copilot/knowledge-graph.md","sourceDirName":"copilot","slug":"/knowledge-graph","permalink":"/knowledge-graph","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"copilot","permalink":"/tags/copilot"},{"inline":true,"label":"knowledge graph","permalink":"/tags/knowledge-graph"}],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Knowledge graph","id":"knowledge-graph","slug":"/knowledge-graph","sidebar_position":1,"description":"Learn how Prophecy uses knowledge graphs to enhance prompts","tags":["copilot","knowledge graph"]},"sidebar":"mySidebar","previous":{"title":"Copilot","permalink":"/data-copilot"},"next":{"title":"Data privacy","permalink":"/data-copilot-data-privacy"}}');var o=t(74848),r=t(28453);const s={title:"Knowledge graph",id:"knowledge-graph",slug:"/knowledge-graph",sidebar_position:1,description:"Learn how Prophecy uses knowledge graphs to enhance prompts",tags:["copilot","knowledge graph"]},a=void 0,l={},c=[{value:"Overview",id:"overview",level:2},{value:"Process",id:"process",level:2},{value:"Indexing",id:"indexing",level:2},{value:"Refresh tables",id:"refresh-tables",level:3},{value:"SQL Warehouse Connection",id:"sql-warehouse-connection",level:4},{value:"Environment tab",id:"environment-tab",level:4},{value:"Agent suggestion",id:"agent-suggestion",level:4},{value:"Managing scope",id:"managing-scope",level:2}];function h(e){const n={a:"a",admonition:"admonition",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Copilot works by enhancing prompts using a knowledge graph, or an internal map of your data environment. This gives Copilot the context it needs to generate accurate, relevant answers."}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"Prophecy generates knowledge graphs for SQL projects only. Knowledge graphs are not used for Spark projects."})}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(n.p,{children:["Knowledge graphs are generated per ",(0,o.jsx)(n.a,{href:"/fabrics",children:"fabric"})," in Prophecy. Each knowledge graph contains information from fabrics and other entities, including the statistical usages of these entities. It also contains computed fields that further refine Copilot's capabilities."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Knowledge Graph",src:t(44309).A+"",width:"2880",height:"1868"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Your data itself is never stored in the knowledge graph. For more details, see ",(0,o.jsx)(n.a,{href:"/data-copilot-data-privacy",children:"Data privacy with Data Copilot"}),"."]})}),"\n",(0,o.jsx)(n.h2,{id:"process",children:"Process"}),"\n",(0,o.jsx)(n.p,{children:"When you interact with Copilot, Prophecy follows a multi-step process to generate what you need. First, Copilot enriches your prompt using the knowledge graph. This step adds detailed context about your project\u2019s datasets, schemas, and other entities, which helps the agent understand what you're referring to. The enhanced prompt is then sent to OpenAI\u2019s large language model (LLM), which returns SQL code based on the provided context."}),"\n",(0,o.jsx)(n.p,{children:"Once the code is generated, Prophecy validates it and automatically corrects any errors when possible. After validation, Prophecy converts the code into a visual pipeline, which is displayed on the canvas for you to review and customize."}),"\n",(0,o.jsx)(n.h2,{id:"indexing",children:"Indexing"}),"\n",(0,o.jsx)(n.p,{children:"When generating the knowledge graph, Prophecy indexes your SQL warehouse connection. To make sure that Copilot and AI agent has the most up-to-date information, you can manually refresh tables to update the knowledge graph index."}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"Prophecy only indexes tables from your SQL warehouse. Datasets from external connections are not included in the knowledge graph."})}),"\n",(0,o.jsx)(n.h3,{id:"refresh-tables",children:"Refresh tables"}),"\n",(0,o.jsx)(n.p,{children:"If Copilot or the AI agent can't find the tables you reference, or if responses seem outdated, you can manually refresh the table index to pull in the latest information. There are a few ways to do so."}),"\n",(0,o.jsx)(n.h4,{id:"sql-warehouse-connection",children:"SQL Warehouse Connection"}),"\n",(0,o.jsx)(n.p,{children:"To refresh tables from the fabric settings:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Open the ",(0,o.jsx)(n.a,{href:"/administration/fabrics/prophecy-fabrics/connections/",children:"SQL Warehouse Connection"})," details in your fabric settings."]}),"\n",(0,o.jsxs)(n.li,{children:["At the bottom of the connection dialog, you\u2019ll find a ",(0,o.jsx)(n.strong,{children:"Table Indexing Status"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"Start"})," to reindex the tables and track its progress."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Databricks connection reindex",src:t(27138).A+"",width:"2870",height:"1610"})}),"\n",(0,o.jsx)(n.h4,{id:"environment-tab",children:"Environment tab"}),"\n",(0,o.jsxs)(n.p,{children:["To refresh tables from the ",(0,o.jsx)(n.a,{href:"/analysts/connections#environment-browser",children:"Environment tab"}),":"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Open a project in the project editor."}),"\n",(0,o.jsx)(n.li,{children:"Attach to the fabric that you wish to reindex."}),"\n",(0,o.jsx)(n.li,{children:"In the left sidebar, click on the Environment tab."}),"\n",(0,o.jsxs)(n.li,{children:["Below your connections, you\u2019ll see a ",(0,o.jsx)(n.strong,{children:"Missing Tables?"})," callout."]}),"\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"Refresh"})," to reindex the SQL warehouse."]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"agent-suggestion",children:"Agent suggestion"}),"\n",(0,o.jsxs)(n.p,{children:["If the ",(0,o.jsx)(n.a,{href:"/analysts/ai-explore#troubleshooting",children:"agent"})," can\u2019t locate a table during your conversation, it will prompt you to refresh the index."]}),"\n",(0,o.jsx)(n.h2,{id:"managing-scope",children:"Managing scope"}),"\n",(0,o.jsx)(n.p,{children:"Knowledge graphs are generated per fabric. To control which tables Prophecy indexes for a knowledge graph, configure access permissions at the warehouse level. In summary:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Knowledge graph indexing is determined by the credentials used in your fabric's warehouse connection."}),"\n",(0,o.jsx)(n.li,{children:"To limit indexed tables, restrict permissions for the authentication credentials in your warehouse (e.g., Databricks)."}),"\n",(0,o.jsx)(n.li,{children:"This ensures that teams only see tables they have access to in their knowledge graphs."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"For example, if your team uses fabrics connected to Databricks warehouses, you would modify the access permissions of the service account or user credentials configured in the fabric connection settings."}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"When a fabric is configured with OAuth authentication, the knowledge graph indexes data using the credentials provided during fabric setup, not the currently logged-in user's credentials. Be aware that these credentials may differ from the active user's, which can affect access and visibility within the knowledge graph."})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);