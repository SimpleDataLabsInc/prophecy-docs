"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[6137],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),d=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(i.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=d(a),m=r,h=u["".concat(i,".").concat(m)]||u[m]||p[m]||o;return a?n.createElement(h,s(s({ref:t},c),{},{components:a})):n.createElement(h,s({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[u]="string"==typeof e?e:r,s[1]=l;for(var d=2;d<o;d++)s[d]=a[d];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},85162:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(67294),r=a(86010);const o={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:a,className:s}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,s),hidden:a},t)}},74866:(e,t,a)=>{a.d(t,{Z:()=>k});var n=a(87462),r=a(67294),o=a(86010),s=a(12466),l=a(16550),i=a(91980),d=a(67392),c=a(50012);function u(e){return function(e){return r.Children.map(e,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function p(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??u(a);return function(e){const t=(0,d.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:a}=e;const n=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,i._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})}),[o,n])]}function b(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,o=p(e),[s,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:o}))),[i,d]=h({queryString:a,groupId:n}),[u,b]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,o]=(0,c.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&o.set(e)}),[a,o])]}({groupId:n}),f=(()=>{const e=i??u;return m({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),b(e)}),[d,b,o]),tabValues:o}}var f=a(72389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:a,selectedValue:l,selectValue:i,tabValues:d}=e;const c=[],{blockElementScrollPositionUntilNextRender:u}=(0,s.o5)(),p=e=>{const t=e.currentTarget,a=c.indexOf(t),n=d[a].value;n!==l&&(u(t),i(n))},m=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const a=c.indexOf(e.currentTarget)+1;t=c[a]??c[0];break}case"ArrowLeft":{const a=c.indexOf(e.currentTarget)-1;t=c[a]??c[c.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},t)},d.map((e=>{let{value:t,label:a,attributes:s}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>c.push(e),onKeyDown:m,onClick:p},s,{className:(0,o.Z)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":l===t})}),a??t)})))}function v(e){let{lazy:t,children:a,selectedValue:n}=e;if(a=Array.isArray(a)?a:[a],t){const e=a.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function w(e){const t=b(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",g.tabList)},r.createElement(y,(0,n.Z)({},e,t)),r.createElement(v,(0,n.Z)({},e,t)))}function k(e){const t=(0,f.Z)();return r.createElement(w,(0,n.Z)({key:String(t)},e))}},5950:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>u});var n=a(87462),r=(a(67294),a(3905)),o=a(74866),s=a(85162);const l={title:"Models",id:"Model",description:"SQL models define a single target table or view.",sidebar_position:2,tags:["concepts","Models","sql","target"]},i=void 0,d={unversionedId:"concepts/project/Model",id:"concepts/project/Model",title:"Models",description:"SQL models define a single target table or view.",source:"@site/docs/concepts/project/models.md",sourceDirName:"concepts/project",slug:"/concepts/project/Model",permalink:"/concepts/project/Model",draft:!1,tags:[{label:"concepts",permalink:"/tags/concepts"},{label:"Models",permalink:"/tags/models"},{label:"sql",permalink:"/tags/sql"},{label:"target",permalink:"/tags/target"}],version:"current",sidebarPosition:2,frontMatter:{title:"Models",id:"Model",description:"SQL models define a single target table or view.",sidebar_position:2,tags:["concepts","Models","sql","target"]},sidebar:"defaultSidebar",previous:{title:"Pipelines",permalink:"/concepts/project/pipeline"},next:{title:"Gems",permalink:"/concepts/project/gems"}},c={},u=[{value:"Using Models in Prophecy",id:"using-models-in-prophecy",level:3},{value:"Models vs Pipelines",id:"models-vs-pipelines",level:3},{value:"dbt Core\u2122 Models",id:"dbt-core-models",level:3},{value:"What&#39;s next?",id:"whats-next",level:4}],p={toc:u},m="wrapper";function h(e){let{components:t,...l}=e;return(0,r.kt)(m,(0,n.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Data Modeling")," refers to the shaping of your data from the raw state all the way to a transformed final state. Data engineers are typically responsible for building tables that represent source data, transforming the data and saving as intermediate tables/views, and building final tables that can be queried by a BI tool and drive decision making for an organization."),(0,r.kt)("p",null,"Typically business logic is stored as SQL files."),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"py",label:"myFile.sql",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"SELECT column1, column2, ...\nFROM table_name;\n")))),(0,r.kt)("p",null,"But defining the business logic in a SQL file is only the first step. Data-ready teams know that data Modeling with ad-hoc SQL statements is error-prone. How are the SQL files stored? How can the relationships between SQL files be understood? Or the relationships between tables? How is this logic shared? Can the business logic evolve as many team members contribute?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Teams shouldn't have to puzzle through storing, sharing, and understanding which tables rely on which others. Business logic should be reusable and referenceable in subsequent work.")),(0,r.kt)("p",null,"In Prophecy and dbt, ",(0,r.kt)("strong",{parentName:"p"},"Data Models")," are SQL statements that build a single table or view - and allow for better management."),(0,r.kt)("p",null,"Data models incorporate the step-by-step logic to transform raw data to some intermediate or final state. Each Model, stored as a ",(0,r.kt)("inlineCode",{parentName:"p"},".sql")," file on Git, is managed as software - with best practices like peer review and version control. The Model can include Common Table Expressions (CTEs) and ",(0,r.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/sql-models#building-dependencies-between-models"},"refer")," to other Models. Importantly, SQL statements with Prophecy and dbt are re-usable. When a Model is updated, any reference to that Model is likewise updated."),(0,r.kt)("p",null,"Here we explore how to use Models in Prophecy, adopting the concept and vernacular from dbt Core\u2122. Later, we'll see how to import dbt projects to Prophecy, or you can create a new Project and Models using Prophecy's drag-and-drop interface. After you've read this page, get hands on with Models in this getting-started ",(0,r.kt)("a",{parentName:"p",href:"/getting-started/sql-with-databricks#44-Develop-your-first-model"},"guide"),"."),(0,r.kt)("h3",{id:"using-models-in-prophecy"},"Using Models in Prophecy"),(0,r.kt)("p",null,"Prophecy displays Models using a lineage view, a visual view, and a code view."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"lineage-view",src:a(70982).Z,width:"2880",height:"1726"}),"\nOpen the HelloWorld_SQL Project. See the ",(0,r.kt)("strong",{parentName:"p"},"(1)Lineage")," for the HelloWorld_SQL Project pictured above. Each ",(0,r.kt)("strong",{parentName:"p"},"(2)Project")," contains folders of Models, ",(0,r.kt)("a",{parentName:"p",href:"/getting-started/sql-with-databricks#431-create-seeds"},"seeds"),", and sources. The Lineage provides a high level view of the Project's ",(0,r.kt)("strong",{parentName:"p"},"(3)Models")," with ",(0,r.kt)("strong",{parentName:"p"},"(4)dependencies")," displayed from left to right. The ",(0,r.kt)("inlineCode",{parentName:"p"},"customers")," Model depends on seed ",(0,r.kt)("inlineCode",{parentName:"p"},"raw_customers")," and Models ",(0,r.kt)("inlineCode",{parentName:"p"},"stg_orders")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"stg_payments"),". Click to open the ",(0,r.kt)("inlineCode",{parentName:"p"},"customers")," Model as shown in the figure below."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"model-view",src:a(95097).Z,width:"2880",height:"1726"}),"\nNow we can explore the ",(0,r.kt)("inlineCode",{parentName:"p"},"customers")," Model more closely. The Model is easy to understand with interchangable ",(0,r.kt)("strong",{parentName:"p"},"(1)visual")," and ",(0,r.kt)("strong",{parentName:"p"},"(2)code")," views. The visual view depicts each small step needed to move from the referenced tables/seeds/Models to the final ",(0,r.kt)("inlineCode",{parentName:"p"},"customers")," Model. Each transformation step or Common Table Expression (CTE) is called a ",(0,r.kt)("strong",{parentName:"p"},"(3)Gem")," in Prophecy."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"(4)",(0,r.kt)("inlineCode",{parentName:"strong"},"Aggregate"))," step is represented visually as an ",(0,r.kt)("inlineCode",{parentName:"p"},"Aggregate")," Gem and in code as the highlighted CTE code fragment. By popular demand, the visual and code formats are editable interchangeably, as illustrated ",(0,r.kt)("a",{parentName:"p",href:"/low-code-sql/"},"here.")," Visual developers and SQL coders can work together in the same project, and both types of edits are incorporated to the project when ",(0,r.kt)("a",{parentName:"p",href:"/metadata/Git#how-to-commit-changes"},"committed and merged"),"."),(0,r.kt)("h3",{id:"models-vs-pipelines"},"Models vs Pipelines"),(0,r.kt)("p",null,"If you\u2019re already familiar with Prophecy Pipelines, Models are very similar. The major difference is that each Pipeline can create an arbitrary number of outputs, whereas a Model only defines one output. Where Pipelines can exist only within Spark-based projects, Models can exist within SQL-based ones."),(0,r.kt)("p",null,"Like Pipelines, Models can be configured, committed and released to ",(0,r.kt)("a",{parentName:"p",href:"/metadata/Git"},"Git"),", according to software engineering best practices. More details on Model configuration coming soon!"),(0,r.kt)("h3",{id:"dbt-core-models"},"dbt Core\u2122 Models"),(0,r.kt)("p",null,"Prophecy uses dbt Core\u2122 as the underlying build system for SQL projects. Therefore, our concept of a Model is equivalent to dbt\u2019s. You can read more about dbt\u2019s Models and their properties ",(0,r.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/build/models"},"here.")," dbt supports two primary types of Models: SQL-based and Python-based. Today, Prophecy\u2019s visual interface supports SQL Models only, however, Python support is coming out soon. If you\u2019d like to define Python Models you can still use them within the code interface."),(0,r.kt)("h4",{id:"whats-next"},"What's next?"),(0,r.kt)("p",null,"Now that you have an understanding of data Models as defined by Prophecy and dbt, get hands on with Models in this getting started ",(0,r.kt)("a",{parentName:"p",href:"/getting-started/sql-with-databricks#44-develop-your-first-model"},"guide"),"."))}h.isMDXComponent=!0},70982:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/lineage-view-0c1713925db518e6783a8b746bfb7dab.png"},95097:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/model-view-98e2d6a7d717d5d8f6c290f59bc1f208.png"}}]);