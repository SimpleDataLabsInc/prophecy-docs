"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[52452],{28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var t=s(96540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}},90575:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"administration/self-hosted/self-hosted","title":"Self-hosted deployments","description":"Deploy Prophecy in your own VPC","source":"@site/docs/administration/self-hosted/self-hosted.md","sourceDirName":"administration/self-hosted","slug":"/administration/self-hosted/","permalink":"/administration/self-hosted/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"deployment","permalink":"/tags/deployment"},{"inline":true,"label":"installation","permalink":"/tags/installation"},{"inline":true,"label":"self-hosted","permalink":"/tags/self-hosted"}],"version":"current","frontMatter":{"title":"Self-hosted deployments","id":"self-hosted","description":"Deploy Prophecy in your own VPC","sidebar_class_name":"hidden","tags":["deployment","installation","self-hosted"]},"sidebar":"adminSidebar","previous":{"title":"SAML and SCIM","permalink":"/administration/authentication/saml-scim"},"next":{"title":"Installation via Helm","permalink":"/self-hosted-helm-installation"}}');var i=s(74848),r=s(28453);const a={title:"Self-hosted deployments",id:"self-hosted",description:"Deploy Prophecy in your own VPC",sidebar_class_name:"hidden",tags:["deployment","installation","self-hosted"]},o=void 0,l={},d=[{value:"Cloud Provider",id:"cloud-provider",level:2},{value:"Installation",id:"installation",level:2},{value:"Logging / Metrics",id:"logging--metrics",level:2},{value:"Prophecy services",id:"prophecy-services",level:2},{value:"Running Services API",id:"running-services-api",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Self-hosted Prophecy deployments run inside a customer VPC, rather than a Prophecy VPC. These deployments are maintained by the customer, rather than by Prophecy. Once Prophecy is installed, you'll have to manually perform upgrades, backups, restores, etc."}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["While Prophecy continues to support existing customers with self-hosted deployments, new self-hosted installations of Prophecy are ",(0,i.jsx)(n.strong,{children:"discouraged"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"cloud-provider",children:"Cloud Provider"}),"\n",(0,i.jsx)(n.p,{children:"Prophecy is written as a set of microservices that run on a Kubernetes cluster. Our recommended platforms to run Kubernetes are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Amazon Web Services managed EKS"}),"\n",(0,i.jsx)(n.li,{children:"Microsoft Azure managed AKS"}),"\n",(0,i.jsx)(n.li,{children:"Google Cloud Platform managed GKE"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.p,{children:"There are a couple of ways to install a self-hosted Prophecy deployment:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Installation via ",(0,i.jsx)(n.a,{href:"https://helm.sh/docs/intro/quickstart/",children:"Helm"})]}),"\n",(0,i.jsx)(n.li,{children:"Installation via Marketplaces"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For personalized help with installation, contact ",(0,i.jsx)(n.a,{href:"https://prophecy.zendesk.com/",children:"support"}),". If applicable, send along your ",(0,i.jsx)(n.a,{href:"/administration/self-hosted/download-logs",children:"logs"})," to help us troubleshoot."]}),"\n",(0,i.jsx)(n.h2,{id:"logging--metrics",children:"Logging / Metrics"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Prophecy comes with a built-in lightweight infrastructure for monitoring (based on Loki & Grafana)\nand logging (based on Prometheus, Grafana and alert-manager, etc.)."}),"\n",(0,i.jsx)(n.li,{children:"You can optionally redirect logs and metrics to your own logging services."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prophecy-services",children:"Prophecy services"}),"\n",(0,i.jsx)(n.p,{children:"You can use the Running Services API to retrieve the status of your Prophecy services. 200 denotes that the service is running, while 404 denotes that the service is disabled. Any other error code denotes a service failure."}),"\n",(0,i.jsx)(n.h3,{id:"running-services-api",children:"Running Services API"}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"curl 'https://<prophecy-env-url>/athena/api/v1/prophecy/status'\n"})}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Response:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n "anyServiceDown": false,\n "data": {\n  "services": [\n   {\n    "isPrimary": true,\n    "name": "App",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": true,\n    "name": "Metadata",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Pipeline/Jobs Editor",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Prophecy Managed Git",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Execution",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "CI / CD",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Lineage",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Search",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false,\n    "name": "Kafka",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false\n   },\n   {\n    "isPrimary": false,\n    "name": "Transpiler",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false,\n    "name": "Data Quality",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false,\n    "name": "Data Copilot",\n    "statusCode": 404\n   },\n   {\n    "isPrimary": false,\n    "name": "Sandboxing",\n    "statusCode": 200\n   },\n   {\n    "isPrimary": false,\n    "name": "Database Connectivity",\n    "statusCode": 200\n   }\n  ]\n },\n "isProphecyDown": false,\n "success": true\n}\n'})})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);