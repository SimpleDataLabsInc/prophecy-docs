"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[77368],{28453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>o});var d=i(96540);const t={},r=d.createContext(t);function s(n){const e=d.useContext(r);return d.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),d.createElement(r.Provider,{value:e},n.children)}},33095:(n,e,i)=>{i.d(e,{A:()=>d});const d=i.p+"assets/images/window_eg_ranking-50daead83be3eaf26cb68c15845a722b.png"},61787:(n,e,i)=>{i.d(e,{A:()=>d});const d=i.p+"assets/images/window_eg_analytical-f61582f4e18249a8c33cf5a3210326e4.png"},90950:(n,e,i)=>{i.d(e,{A:()=>d});const d=i.p+"assets/images/window_eg_agg-8a34b6829ab9ac882ccba44db524a903.png"},94951:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>c});const d=JSON.parse('{"id":"SQL/gems/transform/window-function","title":"WindowFunction","description":"Aggregate and transform Windowed data","source":"@site/docs/SQL/gems/transform/window-function.md","sourceDirName":"SQL/gems/transform","slug":"/SQL/gems/transform/window-function","permalink":"/SQL/gems/transform/window-function","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"gems","permalink":"/tags/gems"},{"inline":true,"label":"window","permalink":"/tags/window"},{"inline":true,"label":"aggregate","permalink":"/tags/aggregate"}],"version":"current","frontMatter":{"title":"WindowFunction","id":"window-function","description":"Aggregate and transform Windowed data","tags":["gems","window","aggregate"]},"sidebar":"mySidebar","previous":{"title":"Unpivot","permalink":"/SQL/gems/transform/unpivot"},"next":{"title":"Join","permalink":"/SQL/gems/data-joins"}}');var t=i(74848),r=i(28453);const s={title:"WindowFunction",id:"window-function",description:"Aggregate and transform Windowed data",tags:["gems","window","aggregate"]},o=void 0,a={},c=[{value:"Parameters",id:"parameters",level:3},{value:"Examples",id:"examples",level:3},{value:"Ranking Functions with Window",id:"ranking-functions-with-window",level:4},{value:"Analytical Functions with Window",id:"analytical-functions-with-window",level:4},{value:"Aggregate Functions with Window",id:"aggregate-functions-with-window",level:4}];function l(n){const e={admonition:"admonition",code:"code",h3:"h3",h4:"h4",hr:"hr",img:"img",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{children:(0,t.jsx)("span",{class:"badge",children:"SQL Gem"})}),"\n",(0,t.jsxs)(e.p,{children:["The WindowFunction lets you define a ",(0,t.jsx)(e.strong,{children:"WindowSpec"})," and apply window functions on a model."]}),"\n",(0,t.jsx)(e.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Parameter"}),(0,t.jsx)(e.th,{children:"Description"}),(0,t.jsx)(e.th,{children:"Required"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Model"}),(0,t.jsx)(e.td,{children:"Input Source"}),(0,t.jsx)(e.td,{children:"True"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Target column"}),(0,t.jsx)(e.td,{children:"Output Column name"}),(0,t.jsx)(e.td,{children:"True"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Source expression"}),(0,t.jsx)(e.td,{children:"Window function expression to perform over the created Window"}),(0,t.jsx)(e.td,{children:"True"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Order columns"}),(0,t.jsxs)(e.td,{children:["Columns to order by in Window. Must be a numeric type column if a ",(0,t.jsx)(e.code,{children:"Range Frame"})," is selected"]}),(0,t.jsxs)(e.td,{children:["Required when ",(0,t.jsx)(e.code,{children:"Source expression"})," has a Ranking/Analytical function ",(0,t.jsx)(e.strong,{children:"OR"})," when ",(0,t.jsx)(e.code,{children:"Range Frame"})," is selected"]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Partition column"}),(0,t.jsx)(e.td,{children:"Column to partition by in Window"}),(0,t.jsx)(e.td,{children:"False"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Row frame"}),(0,t.jsx)(e.td,{children:"Row based frame boundary to apply on Window"}),(0,t.jsx)(e.td,{children:"False"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Range frame"}),(0,t.jsx)(e.td,{children:"Range based frame boundary to apply on Window"}),(0,t.jsx)(e.td,{children:"False"})]})]})]}),"\n",(0,t.jsx)(e.admonition,{type:"info",children:(0,t.jsxs)(e.p,{children:["When ",(0,t.jsx)(e.code,{children:"Order Columns"})," are not defined, an unbounded window frame ",(0,t.jsx)(e.code,{children:"(rowFrame, unboundedPreceding, unboundedFollowing)"})," is used by default."]})}),"\n",(0,t.jsx)(e.admonition,{type:"info",children:(0,t.jsxs)(e.p,{children:["When ",(0,t.jsx)(e.code,{children:"Order Columns"})," are defined, a growing window frame ",(0,t.jsx)(e.code,{children:"(rangeFrame, unboundedPreceding, currentRow)"})," is used by default."]})}),"\n",(0,t.jsx)(e.h3,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h4,{id:"ranking-functions-with-window",children:"Ranking Functions with Window"}),"\n",(0,t.jsxs)(e.p,{children:["Examples of ranking functions are: ",(0,t.jsx)(e.code,{children:"row_number()"}),", ",(0,t.jsx)(e.code,{children:"rank()"}),", ",(0,t.jsx)(e.code,{children:"dense_rank()"})," and ",(0,t.jsx)(e.code,{children:"ntile()"})]}),"\n",(0,t.jsx)(e.admonition,{type:"info",children:(0,t.jsxs)(e.p,{children:["Only the default window frame ",(0,t.jsx)(e.code,{children:"(rowFrame, unboundedPreceding, currentRow)"})," can be used with Ranking functions"]})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"Example usage of Window - Ranking",src:i(33095).A+"",width:"1920",height:"1080"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h4,{id:"analytical-functions-with-window",children:"Analytical Functions with Window"}),"\n",(0,t.jsxs)(e.p,{children:["Examples of analytical functions are: ",(0,t.jsx)(e.code,{children:"lead()"}),", ",(0,t.jsx)(e.code,{children:"lag()"}),", ",(0,t.jsx)(e.code,{children:"cume_dist()"}),", etc."]}),"\n",(0,t.jsx)(e.admonition,{type:"info",children:(0,t.jsxs)(e.p,{children:["Window frame for ",(0,t.jsx)(e.code,{children:"lead()"})," and ",(0,t.jsx)(e.code,{children:"lag()"})," can not be specified."]})}),"\n",(0,t.jsx)(e.admonition,{type:"info",children:(0,t.jsxs)(e.p,{children:["Only the default window frame ",(0,t.jsx)(e.code,{children:"(rangeFrame, unboundedPreceding, currentRow)"})," can be used with ",(0,t.jsx)(e.code,{children:"cume_dist()"})]})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"Example usage of Window - Analytical",src:i(61787).A+"",width:"1920",height:"1080"})}),"\n",(0,t.jsx)(e.h4,{id:"aggregate-functions-with-window",children:"Aggregate Functions with Window"}),"\n",(0,t.jsxs)(e.p,{children:["Examples of analytical functions are: ",(0,t.jsx)(e.code,{children:"min()"}),", ",(0,t.jsx)(e.code,{children:"max()"}),", ",(0,t.jsx)(e.code,{children:"avg()"}),", etc."]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"Example usage of Window - Aggregate",src:i(90950).A+"",width:"1847",height:"1016"})})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}}}]);