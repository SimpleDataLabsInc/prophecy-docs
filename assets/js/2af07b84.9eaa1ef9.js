"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[80953],{27238:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>p,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"api/trigger-pipeline/rest-api-gem-trigger","title":"Use RestAPI gem to trigger a pipeline","description":"Trigger pipeline execution using RestAPI gem","source":"@site/docs/api/trigger-pipeline/rest-api-gem-trigger.md","sourceDirName":"api/trigger-pipeline","slug":"/api/trigger-pipeline/rest-api-gem-trigger","permalink":"/api/trigger-pipeline/rest-api-gem-trigger","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Use RestAPI gem to trigger a pipeline","sidebar_label":"Use RestAPI gem","id":"rest-api-gem-trigger","description":"Trigger pipeline execution using RestAPI gem","tags":[]},"sidebar":"apiSidebar","previous":{"title":"Trigger Pipeline API","permalink":"/api/trigger-pipeline/trigger-pipeline-api"}}');var t=n(74848),s=n(28453);const o={title:"Use RestAPI gem to trigger a pipeline",sidebar_label:"Use RestAPI gem",id:"rest-api-gem-trigger",description:"Trigger pipeline execution using RestAPI gem",tags:[]},p=void 0,l={},c=[{value:"Usage",id:"usage",level:3},{value:"URL",id:"url",level:4},{value:"Method",id:"method",level:4},{value:"Body",id:"body",level:4},{value:"Headers",id:"headers",level:4},{value:"Monitoring",id:"monitoring",level:3}];function a(e){const i={a:"a",admonition:"admonition",code:"code",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.p,{children:"In Prophecy, you can trigger pipeline inside a project using the RestAPI gem. This page describes how to configure the RestAPI gem for this use case."}),"\n",(0,t.jsx)(i.h3,{id:"usage",children:"Usage"}),"\n",(0,t.jsxs)(i.p,{children:["To call the ",(0,t.jsx)(i.a,{href:"/api/trigger-pipeline/trigger-pipeline-api",children:"Trigger Pipeline API"})," using the RestAPI gem, follow the example configuration."]}),"\n",(0,t.jsx)(i.admonition,{type:"info",children:(0,t.jsx)(i.p,{children:"The Trigger Deployed Pipeline endpoint does not require an input, an output, or params."})}),"\n",(0,t.jsx)(i.h4,{id:"url",children:"URL"}),"\n",(0,t.jsx)(i.p,{children:"Use the following endpoint to trigger a pipeline."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"https://app.prophecy.io/api/trigger/pipeline\n"})}),"\n",(0,t.jsx)(i.h4,{id:"method",children:"Method"}),"\n",(0,t.jsx)(i.p,{children:"This endpoint uses the POST method."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"POST\n"})}),"\n",(0,t.jsx)(i.h4,{id:"body",children:"Body"}),"\n",(0,t.jsx)(i.p,{children:"The body provides all of the information needed to identify the correct pipeline to trigger."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:'{ "fabricId": <fabricID>, "pipelineName": "customer_orders", "parameters": {}, "projectId": "<projectID>" }\n'})}),"\n",(0,t.jsx)(i.h4,{id:"headers",children:"Headers"}),"\n",(0,t.jsxs)(i.p,{children:["These headers provide the content type of the body (JSON) and your ",(0,t.jsx)(i.a,{href:"/api/",children:"Prophecy access token"})," to authenticate the request."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"Content-Type: application/json\n\nX-AUTH-TOKEN: <token-secret>\n"})}),"\n",(0,t.jsxs)(i.admonition,{type:"tip",children:[(0,t.jsxs)(i.p,{children:["We recommend that you ",(0,t.jsx)(i.a,{href:"/administration/fabrics/prophecy-fabrics/#secrets",children:"store your Prophecy access token as a secret"})," in your fabric."]}),(0,t.jsxs)(i.p,{children:["You can reference the secret by clicking ",(0,t.jsx)(i.strong,{children:"+ > Secret"})," in the value field."]}),(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"img",src:n(91434).A+"",width:"2128",height:"458"})})]}),"\n",(0,t.jsx)(i.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,t.jsxs)(i.p,{children:["When you run the pipeline that includes the RestAPI gem, you will see the following in the ",(0,t.jsx)(i.a,{href:"/analysts/monitoring#run-history",children:"Run History"})," interface:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["A record of the pipeline run including the RestAPI gem that has the type ",(0,t.jsx)(i.strong,{children:"Pipeline Run"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["A record of the triggered pipeline run that has the type ",(0,t.jsx)(i.strong,{children:"API Run"}),"."]}),"\n"]})]})}function d(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>p});var r=n(96540);const t={},s=r.createContext(t);function o(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function p(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:i},e.children)}},91434:(e,i,n)=>{n.d(i,{A:()=>r});const r=n.p+"assets/images/restapi-secret-3886fd1cfe8917390df5a9fbe977e274.png"}}]);