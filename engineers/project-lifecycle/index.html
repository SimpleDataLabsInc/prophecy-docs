<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-getting-started/tutorials/spark-with-databricks" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Project lifecycle for Engineers | Prophecy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.prophecy.io/engineers/project-lifecycle"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Project lifecycle for Engineers | Prophecy"><meta data-rh="true" name="description" content="Getting started with Spark on Databricks"><meta data-rh="true" property="og:description" content="Getting started with Spark on Databricks"><link data-rh="true" rel="icon" href="/img/favicon2.png"><link data-rh="true" rel="canonical" href="https://docs.prophecy.io/engineers/project-lifecycle"><link data-rh="true" rel="alternate" href="https://docs.prophecy.io/engineers/project-lifecycle" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.prophecy.io/engineers/project-lifecycle" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Prophecy" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/assets/css/styles.16451571.css">
<script src="/assets/js/runtime~main.1f4a7428.js" defer="defer"></script>
<script src="/assets/js/main.29d909ef.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Prophecy Logo.png" alt="Prophecy Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Prophecy Logo White.png" alt="Prophecy Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/administration">Administration</a><a href="https://transpiler.docs.prophecy.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Transpiler</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/getting-help">Help</a><a href="mailto:docs@prophecy.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Feedback</a><a href="http://app.prophecy.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div id="inkeep-shadowradix-:R1spa5:" style="display:contents"></div><span></span></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Prophecy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/getting-started/">Getting started</a><button aria-label="Collapse sidebar category &#x27;Getting started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/fabrics">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/quick-start">Quick starts</a><button aria-label="Expand sidebar category &#x27;Quick starts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/tutorials">Tutorials</a><button aria-label="Collapse sidebar category &#x27;Tutorials&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/analysts/project-lifecycle">Project lifecycle for Analysts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/engineers/project-lifecycle">Project lifecycle for Engineers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineers/data-modeling">Data modeling for Engineers</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-copilot">Data Copilot</a><button aria-label="Expand sidebar category &#x27;Data Copilot&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/release_notes/">Release notes</a><button aria-label="Expand sidebar category &#x27;Release notes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="sidebar-divider"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-title">Analysts <span class="badge">Preview</span></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/pipeline-development">Pipeline development</a><button aria-label="Expand sidebar category &#x27;Pipeline development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/versioning">Versioning</a><button aria-label="Expand sidebar category &#x27;Versioning&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analysts/scheduling">Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analysts/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analysts/extensibility">Extensibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/business-applications">Apps</a><button aria-label="Expand sidebar category &#x27;Apps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="sidebar-divider"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-title">Engineers</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Spark/">Pipeline development</a><button aria-label="Expand sidebar category &#x27;Pipeline development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/data-modeling/">Model development</a><button aria-label="Expand sidebar category &#x27;Model development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/lineage/">Lineage</a><button aria-label="Expand sidebar category &#x27;Lineage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/ci-cd/reliable-ci-cd">CI/CD</a><button aria-label="Expand sidebar category &#x27;CI/CD&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Orchestration/">Orchestration</a><button aria-label="Expand sidebar category &#x27;Orchestration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/extensibility/">Extensibility</a><button aria-label="Expand sidebar category &#x27;Extensibility&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/getting-started/"><span itemprop="name">Getting started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/tutorials"><span itemprop="name">Tutorials</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Project lifecycle for Engineers</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Project lifecycle for Engineers</h1></header><p>When you build pipelines in Prophecy, you can connect to a variety of execution engines to run those pipelines. Complete the tutorial below to learn about using Databricks to compute with Spark and try it yourself!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<p>For this tutorial, you will need:</p>
<ul>
<li>A Prophecy account.</li>
<li>A Databricks account.</li>
<li>Permission to create Spark clusters in Databricks.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-databricks-spark-fabric">Create a Databricks Spark fabric<a href="#create-a-databricks-spark-fabric" class="hash-link" aria-label="Direct link to Create a Databricks Spark fabric" title="Direct link to Create a Databricks Spark fabric">​</a></h2>
<p>A <a href="/fabrics">fabric</a> in Prophecy is an execution environment. In this tutorial, you&#x27;ll see how to use Databricks as your execution environment in Prophecy. Let&#x27;s begin!</p>
<ol>
<li>Open Prophecy.</li>
<li>Click on the <strong>Create Entity</strong> button in the left navigation bar.</li>
<li>Select the <strong>Fabric</strong> tile.</li>
<li>Give the fabric any name, like <code>DatabricksTutorial</code>.</li>
<li>Select the team that will be able to use the fabric. For this tutorial, you might want to select your personal team. (It will match your individual user email.)</li>
<li>Click <strong>Continue</strong>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Databricks fabric" src="/assets/images/spark-databricks-fabric-87b1232a4e89fa765e05a0f54be7fd95.png" width="2620" height="1488" class="img_ev3q"></p>
<p>Now, you will enter your Databricks credentials.</p>
<ol>
<li>Choose <strong>Spark</strong> as the Provider Type.</li>
<li>Select <strong>Databricks</strong> under Provider.</li>
<li>Enter your Databricks Workspace URL. This will be the URL that you use to open your Databricks Workspace.</li>
<li>For this tutorial, we&#x27;ll use a <strong>Personal Access Token</strong> for authentication. Visit the Databricks documentation to learn how to <a href="https://docs.databricks.com/en/dev-tools/auth/pat.html" target="_blank" rel="noopener noreferrer">generate a personal access token</a>.</li>
<li>Paste your Databricks Personal Access Token.</li>
<li>Now, click <strong>Test Connection</strong>. This test must be successful to continue with fabric creation.</li>
<li>After the test succeeds, click <strong>Continue</strong>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Databricks credential" src="/assets/images/spark-databricks-credentials-96dc280e488afac55811f442b6266604.png" width="2620" height="1644" class="img_ev3q"></p>
<p>You are almost done setting up your Databricks fabric!</p>
<ol>
<li>We&#x27;ll skip the Connection section for now. Click <strong>Continue</strong>.</li>
<li>We don&#x27;t need to add any secrets at this point. Click <strong>Complete</strong>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-prophecy-project">Create a Prophecy project<a href="#create-a-prophecy-project" class="hash-link" aria-label="Direct link to Create a Prophecy project" title="Direct link to Create a Prophecy project">​</a></h2>
<p>After you create your first Spark fabric, you&#x27;ll see a <a href="/projects">project</a> in Prophecy called HelloWorld. If you just want to play around with Prophecy, you can start there. However, for the purpose of this tutorial, let&#x27;s build a new project from scratch.</p>
<ol>
<li>Once again, click on the <strong>Create Entity</strong> button in the left navigation bar.</li>
<li>Hover over the <strong>Project</strong> tile and select <strong>Create</strong>.</li>
<li>Give your project a name.</li>
<li>For the Project Type, choose <strong>Spark/Python (PySpark)</strong>.</li>
<li>Select the team that will have access to your project. Again, you might want to use your personal team.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Prophecy project creation" src="/assets/images/spark-databricks-project-8c637dcb301888023b9ba4cafe6af2c3.png" width="2620" height="1488" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-git-repository">Set up Git repository<a href="#set-up-git-repository" class="hash-link" aria-label="Direct link to Set up Git repository" title="Direct link to Set up Git repository">​</a></h3>
<p>Prophecy uses <a href="/ci-cd/git/">Git</a> for version control. Each project in Prophecy is stored as code in its own repository or folder in a repository. For this project, we suggest that you use <strong>Prophecy-managed Git</strong>. When you are ready to use Prophecy for a production use case, <a href="/ci-cd/git/#Git-credentials">connect to an external Git provider</a>. This provides extra functionality for you to work with.</p>
<p><img decoding="async" loading="lazy" alt="Prophecy project Git connection" src="/assets/images/spark-databricks-git-f6d24a45765026e8f10702c14a9ccfa0.png" width="2620" height="1488" class="img_ev3q"></p>
<p>Once you have set up your Git repository, click <strong>Continue</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="select-project-dependencies">Select project dependencies<a href="#select-project-dependencies" class="hash-link" aria-label="Direct link to Select project dependencies" title="Direct link to Select project dependencies">​</a></h3>
<p>In the Project Dependencies section, you have the option to include <a href="/engineers/dependencies">additional functionality</a> in your project. A few dependencies are added by default, and these are all we will need to get started. Click <strong>Complete</strong>, and then <strong>View Project</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-metadata-and-editor">Project metadata and editor<a href="#project-metadata-and-editor" class="hash-link" aria-label="Direct link to Project metadata and editor" title="Direct link to Project metadata and editor">​</a></h3>
<p>You should see the project metadata page. Project metadata includes information about the contents, dependencies, settings, and more related to your project. We want to start editing the project, so click <strong>Open in Editor</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="develop-a-pipeline">Develop a pipeline<a href="#develop-a-pipeline" class="hash-link" aria-label="Direct link to Develop a pipeline" title="Direct link to Develop a pipeline">​</a></h2>
<p>You should now see your empty project. Let&#x27;s add a pipeline!</p>
<ol>
<li>To get started, click the <strong>Create Pipeline</strong> button.</li>
<li>Create a new Git branch where you will begin developing this pipeline.</li>
<li>Give the pipeline a name, like <code>dev</code>.</li>
<li>Choose <strong>Batch</strong> mode.</li>
<li>Click <strong>Create New</strong>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Create a pipeline" src="/assets/images/spark-databricks-create-pipeline-4e4b5de59df1a7db63d0c545fd21a072.png" width="2620" height="1488" class="img_ev3q"></p>
<p>Next, we can start building the pipeline. If you want to run the pipeline as you develop it, you need to attach your Databricks fabric now.</p>
<ol>
<li>In the upper right corner of the pipeline editor, click on the <strong>Attach a cluster</strong> dropdown.</li>
<li>Select the fabric you created earlier.</li>
<li>Choose a cluster to attach to. If you don&#x27;t have any clusters, or if your clusters aren&#x27;t running, you can choose to create a new cluster from the Prophecy UI.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Attach cluster" src="/assets/images/spark-databricks-cluster-1dc4fff38be9ddaca31e3bdfce5d20f5.png" width="2620" height="1488" class="img_ev3q"></p>
<p>The cluster may take some time to start up. Once the cluster is up and running, you can move on to the next section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="source-gem">Source gem<a href="#source-gem" class="hash-link" aria-label="Direct link to Source gem" title="Direct link to Source gem">​</a></h3>
<p>The first thing we need in the pipeline is a data source.</p>
<p>When you are connected to a Databricks fabric, you can browse the Databricks catalogs in the <strong>Environment</strong> tab of the left sidebar. From here, you can drag and drop tables onto the pipeline canvas. To make things easy, we&#x27;ll use one of Databricks&#x27; sample tables.</p>
<ol>
<li>Open the <strong>Environment</strong> tab of the left sidebar.</li>
<li>Select the <strong>samples</strong> catalog.</li>
<li>Under <strong>tpch &gt; Tables</strong>, click the <strong>plus</strong> sign next to the <strong>orders</strong> table.</li>
<li>In the dialog, choose <strong>Source</strong> gem and name the gem. Then, click <strong>Add</strong>.</li>
<li>A <a href="/Spark/gems/source-target/">Source</a> gem should be added to the pipeline canvas.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Attach cluster" src="/assets/images/spark-databricks-source-523673691779c31322c090db38cb14bb.png" width="2620" height="1488" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reformat-gem">Reformat gem<a href="#reformat-gem" class="hash-link" aria-label="Direct link to Reformat gem" title="Direct link to Reformat gem">​</a></h3>
<p>Next, let&#x27;s add a new column to the dataset using the <a href="/Spark/gems/transform/reformat">Reformat</a> gem to extract the month and year from the order date.</p>
<ol>
<li>Click on <strong>Transformations</strong> to see the transformation gems.</li>
<li>Select <strong>Reformat</strong>. This adds the gem to the canvas.</li>
<li>Connect the <strong>Source</strong> gem output to the <strong>Reformat</strong> gem input.</li>
<li>Hover the <strong>Reformat</strong> gem and click <strong>Open</strong>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Reformat gem" src="/assets/images/spark-databricks-reformat-gem-e61c927d7aad5670a882fd7c93ede01c.png" width="2620" height="1488" class="img_ev3q"></p>
<p>Add the following configurations:</p>
<ol>
<li>Hover <strong>in0<!-- -->:tpch_orders</strong> and click <strong>Add 9 columns</strong>.</li>
<li>In the next available row, type <code>ordermonth</code> in the <strong>Target Column</strong>.</li>
<li>In the <strong>Expression</strong> cell, paste <code>month(o_orderdate)</code>.</li>
<li>In the next available row, type <code>orderyear</code> as the target column and <code>year(o_orderdate)</code> as the expression.</li>
<li>Review the new output schema in the <strong>Output</strong> tab of the gem.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Reformat configuration" src="/assets/images/spark-databricks-reformat-48bcaeccd4a4f3e96258404e2ad4d458.png" width="2620" height="1488" class="img_ev3q"></p>
<p>To preview the output of the gem:</p>
<ol>
<li>Click <strong>Run</strong> in the top right corner. This will execute the pipeline up to and including the gem.</li>
<li>You&#x27;ll be able to see a sample output dataset under <strong>Data</strong> in the gem footer.</li>
<li>If you <strong>Save</strong> and close the gem, you will also be able to see a new small icon in the output of the Reformat gem. You can click on this to open the <a href="/engineers/execution">interim data sample</a>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Reformat preview" src="/assets/images/spark-databricks-reformat-data-5503f7b39d667a3ad5f7063663eaac38.png" width="2620" height="1488" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><ul>
<li>To learn more about running pipelines, visit <a href="/engineers/execution">Execution</a>.</li>
<li>To learn more about Spark SQL expressions in gems, visit <a href="/Spark/gems/expression-builder">Expression Builder</a>.</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aggregate-gem">Aggregate gem<a href="#aggregate-gem" class="hash-link" aria-label="Direct link to Aggregate gem" title="Direct link to Aggregate gem">​</a></h3>
<p>Another common gem to use is the <a href="/Spark/gems/transform/aggregate">Aggregate</a> gem. Let&#x27;s use it to find the total sales amount per month each year.</p>
<ol>
<li>Select <strong>Transformations &gt; Aggregate</strong> to add the Aggregate gem to the canvas.</li>
<li>Connect the output of <strong>Reformat</strong> to the input of <strong>Aggregate</strong>. Then, open the Aggregate gem.</li>
<li>Add the <strong>o_totalprice</strong> column to the Aggregate table.</li>
<li>Next to amount, write <code>sum(o_totalprice)</code> as the expression.</li>
<li>Switch to the <strong>Group By</strong> tab, and add the <strong>orderyear</strong> and <strong>ordermonth</strong> columns.</li>
<li><strong>Save</strong> the gem.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Aggregate gem configuration" src="/assets/images/spark-databricks-aggregate-a0d659eabfa5b045462170b805ac10d2.png" width="2812" height="900" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="target-gem">Target gem<a href="#target-gem" class="hash-link" aria-label="Direct link to Target gem" title="Direct link to Target gem">​</a></h3>
<p>Once you know how to use a couple of gems, you can experiment with others in the pipeline. When you are finished transforming your data, you should write the final table to a target location:</p>
<ol>
<li>Select <strong>Source/Target &gt; Target</strong> to add the Target gem to the canvas.</li>
<li>Connect the Target gem after the <strong>Aggregate</strong> gem and open it.</li>
<li>Click <strong>+ New Dataset</strong> and give the new dataset a name.</li>
<li>Choose the format to save the dataset, then click <strong>Next</strong>.</li>
<li>Choose the location to save the dataset, then click <strong>Next</strong>.</li>
<li>In the Properties tab, under <strong>Write Mode</strong>, select <a href="/Spark/gems/source-target/file/delta#supported-write-modes">overwrite</a>.</li>
<li>Confirm the schema, and then click <strong>Create Dataset</strong>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Aggregate gem configuration" src="/assets/images/spark-databricks-target-37cbd72ac6307e14ca22a77b5ca18df8.png" width="2620" height="1488" class="img_ev3q"></p>
<p>To write the data, we should run the whole pipeline. Click on the big play button in the bottom right corner to do so.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="review-the-code">Review the code<a href="#review-the-code" class="hash-link" aria-label="Direct link to Review the code" title="Direct link to Review the code">​</a></h2>
<p>This far, we&#x27;ve only made changes in the visual editor of the project. If you want to see how your pipeline looks in code, switch to the <strong>Code</strong> view. Since we made a Python project in this tutorial, the code is in Python.</p>
<p><img decoding="async" loading="lazy" alt="Code view" src="/assets/images/spark-databricks-code-b8694b2a9e910b0552ce2e6a289c59e7.png" width="2620" height="1488" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-and-deploy-the-project">Release and deploy the project<a href="#release-and-deploy-the-project" class="hash-link" aria-label="Direct link to Release and deploy the project" title="Direct link to Release and deploy the project">​</a></h2>
<ol>
<li>In the project footer, click <strong>Commit Changes</strong>. This will open the Git dialog.</li>
<li>Review your changes and the auto-generated commit message. Then, select <strong>Commit</strong>.</li>
<li>Because there were no changes made to remote or source branches, we can skill the <strong>Pull</strong> step.</li>
<li>Merge your current branch into the main branch by clicking <strong>Merge</strong>.</li>
<li>Lastly, you can <strong>Release and Deploy</strong> your project. This makes a certain version of your project available for use (in a CI/CD workflow, for example).</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Release and deploy" src="/assets/images/spark-databricks-release-3caa5537720e702967c649d93a7ab4cd.png" width="2620" height="1488" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-databricks-job">Create a Databricks job<a href="#create-a-databricks-job" class="hash-link" aria-label="Direct link to Create a Databricks job" title="Direct link to Create a Databricks job">​</a></h2>
<p>If you want to schedule your pipeline to run periodically, you can create a job to do so.</p>
<ol>
<li>In the left sidebar, hover over <strong>Jobs</strong> and click the <strong>plus</strong> sign.</li>
<li>Fill in the required fields. For this project, use the <strong>Databricks</strong> scheduler.</li>
<li>Leave the schedule interval blank for now. This is where you define the job run frequency.</li>
<li>Click <strong>Create New</strong>.</li>
</ol>
<p>Now, you can configure the flow of your job.</p>
<ol>
<li>Click on <strong>Pipeline</strong> to add it to the canvas.</li>
<li>Under <strong>Pipeline to schedule</strong>, choose the pipeline you created in this tutorial.</li>
<li>Click <strong>Save</strong>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-the-job">Enable the job<a href="#enable-the-job" class="hash-link" aria-label="Direct link to Enable the job" title="Direct link to Enable the job">​</a></h3>
<p>To enable this job, you <strong>must</strong> complete the following two steps:</p>
<ol>
<li>Turn on the <strong>Enabled</strong> toggle.</li>
<li><strong>Release your project</strong>.</li>
</ol>
<p><strong>If you do not release your project, the Databricks scheduler will not see that you have enabled this job.</strong></p>
<p><img decoding="async" loading="lazy" alt="Enable job" src="/assets/images/spark-databricks-job-0813c26e42e467fd096063f63e7f4361.png" width="2620" height="1488" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s next<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s next" title="Direct link to What&#x27;s next">​</a></h2>
<p>Great work! You&#x27;ve successfully set up, developed, run, and deployed your first Spark project using a Databricks execution environment. Take a moment to appreciate your accomplishment!</p>
<p>To continue learning and expanding your skills with Prophecy, keep exploring our documentation and apply your newfound knowledge to address real-world business challenges!</p>
<p>If you ever encounter any difficulties, don&#x27;t hesitate to reach out to us (<a href="mailto:Contact.us@Prophecy.io" target="_blank" rel="noopener noreferrer">Contact.us@Prophecy.io</a>) or join our <a href="https://prophecy-io-support.slack.com/join/shared_invite/zt-moq3xzoj-~5MSJ6WPnZfz7bwsqWi8tQ#/shared-invite/email" target="_blank" rel="noopener noreferrer">Slack community</a> for assistance. We&#x27;re here to help!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/spark">Spark</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/databricks">Databricks</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/tutorial">tutorial</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/analysts/project-lifecycle"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Project lifecycle for Analysts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/engineers/data-modeling"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data modeling for Engineers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#create-a-databricks-spark-fabric" class="table-of-contents__link toc-highlight">Create a Databricks Spark fabric</a></li><li><a href="#create-a-prophecy-project" class="table-of-contents__link toc-highlight">Create a Prophecy project</a><ul><li><a href="#set-up-git-repository" class="table-of-contents__link toc-highlight">Set up Git repository</a></li><li><a href="#select-project-dependencies" class="table-of-contents__link toc-highlight">Select project dependencies</a></li><li><a href="#project-metadata-and-editor" class="table-of-contents__link toc-highlight">Project metadata and editor</a></li></ul></li><li><a href="#develop-a-pipeline" class="table-of-contents__link toc-highlight">Develop a pipeline</a><ul><li><a href="#source-gem" class="table-of-contents__link toc-highlight">Source gem</a></li><li><a href="#reformat-gem" class="table-of-contents__link toc-highlight">Reformat gem</a></li><li><a href="#aggregate-gem" class="table-of-contents__link toc-highlight">Aggregate gem</a></li><li><a href="#target-gem" class="table-of-contents__link toc-highlight">Target gem</a></li></ul></li><li><a href="#review-the-code" class="table-of-contents__link toc-highlight">Review the code</a></li><li><a href="#release-and-deploy-the-project" class="table-of-contents__link toc-highlight">Release and deploy the project</a></li><li><a href="#create-a-databricks-job" class="table-of-contents__link toc-highlight">Create a Databricks job</a><ul><li><a href="#enable-the-job" class="table-of-contents__link toc-highlight">Enable the job</a></li></ul></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s next</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Prophecy</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.prophecy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.prophecy.io/blogs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/prophecy-io-support/shared_invite/zt-1dwuvkakg-JcavnQuoukyZ3q5jkSkKCg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:docs@prophecy.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation feedback<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://app.prophecy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Prophecy Inc All Rights Reserved <a href="https://legal.prophecy.io/privacy" target="_blank">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>