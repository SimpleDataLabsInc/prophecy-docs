<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ci-cd/prophecy-build-tool/prophecy-build-tool" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Prophecy Build Tool (PBT) | Prophecy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.prophecy.io/engineers/prophecy-build-tool"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Prophecy Build Tool (PBT) | Prophecy"><meta data-rh="true" name="description" content="Prophecy Build tool"><meta data-rh="true" property="og:description" content="Prophecy Build tool"><link data-rh="true" rel="icon" href="/img/favicon2.png"><link data-rh="true" rel="canonical" href="https://docs.prophecy.io/engineers/prophecy-build-tool"><link data-rh="true" rel="alternate" href="https://docs.prophecy.io/engineers/prophecy-build-tool" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.prophecy.io/engineers/prophecy-build-tool" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"CI/CD","item":"https://docs.prophecy.io/engineers/ci-cd"},{"@type":"ListItem","position":2,"name":"Prophecy Build Tool (PBT)","item":"https://docs.prophecy.io/engineers/prophecy-build-tool"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="Prophecy" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/assets/css/styles.fb59e090.css">
<script src="/assets/js/runtime~main.b3e8d80f.js" defer="defer"></script>
<script src="/assets/js/main.535adff9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Prophecy Logo.png" alt="Prophecy Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Prophecy Logo White.png" alt="Prophecy Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/">Getting started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/guides/index">Guides</a><a class="navbar__item navbar__link" href="/api/">API</a><a href="https://transpiler.docs.prophecy.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Migration</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/getting-help">Help</a><a href="http://app.prophecy.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="custom-search-container" style="display:flex;align-items:center;gap:10px;height:30px;min-width:0;flex-shrink:1"><div style="flex:1 1 auto;min-width:0"><div id="inkeep-shadowradix-:R5spah:" style="display:contents"></div><span></span></div><div style="flex:0 0 auto"><div id="inkeep-shadowradix-:R6spah:" style="display:contents"></div><span></span></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/index">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="sidebar-divider"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-title">Analysts</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/administration/fabrics/prophecy-fabrics/">Fabric setup</a><button aria-label="Expand sidebar category &#x27;Fabric setup&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/pipeline-development">Pipeline development</a><button aria-label="Expand sidebar category &#x27;Pipeline development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/versioning">Versioning</a><button aria-label="Expand sidebar category &#x27;Versioning&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/scheduling">Scheduling</a><button aria-label="Expand sidebar category &#x27;Scheduling&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analysts/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/extensibility">Extensibility</a><button aria-label="Expand sidebar category &#x27;Extensibility&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/analysts/business-applications">Prophecy Apps</a><button aria-label="Expand sidebar category &#x27;Prophecy Apps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><span class="sidebar-divider"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item sidebar-title">Engineers</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/administration/fabrics">Fabric setup</a><button aria-label="Expand sidebar category &#x27;Fabric setup&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/pipeline-development">Pipeline development</a><button aria-label="Expand sidebar category &#x27;Pipeline development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/models">Models</a><button aria-label="Expand sidebar category &#x27;Models&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/lineage">Lineage</a><button aria-label="Expand sidebar category &#x27;Lineage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/engineers/ci-cd">CI/CD</a><button aria-label="Collapse sidebar category &#x27;CI/CD&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineers/git">Git</a><button aria-label="Expand sidebar category &#x27;Git&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engineers/unit-tests">Unit tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/engineers/data-diff">Data diff</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/engineers/deployment">Release and Deploy</a><button aria-label="Expand sidebar category &#x27;Release and Deploy&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/engineers/prophecy-build-tool">Prophecy Build Tool (PBT)</a><button aria-label="Collapse sidebar category &#x27;Prophecy Build Tool (PBT)&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineers/github-actions-prophecy-build-tool">PBT on GitHub Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/engineers/jenkins-prophecy-build-tool">PBT on Jenkins</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/orchestration">Orchestration</a><button aria-label="Expand sidebar category &#x27;Orchestration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/engineers/extensibility">Extensibility</a><button aria-label="Expand sidebar category &#x27;Extensibility&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/administration/project-types/">Project types</a><button aria-label="Expand sidebar category &#x27;Project types&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/engineers/ci-cd"><span>CI/CD</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Prophecy Build Tool (PBT)</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Prophecy Build Tool (PBT)</h1></header><div class="theme-admonition theme-admonition-info admonition_xJq3 alert" style="background-color:var(--ifm-color-secondary-contrast-background);box-shadow:none;border:1px solid #d1d5db"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><img src="/img/icon.png" alt="icon" style="width:20px;margin-right:5px;margin-top:5px;margin-bottom:8px"></span>Enterprise</div><div class="admonitionContent_BuS1"><p>Available for <a href="/getting-started/editions/">Enterprise Edition</a> only.</p></div></div>
<p>The <strong>Prophecy Build Tool (PBT)</strong> is a command-line utility for building, testing, validating, and deploying Prophecy-generated projects. The Prophecy Build Tool lets you integrate Prophecy <a href="/engineers/pipelines">pipelines</a> into existing CI/CD systems (such as GitHub Actions or Jenkins) and orchestration platforms (such as Databricks Workflows).</p>
<p>You can use the PBT to run the same set of tasks described in <a href="/engineers/deployment">Project release and deployment</a> from the command line or in a CI/CD script.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">‚Äã</a></h2>
<p>Using the Prophecy Build tool, you can:</p>
<ul>
<li>Build pipelines (all or a subset) in Prophecy projects (Scala and Python).</li>
<li>Unit test pipelines in Prophecy projects (Scala and Python).</li>
<li>Deploy jobs with built pipelines on Databricks.</li>
<li>Deploy jobs filtered by fabric IDs on Databricks.</li>
<li>Integrate with CI/CD tools like GitHub Actions.</li>
<li>Verify the project structure of Prophecy projects.</li>
<li>Deploy pipeline configurations.</li>
<li>Add Git tags to a deployment.</li>
<li>Set versions for PySpark projects.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">‚Äã</a></h2>
<ul>
<li>Python &gt;=3.7 (Recommended 3.9.13)</li>
<li>pip</li>
<li><code>pyspark</code> (Recommended 3.3.0)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">‚Äã</a></h2>
<p>To install the Prophecy Build Tool, run:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip3 install prophecy-build-tool</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integration-examples">Integration examples<a href="#integration-examples" class="hash-link" aria-label="Direct link to Integration examples" title="Direct link to Integration examples">‚Äã</a></h2>
<p><a href="/engineers/github-actions-prophecy-build-tool">GitHub Actions</a></p>
<p><a href="/engineers/jenkins-prophecy-build-tool">Jenkins</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">‚Äã</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage: pbt [OPTIONS] COMMAND [ARGS]...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --help  Show help.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  build     	Build Prophecy pipelines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  build-v2      Same as build but with additional options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy    	Deploy pipelines and jobs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy-v2     Same as deploy but with additional options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test      	Run unit tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validate  	Validate pipelines for diagnostics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  versioning	Add versions to PySpark pipelines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tag           Create a Git tag for the version in `pbt_project.yml`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">‚Äã</a></h2>
<p>Before using PBT with Databricks, set the following environment variables:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export DATABRICKS_HOST=&quot;https://example_databricks_host.cloud.databricks.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export DATABRICKS_TOKEN=&quot;exampledatabrickstoken&quot;</span><br></span></code></pre></div></div>
<p>These variables define the Databricks workspace and credentials used for building and deploying.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-pipelines">Build pipelines<a href="#build-pipelines" class="hash-link" aria-label="Direct link to Build pipelines" title="Direct link to Build pipelines">‚Äã</a></h2>
<p>The <code>build</code> command compiles all or specific pipelines within a Prophecy project.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt build --path /path/to/your/prophecy_project/</span><br></span></code></pre></div></div>
<p>You can also use a v2 version of the command, which adds an <code>--add-pom-python</code> option.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt build-v2 --path /path/to/your/prophecy_project/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-options">Build options<a href="#build-options" class="hash-link" aria-label="Direct link to Build options" title="Direct link to Build options">‚Äã</a></h3>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>--path TEXT</code></td><td><strong>Required.</strong> Path to the directory containing the <code>pbt_project.yml</code> file.</td></tr><tr><td><code>--pipelines TEXT</code></td><td>Comma-separated list of pipelines to build.</td></tr><tr><td><code>--ignore-build-errors</code></td><td>Continue even if parse errors occur; logs record details.</td></tr><tr><td><code>--ignore-parse-errors</code></td><td>Ignores any parsing errors in pipelines and returns success (<code>EXIT_CODE = 0</code>); refer to logs for details.</td></tr><tr><td><code>--add-pom-python</code></td><td>Available with <code>--build-v2</code>. Adds <code>pom.xml</code> and <code>MAVEN_COORDINATES</code> files to PySpark builds.</td></tr><tr><td><code>--help</code></td><td>Show help for this command.</td></tr></tbody></table>
<p>To build only specific pipelines:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt build --pipelines customers_orders,join_agg_sort --path /path/to/your/prophecy_project/</span><br></span></code></pre></div></div>
<p>To continue despite build or parsing errors:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt build --path /path/to/your/prophecy_project/ --ignore-build-errors --ignore-parse-errors</span><br></span></code></pre></div></div>
<p>If any pipeline fails to build, the Build tool exits with code 1 unless error-skipping flags are used.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-pipelines-and-jobs">Deploy pipelines and jobs<a href="#deploy-pipelines-and-jobs" class="hash-link" aria-label="Direct link to Deploy pipelines and jobs" title="Direct link to Deploy pipelines and jobs">‚Äã</a></h2>
<p>The <code>deploy</code> command builds and deploys Prophecy pipelines and jobs to your Databricks workspace.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt deploy --path /path/to/your/prophecy_project/ --release-version 1.0 --project-id 10</span><br></span></code></pre></div></div>
<p>PBT supports the <code>--release-version</code> and <code>--project-id</code> parameters, used to replace placeholders in your job definition file (<code>databricks-job.json</code>).</p>
<p>These values determine the DBFS path where artifacts are uploaded.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Use the project‚Äôs Prophecy ID (from its URL) and a unique release version for each deployment.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-deploy-output">Sample deploy output<a href="#sample-deploy-output" class="hash-link" aria-label="Direct link to Sample deploy output" title="Direct link to Sample deploy output">‚Äã</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Prophecy Build Tool v1.0.4.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Found 1 job: daily</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Found 1 pipeline: customers_orders (python)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Building 1 pipeline üö∞</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Building pipeline pipelines/customers_orders [1/1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úÖ Build complete!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deploying 1 job ‚è±</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Deploying job jobs/daily [1/1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Uploading customers_orders-1.0-py3-none-any.whl to dbfs:/FileStore/prophecy/artifacts/...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Updating existing job: daily</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úÖ Deployment completed successfully!</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-dependent-projects">Deploy dependent projects<a href="#deploy-dependent-projects" class="hash-link" aria-label="Direct link to Deploy dependent projects" title="Direct link to Deploy dependent projects">‚Äã</a></h3>
<p>Use <code>--dependent-projects-path</code> to include dependent Prophecy projects located in subdirectories.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt deploy --path /path/to/your/prophecy_project/ --release-version 1.0 --project-id 10 --dependent-projects-path /path/to/dependent/prophecy/projects</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-by-fabric-id">Deploy by fabric ID<a href="#deploy-by-fabric-id" class="hash-link" aria-label="Direct link to Deploy by fabric ID" title="Direct link to Deploy by fabric ID">‚Äã</a></h3>
<p>Use <code>--fabric-ids</code> to deploy jobs associated with specific Fabric IDs (helpful for multi-workspace environments).</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt deploy --fabric-ids 647,1527 --path /path/to/your/prophecy_project/</span><br></span></code></pre></div></div>
<p>You can find Fabric IDs in the Prophecy UI by visiting the Metadata page of a Fabric and checking its URL.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="skip-builds">Skip builds<a href="#skip-builds" class="hash-link" aria-label="Direct link to Skip builds" title="Direct link to Skip builds">‚Äã</a></h3>
<p>To deploy previously built pipelines without rebuilding:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt deploy --skip-builds --path /path/to/your/prophecy_project/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-specific-jobs">Deploy specific jobs<a href="#deploy-specific-jobs" class="hash-link" aria-label="Direct link to Deploy specific jobs" title="Direct link to Deploy specific jobs">‚Äã</a></h3>
<p>By default, all jobs are deployed. To deploy selected jobs, use <code>--job-ids</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt deploy --path /path/to/your/prophecy_project/ --job-ids &quot;TestJob1,TestJob2&quot;</span><br></span></code></pre></div></div>
<p>The Prophecy Build Tool automatically identifies and builds only the pipelines required by those jobs.</p>
<p>You can also use a v2 version of the command, which adds several options described in the table below.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt deploy-v2 --path /path/to/your/prophecy_project/ --job-ids &quot;TestJob1,TestJob2&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-options-summary">Deploy options summary<a href="#deploy-options-summary" class="hash-link" aria-label="Direct link to Deploy options summary" title="Direct link to Deploy options summary">‚Äã</a></h3>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>--path TEXT</code></td><td><strong>Required.</strong> Path containing the <code>pbt_project.yml</code> file.</td></tr><tr><td><code>--dependent-projects-path TEXT</code></td><td>Path containing dependent Prophecy projects.</td></tr><tr><td><code>--release-version TEXT</code></td><td>Release version tag for this deployment.</td></tr><tr><td><code>--project-id TEXT</code></td><td>In <code>deploy</code>, Prophecy project ID (used to replace placeholders). In <code>deploy-v2</code>, path to the directory containing the <code>pbt_project.yml</code> file.</td></tr><tr><td><code>--prophecy-url TEXT</code></td><td>Prophecy base URL for deployment. Removed in <code>build-v2</code>.</td></tr><tr><td><code>--fabric-ids TEXT</code></td><td>Comma-separated Fabric IDs to filter jobs.</td></tr><tr><td><code>--skip-builds</code></td><td>Skip building pipelines.</td></tr><tr><td><code>--job-ids TEXT</code></td><td>Comma-separated list of Job IDs to deploy.</td></tr><tr><td><code>--conf-dir TEXT</code></td><td>Available with <code>--deploy-v2</code>. Path to configuration file folders.</td></tr><tr><td><code>--release-tag TEXT</code></td><td>Available with <code>--deploy-v2</code>. Specify a release. tag.</td></tr><tr><td><code>--skip-pipeline-deploy</code></td><td>Available with <code>--deploy-v2</code>. Skip pipeline deployment and deploy only job definitions.</td></tr><tr><td><code>--migrate</code></td><td>Available with <code>--deploy-v2</code>. Migrates a v1 project to v2.format.</td></tr><tr><td><code>--artifactory TEXT</code></td><td>Available with <code>--deploy-v2</code>. Allows use of PyPI/Maven packages instead of DBFS files for deployment.</td></tr><tr><td><code>--skip-artifactory-upload</code></td><td>Available with <code>--deploy-v2</code>. Skips uploading to private artifactory (must be used with <code>--artifactory</code>).</td></tr><tr><td><code>--help</code></td><td>Show help for this command.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-pipelines">Test pipelines<a href="#test-pipelines" class="hash-link" aria-label="Direct link to Test pipelines" title="Direct link to Test pipelines">‚Äã</a></h2>
<p>The Prophecy Build Tool supports unit testing of pipelines within a Prophecy project.
Tests run with the default configuration under <code>configs/resources/config</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt test --path /path/to/your/prophecy_project/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-options">Test options<a href="#test-options" class="hash-link" aria-label="Direct link to Test options" title="Direct link to Test options">‚Äã</a></h3>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>--path TEXT</code></td><td><strong>Required.</strong> Path containing the <code>pbt_project.yml</code> file.</td></tr><tr><td><code>--driver-library-path TEXT</code></td><td>Path to JARs for <code>prophecy-python-libs</code> or other dependencies.</td></tr><tr><td><code>--pipelines TEXT</code></td><td>Comma-separated list of pipelines to test.</td></tr><tr><td><code>--help</code></td><td>Show help for this command.</td></tr></tbody></table>
<p>If <code>--driver-library-path</code> is omitted, dependencies are fetched automatically from Maven Central.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-test-output">Sample test output<a href="#sample-test-output" class="hash-link" aria-label="Direct link to Sample test output" title="Direct link to Sample test output">‚Äã</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Prophecy Build Tool v1.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Found 1 job: daily</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Found 1 pipeline: customers_orders (python)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unit Testing pipeline pipelines/customers_orders [1/1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">============================= test session starts ==============================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">platform darwin -- Python 3.8.9, pytest-7.1.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">collected 1 item</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test/TestSuite.py::CleanupTest::test_unit_test_0 PASSED [100%]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">============================== 1 passed in 17.4s ===============================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úÖ Unit test for pipeline: customers_orders succeeded.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="validate-pipelines">Validate pipelines<a href="#validate-pipelines" class="hash-link" aria-label="Direct link to Validate pipelines" title="Direct link to Validate pipelines">‚Äã</a></h2>
<p>Validation checks all pipelines in a project for warnings and errors, similar to Prophecy‚Äôs in-IDE diagnostics.
This helps ensure pipelines are production-ready before deployment.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pbt validate --path /path/to/your/prophecy_project/</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate-options">Validate options<a href="#validate-options" class="hash-link" aria-label="Direct link to Validate options" title="Direct link to Validate options">‚Äã</a></h3>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>--path TEXT</code></td><td><strong>Required.</strong> Path containing the <code>pbt_project.yml</code> file.</td></tr><tr><td><code>--treat-warnings-as-errors</code></td><td>Treat warnings as errors during validation.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="applying-versions-to-pyspark-projects">Applying versions to PySpark projects<a href="#applying-versions-to-pyspark-projects" class="hash-link" aria-label="Direct link to Applying versions to PySpark projects" title="Direct link to Applying versions to PySpark projects">‚Äã</a></h2>
<p>PySpark projects often rely on specific versions of Spark, Python libraries, and data connectors.</p>
<p>Versioning the project (via <code>pbt_project.yml</code> or <code>setup.py</code>) ensures compatibility between your code and these dependencies, helping avoid runtime errors when pipelines are deployed to different environments (local, Databricks).</p>
<p>The Prophecy Build Tool lets you set various options for versioning as follows.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="versioning-options">Versioning options<a href="#versioning-options" class="hash-link" aria-label="Direct link to Versioning options" title="Direct link to Versioning options">‚Äã</a></h3>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>--path &lt;PATH&gt;</code></td><td>Path to the directory containing the <code>pbt_project.yml</code> file <strong>[required]</strong></td></tr><tr><td><code>--repo-path &lt;PATH&gt;</code></td><td>Path to the repository root. If left blank, it will use <code>--path</code>.</td></tr><tr><td><code>--bump [major|minor|patch|build|prerelease]</code></td><td>Bumps one of the semantic version numbers for the project and all pipelines based on the current value. Only works if existing versions follow <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">Semantic Versioning</a>.</td></tr><tr><td><code>--set TEXT</code></td><td>Explicitly set the exact version.</td></tr><tr><td><code>--force</code>, <code>--spike</code></td><td>Bypass errors if the version set is lower than the base branch.</td></tr><tr><td><code>--sync</code></td><td>Ensure all files are set to the same version defined in <code>pbt_project.yml</code>. <em>(Implies <code>--force</code>.)</em></td></tr><tr><td><code>--set-suffix TEXT</code></td><td>Set a suffix string (e.g., <code>-SNAPSHOT</code> or <code>-rc.4</code>). If this is not a valid semVer string, an error will be thrown.</td></tr><tr><td><code>--check-sync</code></td><td>Check to see if versions are synced. Exit code <code>0</code> = success, <code>1</code> = failure.</td></tr><tr><td><code>--compare-to-target</code>, <code>--compare &lt;TARGET_BRANCH&gt;</code></td><td>Checks if the current branch has a greater version number than the <code>&lt;TARGET_BRANCH&gt;</code> provided. Returns <code>0</code> (true) or <code>1</code> (false). Also performs a <code>--sync</code> check. <br><strong>Note:</strong> If <code>--bump</code> is also provided, it compares versions and applies the bump strategy if the current version is lower.</td></tr><tr><td><code>--make-unique</code></td><td>Makes a version unique for feature branches by adding build-metadata and prerelease identifiers. <br> <em>Format:</em> <code>MAJOR.MINOR.PATCH-PRERELEASE+BUILDMETADATA</code> <br> <em>Examples:</em> <br> Python ‚Üí <code>3.3.0 ‚Üí 3.3.0-dev0+sha.j0239ruf0ew</code> <br> Scala ‚Üí <code>3.3.0 ‚Üí 3.3.0-SNAPSHOT+sha.j0239ruf0ew</code></td></tr><tr><td><code>--pbt-only</code></td><td>Apply version operation to <code>pbt_project.yml</code> file only. Applicable with <code>--compare</code>, <code>--make-unique</code>, <code>--bump</code>, <code>--set</code>, or <code>--set-suffix</code>.</td></tr><tr><td><code>--help</code></td><td>Show help for this command.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tagging-builds">Tagging builds<a href="#tagging-builds" class="hash-link" aria-label="Direct link to Tagging builds" title="Direct link to Tagging builds">‚Äã</a></h2>
<p>The <code>pbt tag</code> command creates a Git tag for the version listed in <code>pbt_project.yml</code>. This tag marks a specific point in your project‚Äôs history so you can track or redeploy that version later. By default, the tag name includes the branch (for example, <code>main/1.4.0</code>) and is pushed to the remote automatically. You can change or remove the branch name with <code>--branch</code>, create a custom tag with <code>--custom</code>, or skip pushing with <code>--no-push</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tag-options">Tag options<a href="#tag-options" class="hash-link" aria-label="Direct link to Tag options" title="Direct link to Tag options">‚Äã</a></h3>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>--path TEXT</code></td><td>Path to the directory containing the <code>pbt_project.yml</code> file <strong>[required]</strong></td></tr><tr><td><code>--repo-path TEXT</code></td><td>Path to the repository root. If left blank, it will use <code>--path</code>.</td></tr><tr><td><code>--no-push</code></td><td>By default, the tag will be pushed to the origin after it is created. Use this flag to skip pushing the tag.</td></tr><tr><td><code>--branch TEXT</code></td><td>Normally, the tag is prefixed with the branch name: <code>&lt;branch_name&gt;/&lt;version&gt;</code>. This option overrides <code>&lt;branch_name&gt;</code>. Provide <code>&quot;&quot;</code> to omit the branch name.</td></tr><tr><td><code>--custom TEXT</code></td><td>Explicitly set the exact tag using a string. Ignores other options.</td></tr><tr><td><code>--help</code></td><td>Show help for this command.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample-output">Sample output<a href="#sample-output" class="hash-link" aria-label="Direct link to Sample output" title="Direct link to Sample output">‚Äã</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Prophecy Build Tool v1.0.3.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Project name: HelloWorld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Found 1 job: default_schedule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Found 4 pipelines: customers_orders, report_top_customers, join_agg_sort, farmers-markets-irs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Validating 4 pipelines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Validating pipeline pipelines/customers_orders [1/4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Pipeline validated: customers_orders</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚úÖ All pipelines validated successfully.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-reference">Quick reference<a href="#quick-reference" class="hash-link" aria-label="Direct link to Quick reference" title="Direct link to Quick reference">‚Äã</a></h2>
<table><thead><tr><th>Command</th><th>Description</th><th>Common Options</th></tr></thead><tbody><tr><td><code>pbt build</code></td><td>Build all or selected pipelines within a Prophecy project.</td><td><code>--path</code> (required) <br> <code>--pipelines</code> <em>(comma-separated)</em> <br> <code>--ignore-build-errors</code> <br> <code>--ignore-parse-errors</code></td></tr><tr><td><code>pbt test</code></td><td>Run unit tests for pipelines using the default configuration.</td><td><code>--path</code> (required) <br> <code>--pipelines</code> <em>(comma-separated)</em> <br> <code>--driver-library-path</code> <em>(optional)</em></td></tr><tr><td><code>pbt validate</code></td><td>Validate pipelines for warnings or errors before deployment.</td><td><code>--path</code> (required) <br> <code>--treat-warnings-as-errors</code></td></tr><tr><td><code>pbt deploy</code></td><td>Build and deploy pipelines and jobs to Databricks.</td><td><code>--path</code> (required) <br> <code>--release-version</code> <br> <code>--project-id</code> <br> <code>--fabric-ids</code> <br> <code>--job-ids</code> <br> <code>--skip-builds</code></td></tr><tr><td>pbt version</td><td>Set versions for PySpark projects.</td><td></td></tr><tr><td>Environment variables</td><td>Required for Databricks connections.</td><td><code>DATABRICKS_HOST</code> <br> <code>DATABRICKS_TOKEN</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-workflow">Example workflow<a href="#example-workflow" class="hash-link" aria-label="Direct link to Example workflow" title="Direct link to Example workflow">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 1. Build project pipelines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pbt build --path /path/to/project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. Run tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pbt test --path /path/to/project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. Validate before deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pbt validate --path /path/to/project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. Deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pbt deploy --path /path/to/project --release-version 1.0 --project-id 123</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s next<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s next" title="Direct link to What&#x27;s next">‚Äã</a></h2>
<p>For more details on continuous integration and orchestration, explore:</p>
<!-- -->
<section class="row"><article class="docCardListItem_W1sv col col--6"><a class="card padding--lg cardContainer_S8oU" href="/engineers/github-actions-prophecy-build-tool"><h2 class="cardTitle_HoSo" title="PBT on GitHub Actions"><span class="icon_hr_D"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 2.26953V6.40007C14 6.96012 14 7.24015 14.109 7.45406C14.2049 7.64222 14.3578 7.7952 14.546 7.89108C14.7599 8.00007 15.0399 8.00007 15.6 8.00007H19.7305M14 17H8M16 13H8M20 9.98822V17.2C20 18.8802 20 19.7202 19.673 20.362C19.3854 20.9265 18.9265 21.3854 18.362 21.673C17.7202 22 16.8802 22 15.2 22H8.8C7.11984 22 6.27976 22 5.63803 21.673C5.07354 21.3854 4.6146 20.9265 4.32698 20.362C4 19.7202 4 18.8802 4 17.2V6.8C4 5.11984 4 4.27976 4.32698 3.63803C4.6146 3.07354 5.07354 2.6146 5.63803 2.32698C6.27976 2 7.11984 2 8.8 2H12.0118C12.7455 2 13.1124 2 13.4577 2.08289C13.7638 2.15638 14.0564 2.27759 14.3249 2.44208C14.6276 2.6276 14.887 2.88703 15.4059 3.40589L18.5941 6.59411C19.113 7.11297 19.3724 7.3724 19.5579 7.67515C19.7224 7.94356 19.8436 8.2362 19.9171 8.5423C20 8.88757 20 9.25445 20 9.98822Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></span> <!-- -->PBT on GitHub Actions</h2><p class="cardDescription_c27F" title="Example usage of Prophecy Build Tool on GitHub Actions">Example usage of Prophecy Build Tool on GitHub Actions</p></a></article><article class="docCardListItem_W1sv col col--6"><a class="card padding--lg cardContainer_S8oU" href="/engineers/jenkins-prophecy-build-tool"><h2 class="cardTitle_HoSo" title="PBT on Jenkins"><span class="icon_hr_D"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 2.26953V6.40007C14 6.96012 14 7.24015 14.109 7.45406C14.2049 7.64222 14.3578 7.7952 14.546 7.89108C14.7599 8.00007 15.0399 8.00007 15.6 8.00007H19.7305M14 17H8M16 13H8M20 9.98822V17.2C20 18.8802 20 19.7202 19.673 20.362C19.3854 20.9265 18.9265 21.3854 18.362 21.673C17.7202 22 16.8802 22 15.2 22H8.8C7.11984 22 6.27976 22 5.63803 21.673C5.07354 21.3854 4.6146 20.9265 4.32698 20.362C4 19.7202 4 18.8802 4 17.2V6.8C4 5.11984 4 4.27976 4.32698 3.63803C4.6146 3.07354 5.07354 2.6146 5.63803 2.32698C6.27976 2 7.11984 2 8.8 2H12.0118C12.7455 2 13.1124 2 13.4577 2.08289C13.7638 2.15638 14.0564 2.27759 14.3249 2.44208C14.6276 2.6276 14.887 2.88703 15.4059 3.40589L18.5941 6.59411C19.113 7.11297 19.3724 7.3724 19.5579 7.67515C19.7224 7.94356 19.8436 8.2362 19.9171 8.5423C20 8.88757 20 9.25445 20 9.98822Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></span> <!-- -->PBT on Jenkins</h2><p class="cardDescription_c27F" title="Example Usage of Prophecy Build Tool on Jenkins">Example Usage of Prophecy Build Tool on Jenkins</p></a></article></section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/metadata">metadata</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/build">build</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/deploy">deploy</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/test">test</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/cli">cli</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/continuous-integration">continuous integration</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/continuous-deployment">continuous deployment</a></li></ul></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/engineers/external-release-tags"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">External release tags</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/engineers/github-actions-prophecy-build-tool"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PBT on GitHub Actions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#integration-examples" class="table-of-contents__link toc-highlight">Integration examples</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#build-pipelines" class="table-of-contents__link toc-highlight">Build pipelines</a><ul><li><a href="#build-options" class="table-of-contents__link toc-highlight">Build options</a></li></ul></li><li><a href="#deploy-pipelines-and-jobs" class="table-of-contents__link toc-highlight">Deploy pipelines and jobs</a><ul><li><a href="#sample-deploy-output" class="table-of-contents__link toc-highlight">Sample deploy output</a></li><li><a href="#deploy-dependent-projects" class="table-of-contents__link toc-highlight">Deploy dependent projects</a></li><li><a href="#deploy-by-fabric-id" class="table-of-contents__link toc-highlight">Deploy by fabric ID</a></li><li><a href="#skip-builds" class="table-of-contents__link toc-highlight">Skip builds</a></li><li><a href="#deploy-specific-jobs" class="table-of-contents__link toc-highlight">Deploy specific jobs</a></li><li><a href="#deploy-options-summary" class="table-of-contents__link toc-highlight">Deploy options summary</a></li></ul></li><li><a href="#test-pipelines" class="table-of-contents__link toc-highlight">Test pipelines</a><ul><li><a href="#test-options" class="table-of-contents__link toc-highlight">Test options</a></li><li><a href="#sample-test-output" class="table-of-contents__link toc-highlight">Sample test output</a></li></ul></li><li><a href="#validate-pipelines" class="table-of-contents__link toc-highlight">Validate pipelines</a><ul><li><a href="#validate-options" class="table-of-contents__link toc-highlight">Validate options</a></li></ul></li><li><a href="#applying-versions-to-pyspark-projects" class="table-of-contents__link toc-highlight">Applying versions to PySpark projects</a><ul><li><a href="#versioning-options" class="table-of-contents__link toc-highlight">Versioning options</a></li></ul></li><li><a href="#tagging-builds" class="table-of-contents__link toc-highlight">Tagging builds</a><ul><li><a href="#tag-options" class="table-of-contents__link toc-highlight">Tag options</a></li></ul></li><li><a href="#sample-output" class="table-of-contents__link toc-highlight">Sample output</a></li><li><a href="#quick-reference" class="table-of-contents__link toc-highlight">Quick reference</a><ul><li><a href="#example-workflow" class="table-of-contents__link toc-highlight">Example workflow</a></li></ul></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s next</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Prophecy</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.prophecy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.prophecy.io/blogs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/prophecy-io-support/shared_invite/zt-1dwuvkakg-JcavnQuoukyZ3q5jkSkKCg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:docs@prophecy.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation feedback<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://app.prophecy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Login<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">¬© 2025 Prophecy Inc All Rights Reserved <a href="https://legal.prophecy.io/privacy" target="_blank">Privacy Policy</a></div></div></div></footer></div>
</body>
</html>