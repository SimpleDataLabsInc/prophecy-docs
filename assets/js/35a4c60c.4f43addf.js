"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[33484],{28453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>o});var t=n(96540);const r={},s=t.createContext(r);function a(e){const i=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(s.Provider,{value:i},e.children)}},95121:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"administration/Spark-fabrics/livy","title":"Livy","description":"Configuring Livy fabrics","source":"@site/docs/administration/Spark-fabrics/livy.md","sourceDirName":"administration/Spark-fabrics","slug":"/administration/Spark-fabrics/livy","permalink":"/administration/Spark-fabrics/livy","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"fabric","permalink":"/tags/fabric"},{"inline":true,"label":"configuration","permalink":"/tags/configuration"},{"inline":true,"label":"livy","permalink":"/tags/livy"}],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Livy","id":"livy","description":"Configuring Livy fabrics","sidebar_position":4,"tags":["fabric","configuration","livy"]},"sidebar":"adminSidebar","previous":{"title":"UC Shared Cluster Support","permalink":"/administration/Spark-fabrics/databricks/ucshared"},"next":{"title":"Amazon EMR","permalink":"/administration/Spark-fabrics/emr"}}');var r=n(74848),s=n(28453);const a={title:"Livy",id:"livy",description:"Configuring Livy fabrics",sidebar_position:4,tags:["fabric","configuration","livy"]},o=void 0,c={},l=[{value:"Create the Livy fabric",id:"create-the-livy-fabric",level:2},{value:"Authentication types",id:"authentication-types",level:3},{value:"Additional Livy configurations",id:"additional-livy-configurations",level:2},{value:"Advanced settings",id:"advanced-settings",level:2},{value:"Connections and secrets",id:"connections-and-secrets",level:2},{value:"What&#39;s next",id:"whats-next",level:2}];function d(e){const i={a:"a",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.a,{href:"https://livy.apache.org/",children:"Apache Livy"})," is a service that enables easy interaction with a Spark cluster over a REST interface. If you're running Hadoop, most Hadoop distributions (CDP/MapR) come with Livy bundled. For Spark-on-k8s, you can put a Livy in the K8s cluster, which exposes Spark over a REST API.\nYou can create a generic Livy fabric to connect Prophecy to any Spark cluster accessible via Apache Livy."]}),"\n",(0,r.jsx)(i.h2,{id:"create-the-livy-fabric",children:"Create the Livy fabric"}),"\n",(0,r.jsx)(i.p,{children:"Let's get started with creating Livy fabric."}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Click on the ",(0,r.jsx)(i.strong,{children:"Create Entity"})," button from the left navigation bar."]}),"\n",(0,r.jsxs)(i.li,{children:["Click on the ",(0,r.jsx)(i.strong,{children:"Fabric"})," tile."]}),"\n",(0,r.jsxs)(i.li,{children:["Fill out the basic information:","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Name"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Description"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Team"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["Click ",(0,r.jsx)(i.strong,{children:"Continue"}),"."]}),"\n",(0,r.jsxs)(i.li,{children:["Fill in the information about the Spark provider.","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Provider Type"}),": Spark"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Provider"}),": Livy"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Livy URL"}),": The URL to your Livy environment"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use mTLS Encryption (optional)"}),": The Client Certificate and Client Key required for mTLS."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Authentication type"}),": How you will authenticate Livy in Prophecy"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"Test the connection to validate the fabric."}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"authentication-types",children:"Authentication types"}),"\n",(0,r.jsx)(i.p,{children:"Prophecy supports the following authentication types for Livy."}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"None"}),": This applies when Livy and Prophecy are on the same private network or when Prophecy can securely communicate with Livy through IP whitelisting."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Bearer Token"}),": Use this option to authenticate using a secure token-based system. All team members who use this fabric will use the same token configured by a team admin here for authentication."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Kerberos"}),": If using a Kerberized Hadoop cluster, you can authenticate via Kerberos. For this option, Prophecy cluster admins must first add Keytab files in ",(0,r.jsx)(i.strong,{children:"Settings > Admin > Security"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:["You can also enable the ",(0,r.jsx)(i.strong,{children:"impersonate using Proxy-user"})," toggle to allow user-level authorization. Prophecy cluster admins can configure the proxy-user settings in ",(0,r.jsx)(i.strong,{children:"Settings > Admin > Security"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"additional-livy-configurations",children:"Additional Livy configurations"}),"\n",(0,r.jsx)(i.p,{children:"Once the connection is validated:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Edit or add job sizes. A job size consists of the following.","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Name"}),"\n",(0,r.jsx)(i.li,{children:"Drivers: The number of cores and amount of memory of the drivers"}),"\n",(0,r.jsx)(i.li,{children:"Executors: The number of cores and the amount of memory of the executors, and the total number of executors"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["Configure the Prophecy Library settings.","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Spark version: Version that is used when a user attaches to a cluster using this fabric"}),"\n",(0,r.jsx)(i.li,{children:"Scala version: Version that is used when a user attaches to a cluster using this fabric"}),"\n",(0,r.jsx)(i.li,{children:"Scala/Python resolution mode: Location of libraries to use for Scala or Python"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"advanced-settings",children:"Advanced settings"}),"\n",(0,r.jsxs)(i.p,{children:["You can provide advanced options like Yarn queue, extra jars, and Spark configs here. Spark configs are additional ",(0,r.jsx)(i.a,{href:"https://spark.apache.org/docs/latest/configuration.html#available-properties",children:"Spark properties"}),", which you can set to be applied at Spark session initialization. For example, if your Spark installation is configured to enable dynamic allocation, you can disable it for sessions created through Prophecy."]}),"\n",(0,r.jsx)(i.h2,{id:"connections-and-secrets",children:"Connections and secrets"}),"\n",(0,r.jsxs)(i.p,{children:["Connections are not supported for Livy fabrics. However, you can still add secrets to your fabric. Team admins can learn how to set up and use secrets ",(0,r.jsx)(i.a,{href:"/administration/secret-management/",children:"here"}),"."]}),"\n",(0,r.jsx)(i.h2,{id:"whats-next",children:"What's next"}),"\n",(0,r.jsxs)(i.p,{children:["Once you are using your Livy fabric in Prophecy, you might want to learn more about ",(0,r.jsx)(i.a,{href:"/Spark/execution/executions_on_livy_clusters",children:"Livy execution metrics"}),"."]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);