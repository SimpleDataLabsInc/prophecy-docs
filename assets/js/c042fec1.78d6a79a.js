"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[93727],{25830:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"analysts/development/models/target-platforms/snowflake-target","title":"Snowflake targets","description":"Configure target models for Snowflake SQL","source":"@site/docs/analysts/development/models/target-platforms/snowflake-target.md","sourceDirName":"analysts/development/models/target-platforms","slug":"/engineers/snowflake-target","permalink":"/engineers/snowflake-target","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"model","permalink":"/tags/model"},{"inline":true,"label":"snowflake","permalink":"/tags/snowflake"}],"version":"current","frontMatter":{"title":"Snowflake targets","id":"snowflake-target","slug":"/engineers/snowflake-target","description":"Configure target models for Snowflake SQL","tags":["model","snowflake"]},"sidebar":"mySidebar","previous":{"title":"BigQuery targets","permalink":"/engineers/bigquery-target"},"next":{"title":"Dynamic target location","permalink":"/engineers/dynamic-target-location"}}');var r=n(74848),a=n(28453);const i={title:"Snowflake targets",id:"snowflake-target",slug:"/engineers/snowflake-target",description:"Configure target models for Snowflake SQL",tags:["model","snowflake"]},d=void 0,o={},l=[{value:"Type &amp; Format",id:"type--format",level:2},{value:"Location",id:"location",level:2},{value:"Schema",id:"schema",level:2},{value:"Properties",id:"properties",level:3},{value:"SQL Query",id:"sql-query",level:2},{value:"Write Options",id:"write-options",level:2},{value:"Data Tests",id:"data-tests",level:2}];function c(e){const t={a:"a",admonition:"admonition",h2:"h2",h3:"h3",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"To configure a target model that will be written to Snowflake, reference the following sections."}),"\n",(0,r.jsx)(t.h2,{id:"type--format",children:"Type & Format"}),"\n",(0,r.jsx)(t.p,{children:"Snowflake supports the following materialization types for target models. The type determines the underlying physical format of your target model."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Materialization type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"View (default)"}),(0,r.jsx)(t.td,{children:"Rebuilt as a view on each run. Views always reflect the latest source data but don\u2019t store any data themselves."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Table"}),(0,r.jsx)(t.td,{children:"Rebuilt as a table on each run. Tables are fast to query but can take longer to build. Target tables support multiple write modes."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Ephemeral"}),(0,r.jsx)(t.td,{children:"Not built in the database. The model\u2019s logic is inlined into downstream models using a common table expression (CTE). Use for lightweight transformations early in your DAG."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"location",children:"Location"}),"\n",(0,r.jsxs)(t.p,{children:["Review the location where your model will be written. Any changes you make to the ",(0,r.jsx)(t.strong,{children:"Overwrite location"})," section will be reflected in the ",(0,r.jsx)(t.strong,{children:"Location"})," that Prophecy generates."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Location Parameter"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Advanced mode"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Catalog"}),(0,r.jsx)(t.td,{children:"Catalog where the model will be created."}),(0,r.jsx)(t.td,{children:"Yes"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Schema"}),(0,r.jsx)(t.td,{children:"Schema inside the catalog where the model will be created."}),(0,r.jsx)(t.td,{children:"Yes"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Alias"}),(0,r.jsx)(t.td,{children:"Sets the name of the resulting table or view. Defaults to the model name if not specified."}),(0,r.jsx)(t.td,{children:"No"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"schema",children:"Schema"}),"\n",(0,r.jsx)(t.p,{children:"Define the schema of the dataset and optionally configure additional properties."}),"\n",(0,r.jsx)(t.p,{children:"The schema includes column names, column data types, and optional column metadata. When you expand a row in the Schema table, you can add a column description, apply column tags, and enable/disable quoting for column names."}),"\n",(0,r.jsx)(t.h3,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(t.p,{children:"Each property maps to a certain dbt configuration that may be generic to dbt or specific to a platform like Snowflake. If you do not add a property explicitly in the Schema tab, Prophecy uses the dbt default for that property."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Config type"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Dataset Tags"}),(0,r.jsx)(t.td,{children:"Add tags to the dataset. These tags can be used as part of the resource selection syntax in dbt."}),(0,r.jsx)(t.td,{children:"Generic"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Contract Enforced"}),(0,r.jsxs)(t.td,{children:["Enforce a ",(0,r.jsx)(t.a,{href:"https://docs.getdbt.com/docs/mesh/govern/model-contracts",children:"contract"})," for the model schema, preventing unintended changes."]}),(0,r.jsx)(t.td,{children:"Generic"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Show Docs"}),(0,r.jsxs)(t.td,{children:["Control whether or not nodes are shown in the ",(0,r.jsx)(t.a,{href:"https://docs.getdbt.com/docs/build/view-documentation",children:"auto-generated documentation website"}),"."]}),(0,r.jsx)(t.td,{children:"Generic"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Enabled"}),(0,r.jsx)(t.td,{children:"Control whether the model is included in builds. When a resource is disabled, dbt will not consider it as part of your project."}),(0,r.jsx)(t.td,{children:"Generic"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Meta"}),(0,r.jsx)(t.td,{children:"Set metadata for the table using key-value pairs."}),(0,r.jsx)(t.td,{children:"Generic"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Group"}),(0,r.jsx)(t.td,{children:"Assign a group to the table."}),(0,r.jsx)(t.td,{children:"Generic"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Persist Docs Columns"}),(0,r.jsx)(t.td,{children:"Save column descriptions in the database."}),(0,r.jsx)(t.td,{children:"Generic"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Persist Docs Relations"}),(0,r.jsx)(t.td,{children:"Save model descriptions in the database."}),(0,r.jsx)(t.td,{children:"Generic"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Cluster By"}),(0,r.jsx)(t.td,{children:"Order and cluster the table by specified keys to reduce Snowflake\u2019s automatic clustering work. Accepts a string or list of strings."}),(0,r.jsx)(t.td,{children:"Snowflake"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Transient"}),(0,r.jsxs)(t.td,{children:["Write the table as a Snowflake ",(0,r.jsx)(t.a,{href:"https://docs.snowflake.com/en/user-guide/tables-temp-transient#transient-tables",children:"transient table"}),", which does not preserve history and can reduce costs. By default, all Snowflake tables created by dbt are transient."]}),(0,r.jsx)(t.td,{children:"Snowflake"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Automatic Clustering"}),(0,r.jsx)(t.td,{children:"Enables automatic clustering if manual clustering is enabled for your Snowflake account. You do not need to use this property if automatic clustering is enabled by default on your Snowflake account."}),(0,r.jsx)(t.td,{children:"Snowflake"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Snowflake Warehouse"}),(0,r.jsx)(t.td,{children:"Override the Snowflake warehouse that is used for this target model."}),(0,r.jsx)(t.td,{children:"Snowflake"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Query Tag"}),(0,r.jsxs)(t.td,{children:["Add ",(0,r.jsx)(t.a,{href:"https://docs.snowflake.com/en/sql-reference/parameters#query-tag",children:"query tags"})," to your model."]}),(0,r.jsx)(t.td,{children:"Snowflake"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Copy Grants"}),(0,r.jsx)(t.td,{children:"Enable to preserve any existing access control grants (like GRANT SELECT TO ROLE analyst) when rebuilding the table or view."}),(0,r.jsx)(t.td,{children:"Snowflake"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Secure"}),(0,r.jsxs)(t.td,{children:["Create a ",(0,r.jsx)(t.a,{href:"https://docs.snowflake.com/en/user-guide/views-secure",children:"secure view"})," that hides underlying data from unauthorized users."]}),(0,r.jsx)(t.td,{children:"Snowflake"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Target Lag"}),(0,r.jsxs)(t.td,{children:["Defines how frequently the table should be ",(0,r.jsx)(t.a,{href:"https://docs.snowflake.com/en/user-guide/dynamic-tables-target-lag",children:"automatically refreshed"}),"."]}),(0,r.jsx)(t.td,{children:"Snowflake"})]})]})]}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["For more detailed information, see the ",(0,r.jsx)(t.a,{href:"https://docs.getdbt.com/reference/references-overview",children:"dbt reference documentation"}),"."]})}),"\n",(0,r.jsx)(t.h2,{id:"sql-query",children:"SQL Query"}),"\n",(0,r.jsxs)(t.p,{children:["Add a custom SQL query at the end of your target model using the Snowflake SQL dialect. This allows you to apply a final transformation step, which can be useful if you're importing an existing codebase and need to add conditions or filters to the final output. Custom queries support Jinja, dbt templating, and ",(0,r.jsx)(t.a,{href:"/engineers/data-model-configurations",children:"variable"})," usage for your last-mile data processing."]}),"\n",(0,r.jsx)(t.p,{children:"You can reference any column present in the list of input ports beside the SQL query. You can only add additional input ports\u2014the output port cannot be edited."}),"\n",(0,r.jsx)(t.h2,{id:"write-options",children:"Write Options"}),"\n",(0,r.jsxs)(t.p,{children:["For a complete guide to defining how to write target tables, visit ",(0,r.jsx)(t.a,{href:"/table-write-options",children:"Write Options"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"data-tests",children:"Data Tests"}),"\n",(0,r.jsxs)(t.p,{children:["A data test is an assertion you define about a dataset in your project. Data tests are run on target models to ensure the quality and integrity of the final data that gets written to the warehouse. Learn how to build tests in ",(0,r.jsx)(t.a,{href:"/analysts/data-tests",children:"Data tests"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>d});var s=n(96540);const r={},a=s.createContext(r);function i(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);