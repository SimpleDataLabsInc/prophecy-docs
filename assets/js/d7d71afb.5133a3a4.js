"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[88913],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(96540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},90724:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"administration/authentication/azure-ad","title":"Microsoft Entra ID SSO","description":"Sign-in to Prophecy using your Microsoft Entra ID credentials","source":"@site/docs/administration/authentication/azure-ad.md","sourceDirName":"administration/authentication","slug":"/administration/authentication/azure-ad","permalink":"/administration/authentication/azure-ad","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"authentication","permalink":"/tags/authentication"},{"inline":true,"label":"azure","permalink":"/tags/azure"}],"version":"current","frontMatter":{"title":"Microsoft Entra ID SSO","id":"azure-ad","description":"Sign-in to Prophecy using your Microsoft Entra ID credentials","tags":["authentication","azure"]},"sidebar":"gettingStartedSidebar","previous":{"title":"SAML authentication (SCIM optional)","permalink":"/administration/authentication/saml-scim"},"next":{"title":"Google SSO","permalink":"/administration/authentication/google-sso"}}');var r=t(74848),s=t(28453);const o={title:"Microsoft Entra ID SSO",id:"azure-ad",description:"Sign-in to Prophecy using your Microsoft Entra ID credentials",tags:["authentication","azure"]},a=void 0,c={},l=[{value:"Step 1: Register a new app",id:"step-1-register-a-new-app",level:2},{value:"Step 2 (Optional): Enable automatic team creation",id:"step-2-optional-enable-automatic-team-creation",level:2},{value:"Step 3: API Permission",id:"step-3-api-permission",level:2},{value:"Step 4: Certificates and Secrets",id:"step-4-certificates-and-secrets",level:2},{value:"Step 5: Client ID",id:"step-5-client-id",level:2},{value:"Step 6: Configure Prophecy to connect with Microsoft Entra ID",id:"step-6-configure-prophecy-to-connect-with-microsoft-entra-id",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.admonition,{title:"Express and Enterprise",type:"edition",children:(0,r.jsxs)(n.p,{children:["Available for ",(0,r.jsx)(n.a,{href:"/getting-started/editions/",children:"Express and Enterprise Editions"})," only."]})}),"\n",(0,r.jsxs)(n.p,{children:["Prophecy supports ",(0,r.jsx)(n.strong,{children:"direct OAuth integration"})," with Microsoft Entra ID (formerly Azure Active Directory)."]}),"\n",(0,r.jsx)(n.h2,{id:"step-1-register-a-new-app",children:"Step 1: Register a new app"}),"\n",(0,r.jsxs)(n.p,{children:["First, you need to log in to the ",(0,r.jsx)(n.a,{href:"https://portal.azure.com/",children:"Azure portal"})," as an administrator and register a new app."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["In the Azure portal, open the ",(0,r.jsx)(n.strong,{children:"App registrations"})," page."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"New Registration"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Name it ",(0,r.jsx)(n.code,{children:"ProphecyEntraIDApp"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Choose the supported account type: ",(0,r.jsx)(n.strong,{children:"Accounts in this organizational directory only (xxxxx only - Single tenant)"})]}),"\n",(0,r.jsxs)(n.li,{children:["For the Redirect URI, choose ",(0,r.jsx)(n.strong,{children:"Web"})," in the dropdown and use:",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"https://your-prophecy-ide-url.domain/api/oauth/azureadCallback"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Register"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-2-optional-enable-automatic-team-creation",children:"Step 2 (Optional): Enable automatic team creation"}),"\n",(0,r.jsxs)(n.p,{children:["To automatically create new teams in Prophecy via ",(0,r.jsx)(n.a,{href:"/administration/authentication/group-team-mapping",children:"group mappings"}),", follow these steps."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In your Prophecy deployment, set the ",(0,r.jsx)(n.code,{children:"ENABLE_AUTO_TEAM_CREATION"})," flag to ",(0,r.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Open the Azure portal."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Open the app that you registered in ",(0,r.jsx)(n.a,{href:"#step-1-register-a-new-app",children:"Step 1"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under ",(0,r.jsx)(n.strong,{children:"Manage"}),", select ",(0,r.jsx)(n.strong,{children:"Token configuration"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.strong,{children:"Add groups claim"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select the ",(0,r.jsx)(n.strong,{children:"Groups assigned to the application"})," checkbox."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["To change the groups assigned to the application, select the corresponding application from the ",(0,r.jsx)(n.strong,{children:"Enterprise applications"})," list. Select ",(0,r.jsx)(n.strong,{children:"Users and groups"})," and then ",(0,r.jsx)(n.strong,{children:"Add user/group"}),". Select the group(s) you want to add to the application from ",(0,r.jsx)(n.strong,{children:"Users and groups"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Save"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["These steps are also listed in the ",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/entra/identity-platform/optional-claims?tabs=appui#configure-groups-optional-claims",children:"Configure groups optional claims"})," section of the Microsoft documentation."]})}),"\n",(0,r.jsx)(n.h2,{id:"step-3-api-permission",children:"Step 3: API Permission"}),"\n",(0,r.jsxs)(n.p,{children:["Next, go to ",(0,r.jsx)(n.strong,{children:"API permissions"})," on the left-hand side and add this set of API permissions:"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)("img",{width:"799",alt:"Screenshot 2022-06-13 at 9 57 16 PM",src:"https://user-images.githubusercontent.com/59466885/173400731-acb084df-31a7-4858-b6ba-f395e888e60e.png"}),"\n",(0,r.jsx)(n.h2,{id:"step-4-certificates-and-secrets",children:"Step 4: Certificates and Secrets"}),"\n",(0,r.jsxs)(n.p,{children:["Then, go to ",(0,r.jsx)(n.strong,{children:"Certificates and Secrets"}),", add a new secret, and note down the value of this secret."]}),"\n",(0,r.jsx)(n.h2,{id:"step-5-client-id",children:"Step 5: Client ID"}),"\n",(0,r.jsxs)(n.p,{children:["Finally, click on ",(0,r.jsx)(n.strong,{children:"Overview"})," on the left-hand side and note down the Application (client) ID."]}),"\n",(0,r.jsx)(n.h2,{id:"step-6-configure-prophecy-to-connect-with-microsoft-entra-id",children:"Step 6: Configure Prophecy to connect with Microsoft Entra ID"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Log in to Prophecy as an admin user."}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to the ",(0,r.jsx)(n.strong,{children:"SSO"})," tab of the Prophecy ",(0,r.jsx)(n.strong,{children:"Settings"})," page."]}),"\n",(0,r.jsxs)(n.li,{children:["Under ",(0,r.jsx)(n.strong,{children:"Authentication Provider"}),", select Azure Active Directory."]}),"\n",(0,r.jsxs)(n.li,{children:["Enter the ",(0,r.jsx)(n.strong,{children:"Client ID"})," and the ",(0,r.jsx)(n.strong,{children:"Client Secret"})," at minimum."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Once you have logged out, you will be able to see a ",(0,r.jsx)(n.strong,{children:"Login with Azure Active Directory"})," option. Now, your Azure AD users will be able to login to Prophecy with this option."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);