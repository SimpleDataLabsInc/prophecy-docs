"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[10481],{28453:(e,s,r)=>{r.d(s,{R:()=>n,x:()=>d});var t=r(96540);const a={},i=t.createContext(a);function n(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),t.createElement(i.Provider,{value:s},e.children)}},56881:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"analysts/development/gems/source-target/table/databricks","title":"Databricks","description":"Process Databricks tables in the SQL warehouse","source":"@site/docs/analysts/development/gems/source-target/table/databricks.md","sourceDirName":"analysts/development/gems/source-target/table","slug":"/analysts/databricks-table","permalink":"/analysts/databricks-table","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Databricks","id":"databricks","slug":"/analysts/databricks-table","description":"Process Databricks tables in the SQL warehouse","tags":[]},"sidebar":"mySidebar","previous":{"title":"Table gems","permalink":"/engineers/table-gems"},"next":{"title":"Google BigQuery","permalink":"/analysts/bigquery-table"}}');var a=r(74848),i=r(28453),n=r(82824);const d={title:"Databricks",id:"databricks",slug:"/analysts/databricks-table",description:"Process Databricks tables in the SQL warehouse",tags:[]},c=void 0,o={},l=[{value:"Table types",id:"table-types",level:2},{value:"Gem configuration",id:"gem-configuration",level:2},{value:"Tables",id:"tables",level:3},{value:"Source parameters",id:"source-tables",level:4},{value:"Target parameters",id:"target-tables",level:4},{value:"Views",id:"views",level:3},{value:"Source parameters",id:"source-views",level:4},{value:"Target parameters",id:"target-views",level:4},{value:"Seeds",id:"seeds",level:3},{value:"Properties",id:"properties",level:3},{value:"Cross-workspace access",id:"cross-workspace-access",level:2},{value:"Reusing and sharing tables",id:"reusing-and-sharing-tables",level:2}];function h(e){const s={a:"a",admonition:"admonition",h2:"h2",h3:"h3",h4:"h4",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{execution_engine:"SQL Warehouse",sql_package_name:"",sql_package_version:""}),"\n",(0,a.jsxs)(s.p,{children:["In Prophecy, datasets stored in the ",(0,a.jsx)(s.a,{href:"/administration/fabrics/prophecy-fabrics/#connections",children:"SQL Warehouse Connection"})," defined in your fabric are accessed using Table gems. Unlike other source and target gems, Table gems run directly within the data warehouse, eliminating extra orchestration steps and improving performance."]}),"\n",(0,a.jsx)(s.p,{children:"Available configurations for Table gems vary based on your SQL warehouse provider. This page explains how to use the Table gem for a Databricks SQL warehouse, including supported table types, configuration options, and guidance for managing Databricks tables in your Prophecy pipelines."}),"\n",(0,a.jsx)(s.h2,{id:"table-types",children:"Table types"}),"\n",(0,a.jsx)(s.p,{children:"The following table types are supported for Databricks connections."}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Name"}),(0,a.jsx)(s.th,{children:"Description"}),(0,a.jsx)(s.th,{children:"Type"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Table"}),(0,a.jsx)(s.td,{children:"Persistent storage of structured data in your SQL warehouse. Faster for frequent queries (indexed)."}),(0,a.jsx)(s.td,{children:"Source or Target"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"View"}),(0,a.jsx)(s.td,{children:"A virtual table that derives data dynamically from a query. Slower for complex queries (computed at runtime)."}),(0,a.jsx)(s.td,{children:"Source or Target"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Seed"}),(0,a.jsx)(s.td,{children:"Small CSV-format files that you can write directly in Prophecy."}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Source only"})})]})]})]}),"\n",(0,a.jsx)(s.admonition,{type:"info",children:(0,a.jsxs)(s.p,{children:["For more information, visit the Databricks documentation on ",(0,a.jsx)(s.a,{href:"https://docs.databricks.com/aws/en/tables/table-overview",children:"Tables"})," and ",(0,a.jsx)(s.a,{href:"https://docs.databricks.com/aws/en/views/",children:"Views"}),"."]})}),"\n",(0,a.jsx)(s.h2,{id:"gem-configuration",children:"Gem configuration"}),"\n",(0,a.jsx)(s.h3,{id:"tables",children:"Tables"}),"\n",(0,a.jsx)(s.p,{children:"Tables are persistent, indexed storage objects optimized for frequent access."}),"\n",(0,a.jsx)(s.h4,{id:"source-tables",children:"Source parameters"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Parameter"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Location"}),(0,a.jsx)(s.td,{children:"Specify the table\u2019s location using database, schema, and name."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Properties"}),(0,a.jsx)(s.td,{children:"Define or infer schema. Add a description if needed."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Preview"}),(0,a.jsx)(s.td,{children:"Load a sample of the data before saving."})]})]})]}),"\n",(0,a.jsx)(s.h4,{id:"target-tables",children:"Target parameters"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Parameter"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Location"}),(0,a.jsx)(s.td,{children:"Choose the location where the table will be stored. You can create a new table by writing a new table name."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Properties"}),(0,a.jsx)(s.td,{children:"Define certain properties of the table. The schema cannot be changed for targets."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Write Options"}),(0,a.jsxs)(s.td,{children:["Select how you want the data to be written each time you run the pipeline (Table only). ",(0,a.jsx)("br",{}),"Supports overwrite and append write modes. ",(0,a.jsx)("br",{}),"Learn more about these write modes in ",(0,a.jsx)(s.a,{href:"/engineers/databricks-target#write-options",children:"Databricks targets"}),"."]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Preview"}),(0,a.jsx)(s.td,{children:"Load the data to see a preview before saving."})]})]})]}),"\n",(0,a.jsx)(s.h3,{id:"views",children:"Views"}),"\n",(0,a.jsx)(s.p,{children:"Views are virtual tables recomputed at runtime from a query."}),"\n",(0,a.jsx)(s.h4,{id:"source-views",children:"Source parameters"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Parameter"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Location"}),(0,a.jsx)(s.td,{children:"Enter the database, schema, and table (view) name."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Properties"}),(0,a.jsx)(s.td,{children:"Define or infer schema. Add a description if needed."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Preview"}),(0,a.jsx)(s.td,{children:"Load data based on the view's underlying query."})]})]})]}),"\n",(0,a.jsx)(s.h4,{id:"target-views",children:"Target parameters"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Parameter"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Location"}),(0,a.jsx)(s.td,{children:"Define the name of the view to be created or replaced."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Properties"}),(0,a.jsx)(s.td,{children:"Define certain properties of the table. The schema cannot be changed for targets."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Preview"}),(0,a.jsx)(s.td,{children:"Load a preview of the resulting view."})]})]})]}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsx)(s.p,{children:"Every time the pipeline runs, the target is overwritten. This is because the view is recomputed from scratch based on the underlying logic, and any previously materialized results are discarded. No additional write modes are supported."})}),"\n",(0,a.jsx)(s.h3,{id:"seeds",children:"Seeds"}),"\n",(0,a.jsx)(s.p,{children:"Seeds are lightweight CSV datasets defined in your project. Seeds are source-only."}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Parameter"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Properties"}),(0,a.jsxs)(s.td,{children:["Copy-paste your CSV data and define certain ",(0,a.jsx)(s.a,{href:"https://docs.getdbt.com/reference/seed-configs",children:"properties"})," of the table."]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Preview"}),(0,a.jsx)(s.td,{children:"Load a preview of your seed in table format."})]})]})]}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsxs)(s.p,{children:["Seeds are implemented as ",(0,a.jsx)(s.a,{href:"https://docs.getdbt.com/docs/build/seeds",children:"dbt seeds"})," under the hood. The CSV data you define is stored in your Prophecy project files and materialized as a table in your data warehouse. This table is created in the ",(0,a.jsx)(s.a,{href:"/administration/fabrics/prophecy-fabrics/connections/databricks#connection-parameters",children:"default target schema"})," specified in your Databricks connection."]})}),"\n",(0,a.jsx)(s.h3,{id:"properties",children:"Properties"}),"\n",(0,a.jsxs)(s.p,{children:["Tables in pipelines do not support dbt properties, which are only applicable to ",(0,a.jsx)(s.a,{href:"/engineers/model-sources-and-targets",children:"model sources and targets"}),"."]}),"\n",(0,a.jsx)(s.h2,{id:"cross-workspace-access",children:"Cross-workspace access"}),"\n",(0,a.jsx)(s.p,{children:"If your fabric uses Databricks as the SQL warehouse, you can\u2019t select Databricks in an external Source or Target gem. Instead, you must use Table gems, which are limited to the Databricks warehouse defined in the SQL warehouse connection."}),"\n",(0,a.jsxs)(s.p,{children:["To work with tables from a different Databricks workspace, use ",(0,a.jsx)(s.a,{href:"https://docs.databricks.com/aws/en/delta-sharing/",children:"Delta Sharing"}),". Delta Sharing lets you access data across workspaces without creating additional Databricks connections."]}),"\n",(0,a.jsx)(s.admonition,{type:"info",children:(0,a.jsx)(s.p,{children:"Prophecy implements this guardrail to avoid using external connections when the data can be made available in your warehouse. External connections introduce an extra data transfer step, which slows down pipeline execution and adds unnecessary complexity. For best performance, Prophecy always prefers reading and writing directly within the warehouse."})}),"\n",(0,a.jsx)(s.h2,{id:"reusing-and-sharing-tables",children:"Reusing and sharing tables"}),"\n",(0,a.jsxs)(s.p,{children:["After you create a table in Prophecy, you can reuse its configuration across your entire project. All created tables appear in the ",(0,a.jsx)(s.a,{href:"/analysts/project-editor",children:"Project"})," tab in the left sidebar. To make tables available to other teams, you can share your project as a package in the ",(0,a.jsx)(s.a,{href:"/engineers/package-hub",children:"Package Hub"}),". Other users will be able to use the shared table configuration, provided they have the necessary permissions in Databricks to access the underlying data."]})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},82824:(e,s,r)=>{r.d(s,{A:()=>a});r(96540);var t=r(74848);function a(e){return(0,t.jsxs)("div",{children:[e.execution_engine&&(0,t.jsx)("a",{href:"https://docs.prophecy.io/administration/fabrics/prophecy-fabrics/",children:(0,t.jsx)("span",{className:"badge badge-runtime",children:e.execution_engine})}),e.sql_package_name&&e.sql_package_version&&(0,t.jsx)("a",{href:"https://docs.prophecy.io/engineers/package-hub/",children:(0,t.jsxs)("span",{className:"badge badge-dependency",children:[e.sql_package_name," ",e.sql_package_version]})}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{})]})}}}]);