"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[3894],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var r=a.createContext({}),d=function(e){var t=a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(r.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,r=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=d(n),u=i,h=m["".concat(r,".").concat(u)]||m[u]||c[u]||o;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=m;var l={};for(var r in t)hasOwnProperty.call(t,r)&&(l[r]=t[r]);l.originalType=e,l.mdxType="string"==typeof e?e:i,s[1]=l;for(var d=2;d<o;d++)s[d]=n[d];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5211:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return r},default:function(){return u},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return c}});var a=n(7462),i=n(3366),o=(n(7294),n(3905)),s=["components"],l={sidebar_position:1,title:"Dependencies",id:"dependencies",description:"Dependency management",tags:["dependencies","maven","extensibility"]},r=void 0,d={unversionedId:"low-code-spark/extensibility/dependencies",id:"low-code-spark/extensibility/dependencies",title:"Dependencies",description:"Dependency management",source:"@site/docs/low-code-spark/extensibility/dependencies.md",sourceDirName:"low-code-spark/extensibility",slug:"/low-code-spark/extensibility/dependencies",permalink:"/low-code-spark/extensibility/dependencies",draft:!1,tags:[{label:"dependencies",permalink:"/tags/dependencies"},{label:"maven",permalink:"/tags/maven"},{label:"extensibility",permalink:"/tags/extensibility"}],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Dependencies",id:"dependencies",description:"Dependency management",tags:["dependencies","maven","extensibility"]},sidebar:"defaultSidebar",previous:{title:"Extensibility",permalink:"/low-code-spark/extensibility/"},next:{title:"User-defined functions",permalink:"/low-code-spark/extensibility/udfs"}},p={},c=[{value:"Storage",id:"storage",level:2},{value:"Common Actions",id:"common-actions",level:2},{value:"See dependencies",id:"see-dependencies",level:3},{value:"Add dependency",id:"add-dependency",level:3},{value:"Enable / Disable dependency",id:"enable--disable-dependency",level:3},{value:"Delete dependency",id:"delete-dependency",level:3},{value:"Installing on a cluster",id:"installing-on-a-cluster",level:3},{value:"Build Tool Customization",id:"build-tool-customization",level:2},{value:"Jobs Support",id:"jobs-support",level:2},{value:"Scala",id:"scala",level:3},{value:"Python",id:"python",level:3}],m={toc:c};function u(e){var t=e.components,l=(0,i.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Dependencies allow you to make use of third-party or custom code in your data pipelines and jobs. Dependencies can be\nwritten in Java, Scala, or PySpark, and can be connected to your data pipelines by pointing it\nto ",(0,o.kt)("a",{parentName:"p",href:"https://mvnrepository.com/"},"Maven")," or ",(0,o.kt)("a",{parentName:"p",href:"https://pypi.org/"},"PyPi")," coordinates."),(0,o.kt)("h2",{id:"storage"},"Storage"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"See Dependencies",src:n(7286).Z,width:"2576",height:"1084"})),(0,o.kt)("p",null,"All of your dependencies are stored at the project-level. This means, that when adding a dependency to a single\npipeline, by default it becomes available to all the other pipelines, within the same project. However, within each\npipeline you can control, if a given dependency should be enabled or disabled."),(0,o.kt)("p",null,"Dependencies are natively saved within your build-system files. E.g. if you're using Scala, they're saved in the\n",(0,o.kt)("strong",{parentName:"p"},"pom.xml")," file, if you're using Python, they're saved in the ",(0,o.kt)("strong",{parentName:"p"},"setup.py")," file. To customize the build system further,\nplease\nlook at ",(0,o.kt)("a",{parentName:"p",href:"#build-tool-customization"},"Custom Build Tool")," section."),(0,o.kt)("h2",{id:"common-actions"},"Common Actions"),(0,o.kt)("h3",{id:"see-dependencies"},"See dependencies"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"See Dependencies",src:n(3247).Z,width:"3200",height:"800"})),(0,o.kt)("p",null,"To see all of your project & pipeline dependencies simply open the ",(0,o.kt)("strong",{parentName:"p"},"Manage Dependencies")," screen by going to ",(0,o.kt)("strong",{parentName:"p"},"... >\nOptions > Manage Dependencies"),"."),(0,o.kt)("h3",{id:"add-dependency"},"Add dependency"),(0,o.kt)("p",null,"To add the dependency, the ",(0,o.kt)("a",{parentName:"p",href:"#see-dependencies"},"dependencies list"),". There you will see a complete list of your\ndependencies. Click on ",(0,o.kt)("strong",{parentName:"p"},"Create Dependency")," to add a new dependency."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Add Dependency",src:n(5907).Z,width:"3197",height:"968"})),(0,o.kt)("p",null,"To define new dependency, specify the following:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Type")," - which can be either ",(0,o.kt)("strong",{parentName:"li"},"Coordinates (Maven)")," or ",(0,o.kt)("strong",{parentName:"li"},"Package (PyPi)")," (Python projects only)."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Name")," - the name of your dependency - this can be any name, chosen by you to easier identify each dependency"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Coordinates")," - maven coordinates in the ",(0,o.kt)("inlineCode",{parentName:"li"},"groupId:artifcatId:version")," format (e.g. org.postgresql:postgresql:\n42.3.3)")),(0,o.kt)("p",null,"For further customization of your dependency you can additionally define ",(0,o.kt)("strong",{parentName:"p"},"Advanced")," properties:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Repository")," - by default your dependency is fetched from ",(0,o.kt)("strong",{parentName:"li"},"Maven Central")," repository. If you'd like to use an\nexternal repository (e.g. your organizations' repository) you can specify the link to it here. Please note, that\nthe repository has to be publicly accessible."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Exclusions")," - optional list of of ",(0,o.kt)("inlineCode",{parentName:"li"},"groupId:artifactId")," pairs, of dependencies you'd like to exclude. Learn more\nabout dependency\nexclusion ",(0,o.kt)("a",{parentName:"li",href:"https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#dependency-exclusions"},"here"),"\n.")),(0,o.kt)("p",null,"After you defined the Dependency press ",(0,o.kt)("strong",{parentName:"p"},"Save"),". Prophecy is going to validate the dependency and add it to the project,\nmaking it enabled in the current workflow, and adding it as dependency (but disabled) among all other workflows in the project."),(0,o.kt)("p",null,"When adding dependencies, Prophecy validates that the dependency coordinates is valid, and it's able to access them. If\nthat fails, you should see an invalid coordinates error."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Invalid coordinates")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In rare cases, your dependency might be only accessible to the Spark cluster or the build system but not Prophecy\nitself. If you're confident that the dependency is correct, but the validation error shows up, it's safe to press ",(0,o.kt)("strong",{parentName:"p"},"Save\nAnyways")," to ignore that warning."))),(0,o.kt)("h3",{id:"enable--disable-dependency"},"Enable / Disable dependency"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Dependencies List",src:n(5869).Z,width:"2794",height:"338"})),(0,o.kt)("p",null,"Since dependencies are stored at a project-level, any changes, like adding or deleting a dependency affects all the\npipelines. To selectively enable or disable a dependency for a specific pipeline, you can use the ",(0,o.kt)("strong",{parentName:"p"},"Enable In Pipeline"),"\noption."),(0,o.kt)("h3",{id:"delete-dependency"},"Delete dependency"),(0,o.kt)("p",null,"To delete a dependency click on a trash icon on the dependencies list."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Deleting a dependency")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Deleting a dependency deletes it within the whole project, and all inheriting pipelines. If you're not confident about\nthe functionality of the other pipelines, it's usually better to disable a dependency, instead of deleting it."))),(0,o.kt)("h3",{id:"installing-on-a-cluster"},"Installing on a cluster"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Dependencies Install",src:n(3043).Z,width:"3200",height:"1150"})),(0,o.kt)("p",null,"Whenever you connect the pipeline to a cluster, dependencies are automatically installed on your cluster. If the\ncluster doesn't have the dependency installed yet, Prophecy installs it and restarts the cluster automatically."),(0,o.kt)("h2",{id:"build-tool-customization"},"Build Tool Customization"),(0,o.kt)("p",null,"Project level templates can be defined on the ",(0,o.kt)("strong",{parentName:"p"},"advanced")," tab on the project main screen to generate the build files for all pipelines present inside a project.\nBy default, this is enabled by default for new projects.\nThe ",(0,o.kt)("strong",{parentName:"p"},"template")," can be customised at the project level as per need."),(0,o.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,o.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,o.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/175944764-1289eac2-4f24-4fe1-8893-7e98e298ddd5.mp4",title:"Enable templating",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,o.kt)("hr",null),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"For projects created before ",(0,o.kt)("strong",{parentName:"p"},"Prophecy 2.0 release on 24th June 2022"),", project templating would be disabled by default. We highly recommend you to enable it\nas shown in the process below:"),(0,o.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,o.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,o.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/175944722-32fc6e26-75d7-4c91-be7d-e8cc9afb34be.mp4",title:"Old project Enable templating",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,o.kt)("p",{parentName:"div"},"As soon as it is enabled and any workflow is opened on the browser, the existing ",(0,o.kt)("strong",{parentName:"p"},"pom.xml/build.py")," files\nwould get updated automatically with the new template defined at the project level. Also, it would automatically include the dependencies defined\nin the ",(0,o.kt)("strong",{parentName:"p"},"manage dependencies options tab")," from the UI in ",(0,o.kt)("strong",{parentName:"p"},"pom.xml/build.py")," files. Please ",(0,o.kt)("strong",{parentName:"p"},"commit the changes and re-release the project")," for\nchanges to take effect in the job."),(0,o.kt)("p",{parentName:"div"},"For any help required in enabling the project template for older projects, please reach out to prophecy support team."))),(0,o.kt)("h2",{id:"jobs-support"},"Jobs Support"),(0,o.kt)("p",null,"For projects in which templating is enabled, dependencies are added automatically to ",(0,o.kt)("strong",{parentName:"p"},"pom.xml/build.py")," files as soon as they\nare added on the ",(0,o.kt)("strong",{parentName:"p"},"dependency management")," screen in options."),(0,o.kt)("h3",{id:"scala"},"Scala"),(0,o.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,o.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,o.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/175944754-84002ed5-2c7c-4ed5-94bd-dd9c7e077e36.mp4",title:"Auto addition to pom file for scala",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,o.kt)("h3",{id:"python"},"Python"),(0,o.kt)("div",{class:"wistia_responsive_padding",style:{padding:"56.25% 0 0 0",position:"relative"}},(0,o.kt)("div",{class:"wistia_responsive_wrapper",style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},(0,o.kt)("iframe",{src:"https://user-images.githubusercontent.com/103921419/175944746-5300acd1-90b2-4356-8190-128dbe06d0b3.mp4",title:"Auto addition to build file for python",allow:"autoplay;fullscreen",allowtransparency:"true",frameborder:"0",scrolling:"no",class:"wistia_embed",name:"wistia_embed",msallowfullscreen:!0,width:"100%",height:"100%"}))),(0,o.kt)("hr",null),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"For older projects in which templating is disabled, the dependencies added to the pipelines are not propagated to the scheduled jobs automatically.\n",(0,o.kt)("strong",{parentName:"p"},"(We highly recommend to enable the templating for all projects, rather than editing the pom.xml files manually)")),(0,o.kt)("p",{parentName:"div"},"Though, if you want to keep the templating disabled at project level and still want to add dependencies for scala projects such that it is visible to your pipeline when it's scheduled,\nit has to be ",(0,o.kt)("strong",{parentName:"p"},"manually")," added to the ",(0,o.kt)("strong",{parentName:"p"},"pom.xml")," file.\nBelow is an example on how it can be achieved:"),(0,o.kt)("p",{parentName:"div"},"The dependency should be added anywhere between the ",(0,o.kt)("inlineCode",{parentName:"p"},"<dependencies></dependencies>")," tags. For instance to\nadd ",(0,o.kt)("inlineCode",{parentName:"p"},"io.github.etspaceman:scalacheck-faker_2.12:7.0.0")," dependency, add it to the ",(0,o.kt)("strong",{parentName:"p"},"pom.xml")," like so:"),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("img",{alt:"Dependencies List",src:n(4004).Z,width:"3200",height:"1150"})),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-xml"},"...\n<dependencies>\n    <dependency>\n        <groupId>io.github.etspaceman</groupId>\n        <artifactId>scalacheck-faker_2.12</artifactId>\n        <version>7.0.0</version>\n    </dependency>\n\n    ...\n</dependencies>\n...\n")))))}u.isMDXComponent=!0},5907:function(e,t,n){t.Z=n.p+"assets/images/dependencies-add-146e3067f9738739226ad0a3445df1b7.png"},3043:function(e,t,n){t.Z=n.p+"assets/images/dependencies-install-81b0fc1b6e483c5c8f00d2ec7deab329.gif"},5869:function(e,t,n){t.Z=n.p+"assets/images/dependencies-list-c7c64f85305b7033fe8ebee9d33d0500.png"},3247:function(e,t,n){t.Z=n.p+"assets/images/dependencies-open-6054cb1a6960ef1cb8d4921501a5e0eb.gif"},4004:function(e,t,n){t.Z=n.p+"assets/images/dependencies-pom-add-840a3df8109102daa6cbc3ef8ce470be.gif"},7286:function(e,t,n){t.Z=n.p+"assets/images/dependencies-storage-3a586a51d4647dab0591eee58ef77908.png"}}]);