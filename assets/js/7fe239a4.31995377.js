"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[40590],{2432:(e,n,o)=>{o.d(n,{A:()=>i});const i=o.p+"assets/images/data_copilot_open_ai_flow_architecture-4c702bd41d9fa2a37c3c60a05acbb5b6.png"},28453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>a});var i=o(96540);const t={},r=i.createContext(t);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(r.Provider,{value:n},e.children)}},82036:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"administration/self-hosted/enable-data-copilot","title":"Enable Copilot","description":"How to enable Prophecy Data Copilot for private VPC SaaS environments.","source":"@site/docs/administration/self-hosted/enable-data-copilot.md","sourceDirName":"administration/self-hosted","slug":"/administration/self-hosted/enable-data-copilot","permalink":"/administration/self-hosted/enable-data-copilot","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"concepts","permalink":"/tags/concepts"},{"inline":true,"label":"copilot","permalink":"/tags/copilot"},{"inline":true,"label":"installation","permalink":"/tags/installation"},{"inline":true,"label":"upgrade","permalink":"/tags/upgrade"}],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Enable Copilot","id":"enable-data-copilot","description":"How to enable Prophecy Data Copilot for private VPC SaaS environments.","sidebar_position":10,"tags":["concepts","copilot","installation","upgrade"]}}');var t=o(74848),r=o(28453);const s={title:"Enable Copilot",id:"enable-data-copilot",description:"How to enable Prophecy Data Copilot for private VPC SaaS environments.",sidebar_position:10,tags:["concepts","copilot","installation","upgrade"]},a=void 0,l={},d=[{value:"Installation",id:"installation",level:2},{value:"How much will I pay for Prophecy Copilot?",id:"how-much-will-i-pay-for-prophecy-copilot",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Prophecy Data Copilot"})," is an AI-powered assistant that delivers intelligent suggestions and automates repetitive tasks for visual data transformations. You can read more about it at ",(0,t.jsx)(n.a,{href:"/data-copilot",children:"Data Copilot"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Data Copilot leverages OpenAI's generative AI models to understand user intent, and enriched by the organizations' ",(0,t.jsx)(n.a,{href:"/knowledge-graph",children:"knowledge graph"}),", to automate repetitive data engineering tasks. By default, Data Copilot leverages ",(0,t.jsx)(n.strong,{children:"Prophecy's managed OpenAI subscription and is entirely free"})," for existing Prophecy customers. Prophecy uses user queries and metadata when communicating with OpenAI. Prophecy never sends any customer data to OpenAI."]}),"\n",(0,t.jsx)(n.p,{children:"However, for the most security conscious organizations, it is possible to configure Prophecy to use your own OpenAI endpoint. This page describes how to enable Prophecy Data Copilot for private VPC SaaS environments and configure it to use your own OpenAI or Azure OpenAI endpoint."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Prophecy Data Copilot &amp; OpenAI Flow Architecture",src:o(2432).A+"",width:"3840",height:"1816"})}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.p,{children:"From the Kubernetes cluster where Prophecy services are running:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Check that the ",(0,t.jsx)(n.code,{children:"prophecy-operator"}),", ",(0,t.jsx)(n.code,{children:"edweb"}),", ",(0,t.jsx)(n.code,{children:"metagraph"}),", and other Prophecy services are running version ",(0,t.jsx)(n.code,{children:"3.3.8.0"})," or greater."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["The above services should all be running the same release-version as the ",(0,t.jsx)(n.code,{children:"copilot"})," service defined in the image below, for example ",(0,t.jsx)(n.code,{children:"3.3.8.0"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Check that the ",(0,t.jsx)(n.code,{children:"athena"})," Prophecy service is running version ",(0,t.jsx)(n.code,{children:"3.3.8.0"})," or greater. This is only required if using the pipeline approach to the upgrade."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:"ProphecyCluster"})," CR, do the following:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"copilot"})," to ",(0,t.jsx)(n.code,{children:"enabledapps"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Once deployed, wait for the ",(0,t.jsx)(n.code,{children:"copilot-cm"})," to be created. Then edit the default values in the configmap to match the ENVs required."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Supply the API keys for the appropriate endpoint and ENV as below. Prophecy Copilot requires two types of models:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Smart LLM for complex tasks"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Recommended Model: ",(0,t.jsx)(n.code,{children:"gpt-4o"})]}),"\n",(0,t.jsx)(n.li,{children:"Supported Models: Any model from the gpt-4 family"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Fast LLM for easy and fast tasks"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Recommended Model: ",(0,t.jsx)(n.code,{children:"gpt-4o-mini"})]}),"\n",(0,t.jsxs)(n.li,{children:["Examples: ",(0,t.jsx)(n.code,{children:"gpt-4o-mini"}),", ",(0,t.jsx)(n.code,{children:"gpt-3.5-turbo"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"These models ensure optimal performance and efficiency for various tasks within Prophecy Copilot."}),"\n",(0,t.jsx)(n.p,{children:"OpenAI"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"AI_MODEL_PROVIDERS_CREDS: \"{ 'openai' : {'api_key': '___openai_api_key___'} }\"\nAVAILABLE_AI_MODELS: \"{ 'fast_model': {'provider': 'openai', 'model_name': 'gpt-4o-mini' }, 'smart_model': {'provider': 'openai', 'model_name': 'gpt-4o'} }\"\nNUM_WORKERS: \"< add value here >\"\nPORT: \"< add value here >\"\n"})}),"\n",(0,t.jsx)(n.p,{children:"Azure's OpenAI"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"AI_MODEL_PROVIDERS_CREDS: \"{ 'azure_openai' : {'api_key': '___azure_openai_api_key___', 'api_endpoint': 'https://name.openai.azure.com/'} }\"\nAVAILABLE_AI_MODELS: \"{ 'fast_model': {'provider': 'azure_openai', 'model_name': 'gpt-4o-mini', 'deployment_name': '___4o_mini_deployment___' }, 'smart_model': {'provider': 'azure_openai', 'model_name': 'gpt-4o', 'deployment_name': '___4o_deployment___'} }\"\nNUM_WORKERS: \"< add value here >\"\nPORT: \"< add value here >\"\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Enable the following variable on the common CP config map:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:'COPILOT_ENABLED: "true"'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If the app pod, especially ",(0,t.jsx)(n.code,{children:"copilot"}),", doesn't redeploy itself, restart the app pod."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"To learn more about how to connect Prophecy Data Copilot to private OpenAI endpoints, speak to your Prophecy account owner."})}),"\n",(0,t.jsx)(n.h3,{id:"how-much-will-i-pay-for-prophecy-copilot",children:"How much will I pay for Prophecy Copilot?"}),"\n",(0,t.jsx)(n.p,{children:"Copilot features are included with Prophecy\u2019s Spark and SQL offerings. There would be an additional cost if you chose to use a private subscription LLM service. In this case, the cost depends on the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Number of ",(0,t.jsx)(n.a,{href:"https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them",children:"word tokens"})," sent to the LLM provider"]}),"\n",(0,t.jsx)(n.li,{children:"Size of the datasets"}),"\n",(0,t.jsx)(n.li,{children:"Number of iterations Prophecy sends requests to the LLM provider"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);