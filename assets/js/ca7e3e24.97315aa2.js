"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[4460],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),y=a,m=u["".concat(c,".").concat(y)]||u[y]||d[y]||i;return n?r.createElement(m,o(o({ref:t},p),{},{components:n})):r.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=y;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"},51056:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=n(87462),a=(n(67294),n(3905));const i={title:"Amazon EMR with Apache Livy",id:"EMR-livy-installation-guide",description:"Installation Guide",sidebar_position:3,tags:["deployment","installation","emr","livy"]},o=void 0,l={unversionedId:"architecture/deployment/EMR-livy-installation-guide",id:"architecture/deployment/EMR-livy-installation-guide",title:"Amazon EMR with Apache Livy",description:"Installation Guide",source:"@site/docs/architecture/deployment/emr.md",sourceDirName:"architecture/deployment",slug:"/architecture/deployment/EMR-livy-installation-guide",permalink:"/architecture/deployment/EMR-livy-installation-guide",draft:!1,tags:[{label:"deployment",permalink:"/tags/deployment"},{label:"installation",permalink:"/tags/installation"},{label:"emr",permalink:"/tags/emr"},{label:"livy",permalink:"/tags/livy"}],version:"current",sidebarPosition:3,frontMatter:{title:"Amazon EMR with Apache Livy",id:"EMR-livy-installation-guide",description:"Installation Guide",sidebar_position:3,tags:["deployment","installation","emr","livy"]},sidebar:"defaultSidebar",previous:{title:"Backup/Restore Configuration",permalink:"/architecture/deployment/on-premise/backup-restore"},next:{title:"Tutorials",permalink:"/tutorials/"}},c={},s=[{value:"Create Amazon EMR cluster with Apache Livy",id:"create-amazon-emr-cluster-with-apache-livy",level:2},{value:"Configure network connectivity between Livy and Prophecy",id:"configure-network-connectivity-between-livy-and-prophecy",level:3},{value:"Create a Fabric to connect Prophecy to Livy",id:"create-a-fabric-to-connect-prophecy-to-livy",level:2}],p={toc:s},u="wrapper";function d(e){let{components:t,...i}=e;return(0,a.kt)(u,(0,r.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In the context of Spark execution engines, users have the flexibility to opt for Amazon EMR while utilizing Prophecy. This comprehensive documentation aims to provide users with a clear understanding of the installation process for Amazon EMR and Apache Livy. Additionally, it offers step-by-step guidance on creating a Fabric that enables seamless connectivity to the EMR environment via Livy."),(0,a.kt)("p",null,"Feel free to explore the following sections to gain insights into the integration of Amazon EMR and Apache Livy with Prophecy."),(0,a.kt)("h2",{id:"create-amazon-emr-cluster-with-apache-livy"},"Create Amazon EMR cluster with Apache Livy"),(0,a.kt)("admonition",{title:"Warning",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Livy does not work with Python version 3.8 and above.")),(0,a.kt)("p",null,"Navigate to Amazon EMR service and create a cluster. Under ",(0,a.kt)("strong",{parentName:"p"},"Application bundle")," select ",(0,a.kt)("strong",{parentName:"p"},"Custom"),"."),(0,a.kt)("p",null,"Choose appropriate applications to include in your installation. At a minimum, please make sure sure ",(0,a.kt)("strong",{parentName:"p"},"Livy")," and ",(0,a.kt)("strong",{parentName:"p"},"Spark")," are included in the install."),(0,a.kt)("img",{src:n(93388).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("h3",{id:"configure-network-connectivity-between-livy-and-prophecy"},"Configure network connectivity between Livy and Prophecy"),(0,a.kt)("p",null,"To configure the necessary network settings for seamless integration, specific modifications to the security groups of your EMR cluster are required. Please follow the instructions outlined below:\nIf you intend to utilize Prophecy as a SaaS (Software as a Service) solution, please note that the Prophecy public IP is ",(0,a.kt)("inlineCode",{parentName:"p"},"3.133.35.237"),". Ensure that the Core security group's outbound rule allows connections to this IP address."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Modify the ",(0,a.kt)("strong",{parentName:"li"},"Primary Node")," security group:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Allow incoming connections to port ",(0,a.kt)("inlineCode",{parentName:"li"},"8998")," from the Prophecy IP."),(0,a.kt)("li",{parentName:"ul"},"This can be achieved by adding an inbound rule to the Master security group that permits incoming traffic on port ",(0,a.kt)("inlineCode",{parentName:"li"},"8998")," from the Prophecy IP address."))),(0,a.kt)("li",{parentName:"ol"},"Modify the ",(0,a.kt)("strong",{parentName:"li"},"Core Node")," security group:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Allow outgoing connections to the Prophecy public IP over HTTPS."),(0,a.kt)("li",{parentName:"ul"},"To enable this, add an outbound rule to the Core security group that allows outgoing traffic over HTTPS protocol to the Prophecy public IP.")))),(0,a.kt)("p",null,"By implementing these adjustments to your EMR cluster's security groups, you will establish the necessary network configuration for effective integration with Prophecy."),(0,a.kt)("h2",{id:"create-a-fabric-to-connect-prophecy-to-livy"},"Create a Fabric to connect Prophecy to Livy"),(0,a.kt)("p",null,"Navigate to Prophecy's UI and click on ",(0,a.kt)("strong",{parentName:"p"},"Create Fabric"),". The Fabric will establish a connection with your EMR cluster and utilize it as the execution engine for your Pipelines."),(0,a.kt)("img",{src:n(74632).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("p",null,"Choose ",(0,a.kt)("strong",{parentName:"p"},"Livy")," as your ",(0,a.kt)("strong",{parentName:"p"},"Provider"),"."),(0,a.kt)("img",{src:n(8099).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("p",null,"Before proceeding, it is crucial to ensure that all the required settings are properly configured. If you are uncertain about the necessary configurations, we recommend reaching out to your cloud infrastructure team for additional guidance and assistance. They will be able to provide you with the specific information and support needed to ensure a successful setup."),(0,a.kt)("p",null,"You may find your ",(0,a.kt)("strong",{parentName:"p"},"Livy URL")," under the ",(0,a.kt)("strong",{parentName:"p"},"Applications")," tab on your EMR Cluster page."),(0,a.kt)("img",{src:n(16443).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("p",null,"Copy/paste your Livy URL under ",(0,a.kt)("strong",{parentName:"p"},"Spark Connection")," and choose the appropriate ",(0,a.kt)("strong",{parentName:"p"},"Spark Version")," and ",(0,a.kt)("em",{parentName:"p"},"Scala Version")," You may find the Spark version from your EMR console. Refer to ",(0,a.kt)("a",{parentName:"p",href:"https://spark.apache.org/docs"},"Spark documentation")," to find the Scala version in relation to your Spark version."),(0,a.kt)("img",{src:n(55287).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("p",null,"Configure appropriate ",(0,a.kt)("strong",{parentName:"p"},"Prophecy Library")," based on your Spark and Scala version. and click on ",(0,a.kt)("strong",{parentName:"p"},"Complete"),"."),(0,a.kt)("img",{src:n(8611).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("p",null,"Your Fabric for Amazon EMR is configured! Try creating a cluster using the Fabric that you've just created and attach to it."),(0,a.kt)("img",{src:n(38813).Z,alt:"EMR create cluster",width:"75%"}),(0,a.kt)("p",null,"Run a simple Pipeline and make sure that the interim returns data properly."))}d.isMDXComponent=!0},38813:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/attach-74ebceca15f0c6ff6424302b62e07275.png"},8611:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/library-b163db024527c8d24c895313de4807bf.png"},93388:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/livy-938a5bcdafa0b6d505604595152d0433.png"},74632:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/livyfabric-af32d81cb5f5fde973f34c350557bab5.png"},16443:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/livyurl-824c3c84d71a90542b6b59bedd08eafa.png"},8099:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/provider-d17eb0c20095beecf6242f6b19e88c46.png"},55287:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/sparkversion-b7473adfd710d85732157ee15dffb03c.png"}}]);