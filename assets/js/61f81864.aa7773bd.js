"use strict";(self.webpackChunkdocs_4=self.webpackChunkdocs_4||[]).push([[465],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var i=r.createContext({}),c=function(e){var t=r.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=c(e.components);return r.createElement(i.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(a),u=n,m=p["".concat(i,".").concat(u)]||p[u]||h[u]||o;return a?r.createElement(m,l(l({ref:t},d),{},{components:a})):r.createElement(m,l({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=u;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[p]="string"==typeof e?e:n,l[1]=s;for(var c=2;c<o;c++)l[c]=a[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},10290:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=a(87462),n=(a(67294),a(3905));const o={title:"Snowflake SQL",id:"snowflake",sidebar_position:1,description:"Run Models on a Snowflake Warehouse",tags:["snowflake","sql","connect","warehouse","fabric"]},l=void 0,s={unversionedId:"low-code-sql/fabrics/snowflake",id:"low-code-sql/fabrics/snowflake",title:"Snowflake SQL",description:"Run Models on a Snowflake Warehouse",source:"@site/docs/low-code-sql/fabrics/snowflake.md",sourceDirName:"low-code-sql/fabrics",slug:"/low-code-sql/fabrics/snowflake",permalink:"/low-code-sql/fabrics/snowflake",draft:!1,tags:[{label:"snowflake",permalink:"/tags/snowflake"},{label:"sql",permalink:"/tags/sql"},{label:"connect",permalink:"/tags/connect"},{label:"warehouse",permalink:"/tags/warehouse"},{label:"fabric",permalink:"/tags/fabric"}],version:"current",sidebarPosition:1,frontMatter:{title:"Snowflake SQL",id:"snowflake",sidebar_position:1,description:"Run Models on a Snowflake Warehouse",tags:["snowflake","sql","connect","warehouse","fabric"]},sidebar:"defaultSidebar",previous:{title:"Fabrics",permalink:"/low-code-sql/fabrics/"},next:{title:"Databricks SQL",permalink:"/low-code-sql/fabrics/databricks"}},i={},c=[{value:"Create a Fabric",id:"create-a-fabric",level:2},{value:"Basic Info",id:"basic-info",level:3},{value:"Provider",id:"provider",level:3},{value:"Schedule Jobs",id:"schedule-jobs",level:2}],d={toc:c},p="wrapper";function h(e){let{components:t,...o}=e;return(0,n.kt)(p,(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Snowflake has become a leading SQL Warehouse provider on the cloud. Follow the steps below to ",(0,n.kt)("a",{parentName:"p",href:"/low-code-sql/fabrics/snowflake#create-a-fabric"},"Create a Fabric")," in Prophecy so that you can execute data transformations on your Snowflake Warehouse. Power up Production models with ",(0,n.kt)("a",{parentName:"p",href:"/low-code-sql/fabrics/snowflake#schedule-jobs"},"scheduled Jobs")," on your Snowflake Warehouse using Airflow. Prophecy supports low-code development at every step."),(0,n.kt)("h2",{id:"create-a-fabric"},"Create a Fabric"),(0,n.kt)("p",null,"Create an entity by clicking the ",(0,n.kt)("strong",{parentName:"p"},"plus")," icon. Click to ",(0,n.kt)("strong",{parentName:"p"},"Create a Fabric"),".\nThere are two essential steps to creating a Fabric:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/low-code-sql/fabrics/snowflake#basic-info"},"Basic info")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/low-code-sql/fabrics/snowflake#provider"},"Providers"))),(0,n.kt)("h3",{id:"basic-info"},"Basic Info"),(0,n.kt)("p",null,"Each Fabric requires some ",(0,n.kt)("strong",{parentName:"p"},"Basic information"),"\n",(0,n.kt)("img",{alt:"SFBasicInfo",src:a(95691).Z,width:"2880",height:"1084"})),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Basic Info"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"1 Title")," - Specify a title, like devSnowflake, for your Fabric. \u201cdev\u201d or \u201cprod\u201d are helpful descriptors for this environment setup. Also specify a description (optional).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"2 Team")," - Select a team to own this Fabric. Click the dropdown to list the teams your user is a member. If you don\u2019t see the desired team, ask a Prophecy Administrator to add you to a team.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"3 Continue")," to the Provider step.")))),(0,n.kt)("h3",{id:"provider"},"Provider"),(0,n.kt)("p",null,"The SQL ",(0,n.kt)("strong",{parentName:"p"},"Provider")," is both the storage warehouse and the execution environment where your SQL code will run.\n",(0,n.kt)("img",{alt:"SFProvider",src:a(41888).Z,width:"2880",height:"1726"})),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Provider details"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"1 Provider Type")," - Select SQL as the Provider type. (Alternatively, create a Spark type Fabric using instructions ",(0,n.kt)("a",{parentName:"td",href:"/low-code-spark/fabrics/"},"here")," or an Airflow type Fabric following these ",(0,n.kt)("a",{parentName:"td",href:"/low-code-jobs/airflow/setup/"},"instructions"),".)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"2 Provider")," - Click the dropdown menu for the list of supported Provider types. Select Snowflake.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"3 URL")," - Add the Snowflake Account URL, which looks like this: https://<your_domain_here>.snowflakecomputing.com")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"4 Username")," - Add the username that Prophecy will use to connect to the Snowflake Warehouse.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"5 Password")," - Add the password that Prophecy will use to connect to the Snowflake Warehouse. These username/password credentials are encrypted for secure storage. Also, each Prophecy user will provide their own username/password credential upon login. Be sure these credentials are scoped appropriately; Prophecy respects the authorization granted to this Snowflake user.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"6 Role")," - Add the Snowflake ",(0,n.kt)("a",{parentName:"td",href:"https://docs.snowflake.com/en/user-guide/security-access-control-overview#roles"},"role")," that Prophecy will use to read data and execute queries on the Snowflake Warehouse. The role must be already granted to the username/password provided above and should be scoped according to the permission set desired for Prophecy.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"7 Warehouse")," - Specify the Snowflake warehouse for default writes for this execution environment.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"8 Database and Schema")," - Specify the desired Snowflake database (and below, the schema) for default writes for this execution environment.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"9 Continue")," to complete the Fabric creation.")))),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Each user can read tables from each database and schema for which they have access. The default write database and schema is set here in the Fabric.")),(0,n.kt)("p",null,"Completed Fabrics will appear on the Metadata page and can be managed by Team admins.\n",(0,n.kt)("img",{alt:"FabricMetadata",src:a(9531).Z,width:"2880",height:"652"})),(0,n.kt)("p",null,"Each team member can attach completed Fabrics to their Projects and Models.\n",(0,n.kt)("img",{alt:"SFAttachCluster",src:a(10407).Z,width:"2880",height:"1726"})),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Attach a Fabric to a Model")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"1 Metadata")," - Click the Prophecy Metadata and search for a Project or Model of interest. Open the Model.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"2 Model"),' - Here we have opened a SQL model called "MyModel"')),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"3 Attach Cluster")," - This dropdown menu lists the Fabrics and execution clusters available to this Project, according to the Team.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"4 Snowflake Fabric")," - The avaialable Fabrics appear here.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"5 Attach Cluster")," - The Snowflake Warehouse can be attached to the Model for execution.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"6 Run Model")," - Once a Fabric and Cluster are attached to the Project, the Model can be run interactively using the play button.")))),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Remember, each user will be prompted to update the Fabric with their own credentials. Prophecy respects these credentials when reading Snowflake tables, databases, etc. User writes default to the database and schema defined in the Fabric.")),(0,n.kt)("h2",{id:"schedule-jobs"},"Schedule Jobs"),(0,n.kt)("p",null,"SQL models can be scheduled using Airflow to run on Snowflake. Create an ",(0,n.kt)("a",{parentName:"p",href:"https://docs.prophecy.io/low-code-jobs/airflow/setup/"},"Airflow Fabric"),", and setup a ",(0,n.kt)("a",{parentName:"p",href:"https://docs.prophecy.io/low-code-jobs/airflow/setup/MWAA_fabric#setting-up-connections"},"Snowflake Connection")," that references the Snowflake Fabric created above. Prophecy supports Snowflake Connections from these three Airflow flavors: ",(0,n.kt)("a",{parentName:"p",href:"https://docs.prophecy.io/low-code-jobs/airflow/setup/composer_fabric"},"Composer"),", ",(0,n.kt)("a",{parentName:"p",href:"https://docs.prophecy.io/low-code-jobs/airflow/setup/MWAA_fabric#setting-up-connections"},"MWAA"),", and ",(0,n.kt)("a",{parentName:"p",href:"https://docs.prophecy.io/low-code-jobs/airflow/setup/prophecy-managed/connections/prophecy_managed_airflow_fabric_snowflake_connections"},"Prophecy Managed Airflow"),"."))}h.isMDXComponent=!0},9531:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/FabricMetadata-5fc2660e7f91eee87b014b8b4d8a116c.png"},10407:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/SnowflakeAttachCluster-00e2acad4799647568e343987d62061e.png"},95691:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/SnowflakeFabric1-de9169ac652415399ba6a7f2248ab96d.png"},41888:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/SnowflakeFabric2-89b80f1e394b7881e79f27225cd905e9.png"}}]);